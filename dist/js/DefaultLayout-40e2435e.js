import{d as v,f as h,n as m,p as l,ak as _,al as s,B as o,b0 as oe,b1 as ae,b2 as se,I as D,q as g,A as f,aX as H,aY as z,b3 as q,s as w,aq as F,b4 as le,v as W,F as S,b5 as ce,r as P,b6 as re,ai as G,E as J,b7 as ue,b8 as Q,b9 as U,ba as X,g as Z,bb as ie,ar as k,bc as de,bd as me,af as pe,G as _e,h as fe,aP as be,aO as he,be as x,aT as A,bf as $e,bg as ye,bh as ge,bi as ve,bj as Ce}from"./chunk-libs-0a2e70b5.js";import{j as ee,_ as C,k as Me,u as V,C as j,i as Se,g as ne,l as Y}from"./index-38c72e58.js";const Te=v({name:"Content",setup(){const e=ee();return{cachedTabs:h(()=>e.cachedTabs)}}});function ke(e,n,c,a,d,r){const t=m("router-view");return l(),_(t,null,{default:s(({Component:p,route:u})=>[o(se,{name:"fade-slide",mode:"out-in",appear:""},{default:s(()=>[(l(),_(oe,{max:20,include:e.cachedTabs},[(l(),_(ae(p),{key:u.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}const we=C(Te,[["render",ke]]),De=v({name:"Logo",components:{Icon:D}}),Ie="logo__O3W1z",Oe="logoIcon__gvzS2",Re={logo:Ie,logoIcon:Oe};function Ee(e,n,c,a,d,r){const t=m("Icon");return l(),g("div",{class:f(e.$style.logo)},[o(t,{class:f(e.$style.logoIcon),icon:"@local:custom:logo"},null,8,["class"])],2)}const Ae={$style:Re},Le=C(De,[["render",Ee],["__cssModules",Ae]]),Be=v({name:"MainMenu",components:{Icon:D},props:{item:{type:Object,required:!0}},setup(e){const n=H(),c=z(),a=h(()=>e.item.meta?!e.item.meta.hidden:!1);function d(){n.path!==e.item.path&&c.push(e.item.path).catch(r=>{console.error(r)})}return{show:a,handleJump:d}}});function Fe(e,n,c,a,d,r){const t=m("Icon"),p=le;return e.show?(l(),_(p,{key:0,index:e.item.path,onClick:e.handleJump},{title:s(()=>[e.item.meta.icon?(l(),_(t,{key:0,icon:e.item.meta.icon},null,8,["icon"])):q("",!0),w("span",null,F(e.item.meta.title),1)]),_:1},8,["index","onClick"])):q("",!0)}const te=C(Be,[["render",Fe]]),He=v({name:"SubMenu",components:{Icon:D,MainMenu:te},props:{item:{type:Object,required:!0}},setup(e){return{onlyOneChild:h(()=>e.item.children.length===1?e.item.meta?!e.item.meta.alwaysShow:!0:!1)}}});function We(e,n,c,a,d,r){const t=m("MainMenu"),p=m("Icon"),u=m("sub-menu",!0),i=ce;return e.onlyOneChild?(l(),_(t,{key:0,item:e.item.children[0]},null,8,["item"])):(l(),_(i,{key:1,index:e.item.path},{title:s(()=>[e.item.meta.icon?(l(),_(p,{key:0,icon:e.item.meta.icon},null,8,["icon"])):q("",!0),w("span",null,F(e.item.meta.title),1)]),default:s(()=>[(l(!0),g(S,null,W(e.item.children,y=>(l(),g(S,{key:y.path},[y.children?(l(),_(u,{key:0,item:y},null,8,["item"])):(l(),_(t,{key:1,item:y},null,8,["item"]))],64))),128))]),_:1},8,["index"]))}const Pe=C(He,[["render",We]]),Ve=v({name:"Menu",components:{MainMenu:te,SubMenu:Pe},setup(){const e=P({list:[]}),n=H(),c=Me(),a=V(),d=h(()=>re(c.routes)),r=h(()=>a.$state),t=h(()=>n.path);function p(i,y=""){for(const $ of i)if($.path=y+($.path.startsWith("/")?$.path:"/".concat($.path)),delete $.component,delete $.redirect,$.children){if($.children.length===0)continue;p($.children,$.path)}return i}function u(){const i=p(d.value);e.list=i}return G(()=>{u()}),{...J(e),CSS_VARS:j,activeMenu:t,setting:r}}}),Ne="menu__JeSdZ",Ke={menu:Ne};function qe(e,n,c,a,d,r){const t=m("SubMenu"),p=m("MainMenu"),u=ue;return l(),_(u,{mode:"vertical",class:f(e.$style.menu),defaultActive:e.activeMenu,backgroundColor:e.CSS_VARS.menuBg,textColor:e.CSS_VARS.menuText,activeTextColor:e.CSS_VARS.menuActiveText,collapse:!e.setting.sideOpened,collapseTransition:!1,uniqueOpened:""},{default:s(()=>[(l(!0),g(S,null,W(e.list,i=>(l(),g(S,{key:i.path},[i.children?(l(),_(t,{key:0,item:i},null,8,["item"])):(l(),_(p,{key:1,item:i},null,8,["item"]))],64))),128))]),_:1},8,["class","defaultActive","backgroundColor","textColor","activeTextColor","collapse"])}const je={$style:Ke},ze=C(Ve,[["render",qe],["__cssModules",je]]),Je=v({name:"Avatar",components:{Icon:D},setup(){const e=P({commandMap:{logout:()=>d()}}),n=z(),c=Se(),{$msgbox:a}=ne();function d(){a.confirm("确认退出登录？","提示",{type:"warning"}).then(async()=>{await c.logout(),n.replace({path:"/login"})}).catch(()=>{})}function r(t){e.commandMap[t]()}return{handleCommand:r}}}),Ye="avatarWrapper__qJ38h",Ge="avatar__XLkyv",Qe="avatarDropdownMenu__vY1TP",Ue={avatarWrapper:Ye,avatar:Ge,avatarDropdownMenu:Qe},Xe=w("span",null,"退出登录",-1);function Ze(e,n,c,a,d,r){const t=m("Icon"),p=Q,u=U,i=X;return l(),_(i,{onCommand:e.handleCommand},{default:s(()=>[w("div",{class:f(e.$style.avatarWrapper)},[o(t,{class:f(e.$style.avatar),icon:"@local:custom:avatar",inline:!0},null,8,["class"])],2)]),dropdown:s(()=>[o(u,{class:f(e.$style.avatarDropdownMenu)},{default:s(()=>[o(p,{command:"logout"},{default:s(()=>[o(t,{icon:"@local:icon-park-outline:logout",inline:!0}),Xe]),_:1})]),_:1},8,["class"])]),_:1},8,["onCommand"])}const xe={$style:Ue},en=C(Je,[["render",Ze],["__cssModules",xe]]),nn=v({name:"Breadcrumb",setup(){const e=P({breadcrumbs:[]}),n=H();function c(){var r;const a=n.matched,d=[];for(const t of a)t.path!=="/"&&d.push({path:t.path.startsWith("/")?t.path:"/".concat(t.path),title:((r=t.meta)==null?void 0:r.title)||"-"});e.breadcrumbs=d}return Z(()=>n.path,a=>{a.startsWith("/redirect/")||c()}),G(()=>{c()}),{...J(e)}}}),tn="breadcrumb__45QCe",on={breadcrumb:tn};function an(e,n,c,a,d,r){const t=de,p=ie;return l(),_(p,{class:f(e.$style.breadcrumb)},{default:s(()=>[(l(!0),g(S,null,W(e.breadcrumbs,(u,i)=>(l(),g(S,{key:u.path},[i===e.breadcrumbs.length-1?(l(),_(t,{key:0},{default:s(()=>[k(F(u.title),1)]),_:2},1024)):(l(),_(t,{key:1,to:{path:u.path}},{default:s(()=>[k(F(u.title),1)]),_:2},1032,["to"]))],64))),128))]),_:1},8,["class"])}const sn={$style:on},ln=C(nn,[["render",an],["__cssModules",sn]]),cn=v({name:"ScreenFull",components:{Icon:D},setup(){const{isFullscreen:e,isSupported:n,toggle:c}=me(),{$message:a}=ne(),d=h(()=>e.value?"@local:icon-park-outline:off-screen":"@local:icon-park-outline:full-screen");function r(){n?c():a.warning("浏览器不支持全屏")}return{icon:d,handleClick:r}}});function rn(e,n,c,a,d,r){const t=m("Icon");return l(),g("div",{title:"全屏",onClick:n[0]||(n[0]=(...p)=>e.handleClick&&e.handleClick(...p))},[o(t,{icon:e.icon,inline:!0},null,8,["icon"])])}const un=C(cn,[["render",rn]]),dn=v({name:"Trigger",components:{Icon:D},setup(){const e=V(),n=h(()=>!e.sideOpened),c=h(()=>n.value?"@local:icon-park-outline:menu-unfold":"@local:icon-park-outline:menu-fold");function a(){e.change({key:"sideOpened",value:n.value})}return{collapsed:n,icon:c,handleClick:a}}}),mn="trigger__lcYms",pn={trigger:mn};function _n(e,n,c,a,d,r){const t=m("Icon");return l(),_(t,{class:f(e.$style.trigger),icon:e.icon,onClick:e.handleClick},null,8,["class","icon","onClick"])}const fn={$style:pn},bn=C(dn,[["render",_n],["__cssModules",fn]]),hn=v({name:"Navbar",components:{Avatar:en,Breadcrumb:ln,ScreenFull:un,Trigger:bn}}),$n="navbar__JDd-o",yn="left__Yp02w",gn="right__Z-Ibh",vn={navbar:$n,left:yn,right:gn};function Cn(e,n,c,a,d,r){const t=m("Trigger"),p=m("Breadcrumb"),u=m("ScreenFull"),i=m("Avatar"),y=pe;return l(),g("div",{class:f(e.$style.navbar)},[w("div",{class:f(e.$style.left)},[o(t),o(p)],2),w("div",{class:f(e.$style.right)},[o(y,{size:15},{default:s(()=>[o(u),o(i)]),_:1})],2)],2)}const Mn={$style:vn},Sn=C(hn,[["render",Cn],["__cssModules",Mn]]),Tn=v({name:"Tabbar",components:{Icon:D},setup(){const e=P({activeKey:"",commandMap:{refresh:()=>$(),closeLeft:()=>N(),closeRight:()=>I(),closeOther:()=>K(),closeAll:()=>L()}}),n=H(),c=z(),a=ee(),d=V(),r=h(()=>a.visitedTabs),t=h(()=>r.value.findIndex(b=>b.fullPath===e.activeKey)===0),p=h(()=>r.value.findIndex(b=>b.fullPath===e.activeKey)===r.value.length-1),u=h(()=>r.value.length<=1);function i(b){return e.activeKey===b.fullPath}function y(){const{name:b,path:T,fullPath:E}=n;return b&&[Y.LOGIN,Y.ERROR].indexOf(T)===-1&&(a.addTab(n),e.activeKey=E),!1}function $(){a.delCachedTab(n).then(()=>{const{fullPath:b}=n;_e(()=>{c.replace({path:"/redirect"+b})})})}function M(b){const T=r.value.find(E=>E.fullPath===b);a.delTab(T).then(({visitedTabs:E})=>{i(T)&&O(E)})}function N(){a.delLeftTabs(n)}function I(){a.delRightTabs(n)}function K(){a.delOthersTabs(n)}function L(){a.delAllTabs().then(({visitedTabs:b})=>{O(b)})}function B(b){c.push(b)}function O(b){const T=b.slice(-1)[0];T?c.push(T.fullPath):n.name===d.homeRoute.name?c.replace({path:"/redirect"+n.fullPath}):c.replace("/")}function R(b){e.commandMap[b]()}return Z(()=>n.path,()=>{y()}),fe(()=>{y()}),{...J(e),visitedTabs:r,closeLeftDisabled:t,closeRightDisabled:p,closeOtherDisabled:u,handleCloseTab:M,handleSelectTab:B,handleCommand:R}}}),kn="tabbar__2iI-k",wn="tabsMenu__sonef",Dn="tabsDropdownMenu__x75gy",In={tabbar:kn,tabsMenu:wn,tabsDropdownMenu:Dn};function On(e,n,c,a,d,r){const t=he,p=be,u=m("Icon"),i=Q,y=U,$=X;return l(),g("div",{class:f(e.$style.tabbar)},[o(p,{modelValue:e.activeKey,"onUpdate:modelValue":n[0]||(n[0]=M=>e.activeKey=M),onTabChange:e.handleSelectTab,onTabRemove:e.handleCloseTab},{default:s(()=>[(l(!0),g(S,null,W(e.visitedTabs,M=>(l(),_(t,{key:M.fullPath,name:M.fullPath,label:M.meta.title,closable:""},null,8,["name","label"]))),128))]),_:1},8,["modelValue","onTabChange","onTabRemove"]),o($,{placement:"bottom-end",onCommand:e.handleCommand},{default:s(()=>[w("div",{class:f(e.$style.tabsMenu)},[o(u,{icon:"@local:icon-park-outline:down",inline:!0})],2)]),dropdown:s(()=>[o(y,{class:f(e.$style.tabsDropdownMenu)},{default:s(()=>[o(i,{command:"refresh"},{default:s(()=>[o(u,{icon:"@local:icon-park-outline:redo",inline:!0}),k(" 刷新页面 ")]),_:1}),o(i,{command:"closeLeft",disabled:e.closeLeftDisabled,divided:""},{default:s(()=>[o(u,{icon:"@local:icon-park-outline:to-left",inline:!0}),k(" 关闭左侧 ")]),_:1},8,["disabled"]),o(i,{command:"closeRight",disabled:e.closeRightDisabled},{default:s(()=>[o(u,{icon:"@local:icon-park-outline:to-right",inline:!0}),k(" 关闭右侧 ")]),_:1},8,["disabled"]),o(i,{command:"closeOther",disabled:e.closeOtherDisabled,divided:""},{default:s(()=>[o(u,{icon:"@local:icon-park-outline:close",inline:!0}),k(" 关闭其它 ")]),_:1},8,["disabled"]),o(i,{command:"closeAll"},{default:s(()=>[o(u,{icon:"@local:icon-park-outline:close-one",inline:!0}),k(" 关闭所有 ")]),_:1})]),_:1},8,["class"])]),_:1},8,["onCommand"])],2)}const Rn={$style:In},En=C(Tn,[["render",On],["__cssModules",Rn]]),[An,Ln]=x(),[Bn,Fn]=x(),Hn=v({name:"DefaultLayout",components:{Content:we,Logo:Le,Menu:ze,Navbar:Sn,Tabbar:En,DefineHeader:An,ReuseHeader:Ln,DefineContent:Bn,ReuseContent:Fn},setup(){const e=V(),n=h(()=>e.$state),c=h(()=>n.value.sideOpened?n.value.sideOpenedWidth:n.value.sideClosedWidth),a=h(()=>{const t={};return n.value.sideOpened?(t.marginLeft=n.value.sideOpenedWidth,t.width="calc(100vw - ".concat(n.value.sideOpenedWidth,")")):(t.marginLeft=n.value.sideClosedWidth,t.width="calc(100vw - ".concat(n.value.sideClosedWidth,")")),t}),d=h(()=>{const t={height:j.headerHeight};return n.value.fixedHeader&&(t.position="sticky",t.top="0px"),t}),r=h(()=>{const t={};return n.value.fixedHeader&&(t.position="sticky",t.top=j.headerHeight),t});return{setting:n,asideWidth:c,mainStyle:a,headerStyle:d,tabbarStyle:r}}}),Wn="layout__Cm3G4",Pn="layoutSide__Qx-Oj",Vn="layoutMain__RvQoN",Nn="layoutHeader__1O0br",Kn="layoutContent__0Ei-r",qn={layout:Wn,layoutSide:Pn,layoutMain:Vn,layoutHeader:Nn,layoutContent:Kn};function jn(e,n,c,a,d,r){const t=m("Navbar"),p=$e,u=m("DefineHeader"),i=m("Content"),y=ye,$=m("DefineContent"),M=m("Logo"),N=m("Menu"),I=ge,K=ve,L=m("ReuseHeader"),B=m("Tabbar"),O=m("ReuseContent"),R=Ce;return l(),g(S,null,[o(u,null,{default:s(()=>[o(p,{class:f(e.$style.layoutHeader),style:A(e.headerStyle)},{default:s(()=>[o(t)]),_:1},8,["class","style"])]),_:1}),o($,null,{default:s(()=>[o(y,{class:f(e.$style.layoutContent)},{default:s(()=>[o(i)]),_:1},8,["class"])]),_:1}),o(R,{class:f(e.$style.layout)},{default:s(()=>[o(K,{class:f(e.$style.layoutSide),width:e.asideWidth},{default:s(()=>[o(M),o(I,null,{default:s(()=>[o(N)]),_:1})]),_:1},8,["class","width"]),e.setting.fixedHeader?(l(),_(R,{key:0,class:f(e.$style.layoutMain),style:A(e.mainStyle),direction:"vertical"},{default:s(()=>[o(L),o(B,{style:A(e.tabbarStyle)},null,8,["style"]),o(I,{id:"page"},{default:s(()=>[o(O)]),_:1})]),_:1},8,["class","style"])):(l(),_(I,{key:1},{default:s(()=>[o(R,{class:f(e.$style.layoutMain),style:A(e.mainStyle),direction:"vertical"},{default:s(()=>[o(L),o(B,{style:A(e.tabbarStyle)},null,8,["style"]),o(O)]),_:1},8,["class","style"])]),_:1}))]),_:1},8,["class"])],64)}const zn={$style:qn},Gn=C(Hn,[["render",jn],["__cssModules",zn]]);export{Gn as default};
