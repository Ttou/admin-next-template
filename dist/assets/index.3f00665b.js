import{u as F,S as o,a as q,b as J,R as I,c as w}from"./index.e33807a6.js";import{u as M}from"./useSettingStore.7b1e1410.js";import{d as h,c as i,b as e,ab as X,a4 as Y,ag as G,r as _,a as L,ah as p,ai as P,aj as Q,ak as Z,al as B,am as ee,an as x,k as $,ao as H,ap as E,U as S,aq as te,w as ae,ar as ne,as as le,at as se,V as re,o as oe,au as W,av as ie,aw as N,n as ue,ax as R,ay as ce,az as de,aA as he}from"./vendor.dd8381e0.js";var be=h({name:"Content",setup(){const t=F();return{cachedTabs:i(()=>t.cachedTabs)}},render(){return e(X,null,{default:({Component:t,route:a})=>e(Y,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(G,{max:20,include:this.cachedTabs},[e(t,{key:a.fullPath},null)])]})})}});const me="logo__b4V60",fe="logoIcon__1fNeN";var j={logo:me,logoIcon:fe},pe=h({name:"Logo",setup(){const t=_({}),a=M(),n=i(()=>a.$state);return L(n,l=>{t.value.height=l.siderLogoHeight,t.value.borderRight=l.siderTheme==="light"?"1px solid #f0f0f0":"unset"},{deep:!0,immediate:!0}),{style:t}},render(){return e("div",{class:j.logo,style:this.style},[e(o,{class:j.logoIcon,name:"logo"},null)])}}),D=h({name:"MainMenu",props:{item:{type:Object,required:!0}},setup(t){return{show:i(()=>t.item.meta?!t.item.meta.hidden:!1)}},render(){return this.show?e(p,{icon:this.item.meta.icon?e(o,{name:this.item.meta.icon},null):null,key:this.item.path},{default:()=>[e(P,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),A=h({name:"SubMenu",props:{item:{type:Object,required:!0}},setup(t){return{onlyOneChild:i(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e(D,{item:this.item.children[0]},null):e(Q,{key:this.item.path,icon:this.item.meta.icon?e(o,{name:this.item.meta.icon},null):null,title:this.item.meta.title},{default:()=>{var t;return[(t=this.item.children)==null?void 0:t.map(a=>a.children?e(Z("sub-menu"),{item:a},null):e(D,{item:a},null))]}})}});function ve(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$(t)}var ye=h({name:"Menu",components:{SubMenu:A},setup(){const t=_([]),a=_([]),n=_([]),l=B(),u=q(),s=M(),y=i(()=>ee(u.routes)),d=i(()=>s.$state),g=i(()=>{const b={};return b.minHeight=`calc(100vh - ${d.value.siderLogoHeight})`,b});function m(b,k=""){for(const c of b)if(c.name!=="Dashboard"?c.path=k+(c.path.startsWith("/")?c.path:`/${c.path}`):c.path=`/${c.path}`,delete c.component,delete c.redirect,c.children){if(c.children.length===0)continue;m(c.children,c.path)}return b}function C(){const b=m(y.value);t.value=b}return L(()=>l.path,b=>{C(),a.value=[...l.matched.map(k=>k.path)],n.value=[b]},{immediate:!0}),{list:t,openKeys:a,selectedKeys:n,setting:d,style:g}},render(){let t;const a=n=>n.children?e(A,{item:n},null):e(D,{item:n},null);return e(x,{mode:"inline",theme:this.setting.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":n=>this.openKeys=n,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":n=>this.selectedKeys=n,style:this.style},ve(t=this.list.map(a))?t:{default:()=>[t]})}});const ge="navbar__hJHzc",Ce="left__jNRv4",Te="trigger__-bzRa",Se="breadcrumb__fDC6f",_e="right__POa-W",ke="avatarWrapper__oh6CA",Oe="avatar__t145K";var v={navbar:ge,left:Ce,trigger:Te,breadcrumb:Se,right:_e,avatarWrapper:ke,avatar:Oe},Me=h({name:"Avatar",setup(){const t=H(),a=J();function n(){te.confirm({title:"\u63D0\u793A",icon:e(o,{class:"anticon",name:"navbar-exclamation"},null),content:"\u786E\u8BA4\u9000\u51FA\u767B\u5F55\uFF1F",async onOk(){await a.logout(),t.replace({path:"/login"})}})}return{handleLogout:n}},render(){return e(E,null,{default:()=>e("div",{class:v.avatarWrapper},[e(o,{class:v.avatar,name:"avatar"},null)]),overlay:()=>e(x,null,{default:()=>[e(p,{onClick:this.handleLogout},{default:()=>[e(o,{name:"navbar-logout",style:{marginRight:"5px"}},null),e("span",null,[S("\u9000\u51FA\u767B\u5F55")])]})]})})}}),we=h({name:"Breadcrumb",setup(){const t=_([]),a=H();function n(u){var s;return((s=u.meta)==null?void 0:s.title)||"undefined"}function l(u){var y;const s=[];for(const d of u){if(d.path==="/")continue;const g={path:d.path.startsWith("/")?d.path:`/${d.path}`,breadcrumbName:((y=d.meta)==null?void 0:y.title)||"undefined",children:[]};d.children&&(g.children=d.children.map(m=>{var C;return{path:d.path+`/${m.path}`,breadcrumbName:((C=m.meta)==null?void 0:C.title)||"undefined"}})),s.push(g)}return s}return ae(()=>{const u=a.currentRoute.value;t.value=l(u.matched)}),{routes:t,getBreadcrumbName:n}},render(){return e(ne,{class:v.breadcrumb,routes:this.routes,itemRender:({route:t,routes:a})=>a.indexOf(t)===a.length-1?e("span",null,[t.breadcrumbName]):e(P,{to:t.path},{default:()=>[t.breadcrumbName]})},null)}}),Re=h({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:a,toggle:n}=le();function l(){a?n():se.warn("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5168\u5C4F")}return{isFullscreen:t,handleClick:l}},render(){return e("div",{title:"\u5168\u5C4F",style:{cursor:"pointer"},onClick:this.handleClick},[this.isFullscreen?e(o,{name:"navbar-fullscreen-exit"},null):e(o,{name:"navbar-fullscreen"},null)])}}),De=h({name:"SiderTheme",setup(){const t=M(),a=i(()=>t.siderTheme);function n(){t.change({key:"siderTheme",value:a.value==="dark"?"light":"dark"})}return{siderTheme:a,handleClick:n}},render(){return e("div",{title:"\u4E3B\u9898",style:{cursor:"pointer"},onClick:this.handleClick},[this.siderTheme==="dark"?e(o,{name:"navbar-theme-dark"},null):e(o,{name:"navbar-theme-light"},null)])}}),Le=h({name:"Trigger",setup(){const t=M(),a=i(()=>!t.siderOpened);function n(){t.change({key:"siderOpened",value:a.value})}return{collapsed:a,handleClick:n}},render(){return e(o,{class:v.trigger,name:this.collapsed?"navbar-menu-unfold":"navbar-menu-fold",onClick:this.handleClick},null)}}),xe=h({name:"Header",render(){return e("div",{class:v.navbar},[e("div",{class:v.left},[e(Le,null,null),e(we,null,null)]),e("div",{class:v.right},[e(re,null,{default:()=>[e(Re,null,null),e(De,null,null),e(Me,null,null)]})])])}});const $e="tabbar__3urcJ",He="tabContent__-d8Yv",Ke="tabCloseIcon__9H4YP",Ie="tabsMenu__4WXXF",We="tabsDropdownMenu__aNrgf";var O={tabbar:$e,tabContent:He,tabCloseIcon:Ke,tabsMenu:Ie,tabsDropdownMenu:We};function Ne(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$(t)}var je=h({name:"Tabs",setup(){const t=_(""),a=B(),n=H(),l=F(),u=i(()=>l.visitedTabs),s=i(()=>u.value.findIndex(r=>r.path===t.value)===0),y=i(()=>u.value.findIndex(r=>r.path===t.value)===u.value.length-1),d=i(()=>u.value.length<=1);function g(r){return t.value===r.path}function m(){const{name:r,path:f}=a;return r&&[I.LOGIN,I.ERROR].indexOf(f)===-1&&(l.addTab(a),t.value=f),!1}function C(){l.delCachedTab(a).then(()=>{const{fullPath:r}=a;ue(()=>{n.replace({path:"/redirect"+r})})})}function b(r){l.delTab(r).then(({visitedTabs:f})=>{g(r)&&K(f)})}function k(){l.delLeftTabs(a)}function c(){l.delRightTabs(a)}function U(){l.delOthersTabs(a)}function V(){l.delAllTabs().then(({visitedTabs:r})=>{K(r)})}function z(r){n.push(r)}function K(r){const f=r.slice(-1)[0];f?n.push(f.fullPath):a.name==="Analysis"?n.replace({path:"/redirect"+a.fullPath}):n.replace("/")}return L(()=>a.path,()=>{m()}),oe(()=>{m()}),{activeKey:t,visitedTabs:u,closeLeftDisabled:s,closeRightDisabled:y,closeOtherDisabled:d,handleCloseTab:b,handleCloseLeftTabs:k,handleCloseRightTabs:c,handleCloseOtherTabs:U,handleCloseAllTabs:V,handleSelectTab:z,handleRefreshTab:C}},render(){let t;return e("div",{class:O.tabbar},[e(W,{activeKey:this.activeKey,"onUpdate:activeKey":a=>this.activeKey=a,onChange:this.handleSelectTab},Ne(t=this.visitedTabs.map(a=>e(W.TabPane,{tab:()=>e("div",{class:O.tabContent},[e("span",null,[a.meta.title]),e(o,{name:"tabbar-close",class:O.tabCloseIcon,onClick:ie(()=>this.handleCloseTab(a),["stop"])},null)]),key:a.path},null)))?t:{default:()=>[t]}),e(E,{overlayStyle:{zIndex:100002}},{default:()=>e("div",{class:O.tabsMenu},[e(o,{name:"tabbar-down"},null)]),overlay:()=>e(x,{class:O.tabsDropdownMenu},{default:()=>[e(p,{onClick:this.handleRefreshTab},{default:()=>[e(o,{name:"tabbar-refresh"},null),S("\u5237\u65B0\u9875\u9762")]}),e(N,null,null),e(p,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[e(o,{name:"tabbar-close-left"},null),S("\u5173\u95ED\u5DE6\u4FA7")]}),e(p,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[e(o,{name:"tabbar-close-right"},null),S("\u5173\u95ED\u53F3\u4FA7")]}),e(N,null,null),e(p,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[e(o,{name:"tabbar-close"},null),S("\u5173\u95ED\u5176\u5B83")]}),e(p,{onClick:this.handleCloseAllTabs},{default:()=>[e(o,{name:"tabbar-close-all"},null),S("\u5173\u95ED\u6240\u6709")]})]})})])}});const Ae="layout__USsbD",Fe="layoutSider__M0-OJ",Pe="layoutMain__lOiPe",Be="layoutHeader__9--p7",Ee="layoutContent__19vnr";var T={layout:Ae,layoutSider:Fe,layoutMain:Pe,layoutHeader:Be,layoutContent:Ee};function Ue(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$(t)}var Je=h({name:"DefaultLayout",setup(){const t=M(),a=i(()=>t.$state),n=i(()=>{const s={};return a.value.siderOpened?(s.marginLeft=a.value.siderOpenedWidth,s.width=`calc(100vw - ${a.value.siderOpenedWidth})`):(s.marginLeft=a.value.siderClosedWidth,s.width=`calc(100vw - ${a.value.siderClosedWidth})`),s}),l=i(()=>{const s={height:a.value.headerHeight};return a.value.fixedHeader&&(s.position="sticky",s.top="0px"),s}),u=i(()=>{const s={};return a.value.fixedHeader&&(s.position="sticky",s.top=a.value.headerHeight),s});return{setting:a,mainStyle:n,headerStyle:l,tabbarStyle:u}},render(){let t;const a=()=>e(de,{class:T.layoutHeader,style:this.headerStyle},{default:()=>[e(xe,null,null)]}),n=()=>e(je,{style:this.tabbarStyle},null),l=()=>e(he,{class:T.layoutContent},{default:()=>[e(be,null,null)]});return e(R,{class:T.layout},{default:()=>[e(ce,{class:T.layoutSider,collapsed:!this.setting.siderOpened,trigger:null,theme:this.setting.siderTheme,width:this.setting.siderOpenedWidth,collapsedWidth:this.setting.siderClosedWidth,collapsible:!0},{default:()=>[e(pe,null,null),e(w,null,{default:()=>[e(ye,null,null)]})]}),this.setting.fixedHeader?e(R,{class:T.layoutMain,style:this.mainStyle},{default:()=>[a(),n(),e(w,null,Ue(t=l())?t:{default:()=>[t]})]}):e(w,null,{default:()=>[e(R,{class:T.layoutMain,style:this.mainStyle},{default:()=>[a(),n(),l()]})]})]})}});export{Je as default};
