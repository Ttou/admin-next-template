import{a5 as z,g as e,I as o,f as c,a6 as P,p as r,a7 as G,a8 as X,a9 as Q,r as _,m as M,aa as R,ab as A,ac as g,ad as Y,ae as Z,u as F,af as ee,ag as te,i as I,ah as K,ai as ne,l as x,n as ae,k as S,aj as B,ak as le,al as se,am as ie,y as oe,A as re,o as ue,an as ce,ao as de,ap as he,aq as $,ar as j,as as fe,at as pe,au as w,av as D,aw as be,ax as me}from"./index.0694e3ae.js";function ge(){function t(n){z.confirm({title:"\u63D0\u793A",icon:e(o,{icon:"ant-design:exclamation-circle-outlined",class:"anticon"}),...n})}return{showConfirm:t}}const ye=c({name:"Content",setup(){const t=P();return{cachedTabs:r(()=>t.cachedTabs)}},render(){return e(Q,null,{default:({Component:t,route:n})=>e(G,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(X,{max:20,include:this.cachedTabs},[e(t,{key:n.fullPath},null)])]})})}}),ve="logo__0Fb31",Ce="logoIcon__OnHtK",W={logo:ve,logoIcon:Ce},Te=c({name:"Logo",setup(){const t=_({}),n=M(),a=r(()=>n.$state);return R(a,s=>{t.value.height=s.siderLogoHeight,t.value.borderRight=s.siderTheme==="light"?"1px solid #f0f0f0":"unset"},{deep:!0,immediate:!0}),{style:t}},render(){return e("div",{class:W.logo,style:this.style},[e(o,{class:W.logoIcon,icon:"logos:ant-design"},null)])}}),L=c({name:"MainMenu",props:{item:{type:Object,required:!0}},setup(t){return{show:r(()=>t.item.meta?!t.item.meta.hidden:!1)}},render(){return this.show?e(g,{icon:this.item.meta.icon?e(o,{icon:this.item.meta.icon},null):null,key:this.item.path},{default:()=>[e(A,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),N=c({name:"SubMenu",props:{item:{type:Object,required:!0}},setup(t){return{onlyOneChild:r(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e(L,{item:this.item.children[0]},null):e(Z,{key:this.item.path,icon:this.item.meta.icon?e(o,{icon:this.item.meta.icon},null):null,title:this.item.meta.title},{default:()=>{var t;return[(t=this.item.children)==null?void 0:t.map(n=>n.children?e(Y("sub-menu"),{item:n},null):e(L,{item:n},null))]}})}});function Se(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!I(t)}const _e=c({name:"Menu",components:{SubMenu:N},setup(){const t=_([]),n=_([]),a=_([]),s=F(),d=ee(),l=M(),y=r(()=>ne(d.routes)),u=r(()=>l.$state),v=r(()=>{const f={};return f.minHeight=`calc(100vh - ${u.value.siderLogoHeight})`,f});function b(f,O=""){for(const h of f)if(h.path=O+(h.path.startsWith("/")?h.path:`/${h.path}`),delete h.component,delete h.redirect,h.children){if(h.children.length===0)continue;b(h.children,h.path)}return f}function m(){const f=b(y.value);t.value=f}return R(()=>s.path,f=>{n.value=[...d.matched],a.value=[f]},{immediate:!0}),te(()=>{m()}),{list:t,openKeys:n,selectedKeys:a,setting:u,style:v}},render(){let t;const n=a=>a.children?e(N,{item:a},null):e(L,{item:a},null);return e(K,{mode:"inline",theme:this.setting.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":a=>this.openKeys=a,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":a=>this.selectedKeys=a,style:this.style},Se(t=this.list.map(n))?t:{default:()=>[t]})}}),Me="navbar__FTOIk",ke="left__VJQck",Oe="trigger__P08L-",we="breadcrumb__MUGy0",De="right__qfruu",Le="avatarWrapper__jqgTM",Re="avatar__-r1JW",Ie="avatarDropdownMenu__cXMSI",p={navbar:Me,left:ke,trigger:Oe,breadcrumb:we,right:De,avatarWrapper:Le,avatar:Re,avatarDropdownMenu:Ie},Ke=c({name:"Avatar",setup(){const t=x(),n=ae(),{showConfirm:a}=ge();function s(){a({content:"\u786E\u8BA4\u9000\u51FA\u767B\u5F55\uFF1F",async onOk(){await n.logout(),t.replace({path:"/login"})}})}return{handleLogout:s}},render(){return e(B,{placement:"bottom"},{default:()=>e("div",{class:p.avatarWrapper},[e(o,{class:p.avatar,icon:"custom:avatar",inline:!0},null)]),overlay:()=>e(K,{class:p.avatarDropdownMenu},{default:()=>[e(g,{onClick:this.handleLogout},{default:()=>[e(o,{icon:"ant-design:logout-outlined",inline:!0},null),e("span",null,[S("\u9000\u51FA\u767B\u5F55")])]})]})})}}),xe=c({name:"Breadcrumb",setup(){const t=_([]),n=x();function a(d){var l;return((l=d.meta)==null?void 0:l.title)||"undefined"}function s(d){var y;const l=[];for(const u of d){if(u.path==="/")continue;const v={path:u.path.startsWith("/")?u.path:`/${u.path}`,breadcrumbName:((y=u.meta)==null?void 0:y.title)||"undefined",children:[]};u.children&&(v.children=u.children.map(b=>{var m;return{path:u.path+`/${b.path}`,breadcrumbName:((m=b.meta)==null?void 0:m.title)||"undefined"}})),l.push(v)}return l}return le(()=>{const d=n.currentRoute.value;t.value=s(d.matched)}),{routes:t,getBreadcrumbName:a}},render(){return e(se,{class:p.breadcrumb,routes:this.routes,itemRender:({route:t,routes:n})=>n.indexOf(t)===n.length-1?e("span",null,[t.breadcrumbName]):e(A,{to:t.path},{default:()=>[t.breadcrumbName]})},null)}}),He=c({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:n,toggle:a}=ie();function s(){n?a():oe.warn("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5168\u5C4F")}return{isFullscreen:t,handleClick:s}},render(){return e("div",{title:"\u5168\u5C4F",onClick:this.handleClick},[this.isFullscreen?e(o,{icon:"ant-design:fullscreen-exit-outlined",inline:!0},null):e(o,{icon:"ant-design:fullscreen-outlined",inline:!0},null)])}}),$e=c({name:"SiderTheme",setup(){const t=M(),n=r(()=>t.siderTheme);function a(){t.change({key:"siderTheme",value:n.value==="dark"?"light":"dark"})}return{siderTheme:n,handleClick:a}},render(){return e("div",{title:"\u4E3B\u9898",onClick:this.handleClick},[this.siderTheme==="dark"?e(o,{icon:"ant-design:appstore-outlined",inline:!0},null):e(o,{icon:"ant-design:appstore-filled",inline:!0},null)])}}),je=c({name:"Trigger",setup(){const t=M(),n=r(()=>!t.siderOpened);function a(){t.change({key:"siderOpened",value:n.value})}return{collapsed:n,handleClick:a}},render(){return e(o,{class:p.trigger,icon:this.collapsed?"ant-design:menu-unfold-outlined":"ant-design:menu-fold-outlined",onClick:this.handleClick},null)}}),We=c({name:"Navbar",render(){return e("div",{class:p.navbar},[e("div",{class:p.left},[e(je,null,null),e(xe,null,null)]),e("div",{class:p.right},[e(re,null,{default:()=>[e(He,null,null),e($e,null,null),e(Ke,null,null)]})])])}}),Ne="tabbar__34JHT",Pe="tabContent__4OY2K",Ae="tabCloseIcon__jar4p",Fe="tabsMenu__RvJvM",Be="tabsDropdownMenu__N4HIk",k={tabbar:Ne,tabContent:Pe,tabCloseIcon:Ae,tabsMenu:Fe,tabsDropdownMenu:Be};function Ee(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!I(t)}const Ue=c({name:"Tabbar",setup(){const t=_(""),n=F(),a=x(),s=P(),d=M(),l=r(()=>s.visitedTabs),y=r(()=>l.value.findIndex(i=>i.fullPath===t.value)===0),u=r(()=>l.value.findIndex(i=>i.fullPath===t.value)===l.value.length-1),v=r(()=>l.value.length<=1);function b(i){return t.value===i.fullPath}function m(){const{name:i,path:C,fullPath:J}=n;return i&&[j.LOGIN,j.ERROR].indexOf(C)===-1&&(s.addTab(n),t.value=J),!1}function f(){s.delCachedTab(n).then(()=>{const{fullPath:i}=n;fe(()=>{a.replace({path:"/redirect"+i})})})}function O(i){s.delTab(i).then(({visitedTabs:C})=>{b(i)&&H(C)})}function h(){s.delLeftTabs(n)}function E(){s.delRightTabs(n)}function U(){s.delOthersTabs(n)}function V(){s.delAllTabs().then(({visitedTabs:i})=>{H(i)})}function q(i){a.push(i)}function H(i){const C=i.slice(-1)[0];C?a.push(C.fullPath):n.name===d.homeRoute.name?a.replace({path:"/redirect"+n.fullPath}):a.replace("/")}return R(()=>n.path,()=>{m()}),ue(()=>{m()}),{activeKey:t,visitedTabs:l,closeLeftDisabled:y,closeRightDisabled:u,closeOtherDisabled:v,handleCloseTab:O,handleCloseLeftTabs:h,handleCloseRightTabs:E,handleCloseOtherTabs:U,handleCloseAllTabs:V,handleSelectTab:q,handleRefreshTab:f}},render(){let t;return e("div",{class:k.tabbar},[e(ce,{activeKey:this.activeKey,"onUpdate:activeKey":n=>this.activeKey=n,onChange:this.handleSelectTab},Ee(t=this.visitedTabs.map(n=>e(de,{tab:()=>e("div",{class:k.tabContent},[e("input",{"data-key":n.fullPath,hidden:!0},null),e("span",null,[n.meta.title]),e(o,{icon:"ant-design:close-outlined",class:k.tabCloseIcon,inline:!0,onClick:he(()=>this.handleCloseTab(n),["stop"])},null)]),key:n.fullPath},null)))?t:{default:()=>[t]}),e(B,{placement:"bottomRight",overlayStyle:{zIndex:100002}},{default:()=>e("div",{class:k.tabsMenu},[e(o,{icon:"ant-design:down-outlined",inline:!0},null)]),overlay:()=>e(K,{class:k.tabsDropdownMenu},{default:()=>[e(g,{onClick:this.handleRefreshTab},{default:()=>[e(o,{icon:"ant-design:reload-outlined",inline:!0},null),S("\u5237\u65B0\u9875\u9762")]}),e($,null,null),e(g,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[e(o,{icon:"ant-design:vertical-right-outlined",inline:!0},null),S("\u5173\u95ED\u5DE6\u4FA7")]}),e(g,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[e(o,{icon:"ant-design:vertical-left-outlined",inline:!0},null),S("\u5173\u95ED\u53F3\u4FA7")]}),e($,null,null),e(g,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[e(o,{icon:"ant-design:close-outlined",inline:!0},null),S("\u5173\u95ED\u5176\u5B83")]}),e(g,{onClick:this.handleCloseAllTabs},{default:()=>[e(o,{icon:"ant-design:close-circle-outlined",inline:!0},null),S("\u5173\u95ED\u6240\u6709")]})]})})])}}),Ve="layout__Ja1DU",qe="layoutSider__Ch3a-",Je="layoutMain__Mz8tS",ze="layoutHeader__6vOlv",Ge="layoutContent__6MXuy",T={layout:Ve,layoutSider:qe,layoutMain:Je,layoutHeader:ze,layoutContent:Ge};function Xe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!I(t)}const Ye=c({name:"DefaultLayout",setup(){const t=M(),n=r(()=>t.$state),a=r(()=>{const l={};return n.value.siderOpened?(l.marginLeft=n.value.siderOpenedWidth,l.width=`calc(100vw - ${n.value.siderOpenedWidth})`):(l.marginLeft=n.value.siderClosedWidth,l.width=`calc(100vw - ${n.value.siderClosedWidth})`),l}),s=r(()=>{const l={height:n.value.headerHeight};return n.value.fixedHeader&&(l.position="sticky",l.top="0px"),l}),d=r(()=>{const l={};return n.value.fixedHeader&&(l.position="sticky",l.top=n.value.headerHeight),l});return{setting:n,mainStyle:a,headerStyle:s,tabbarStyle:d}},render(){let t;const n=()=>e(be,{class:T.layoutHeader,style:this.headerStyle},{default:()=>[e(We,null,null)]}),a=()=>e(Ue,{style:this.tabbarStyle},null),s=()=>e(me,{class:T.layoutContent},{default:()=>[e(ye,null,null)]});return e(D,{class:T.layout},{default:()=>[e(pe,{class:T.layoutSider,collapsed:!this.setting.siderOpened,trigger:null,theme:this.setting.siderTheme,width:this.setting.siderOpenedWidth,collapsedWidth:this.setting.siderClosedWidth,collapsible:!0},{default:()=>[e(Te,null,null),e(w,null,{default:()=>[e(_e,null,null)]})]}),this.setting.fixedHeader?e(D,{class:T.layoutMain,style:this.mainStyle},{default:()=>[n(),a(),e(w,null,Xe(t=s())?t:{default:()=>[t]})]}):e(w,null,{default:()=>[e(D,{class:T.layoutMain,style:this.mainStyle},{default:()=>[n(),a(),s()]})]})]})}});export{Ye as default};
