import{d as F,a9 as y,aa as S,r as s,c as k,o as C,ab as M,b as e,h as m,ac as p,ad as u,m as g,ae as E,af as R,C as q}from"./vendor.0612fea0.js";import{u as x,S as t}from"./index.15e1682a.js";import{u as P}from"./useSettingStore.d6157e56.js";const B="view__uyu0o",V="top__w2bkm",z="header__nY81t",A="logoIcon__43qgn",D="title__6yEth",U="desc__ggigV",N="loginForm__PMp5G",Q="backgroundIcon__DZTQP";var o={view:B,top:V,header:z,logoIcon:A,title:D,desc:U,loginForm:N,backgroundIcon:Q},Y=F({name:"LoginView",setup(){const a=y(),f=S(),v=P(),h=x(),r=s(!1),i=s(null),d=s({}),n=s({username:"",password:""}),w=s({username:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]}),{useForm:_}=p,c=_(n.value,w.value),I=k(()=>v.title);function b(){c.validate().then(()=>{r.value=!0,h.login(n.value).then(()=>{f.replace({path:i.value||"/",query:d.value})}).finally(()=>{r.value=!1})}).catch(()=>{})}return C(()=>{const{query:l}=a;l&&(i.value=l.redirect,d.value=M(l,["redirect"]))}),{title:I,loading:r,formRef:c,formModel:n,handleSubmit:b}},render(){return e("div",{class:o.view},[e("div",{class:o.top},[e("div",{class:o.header},[e(t,{class:o.logoIcon,name:"logo"},null),e("span",{class:o.title},[this.title])]),e("div",{class:o.desc},[m("\u57FA\u4E8E Ant Design \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF")])]),e(p,{class:o.loginForm},{default:()=>[e(u,g({name:"username",wrapperCol:{span:24}},this.formRef.validateInfos.username),{default:()=>[e(E,{value:this.formModel.username,"onUpdate:value":a=>this.formModel.username=a,placeholder:"\u8D26\u53F7\uFF1Aadmin",size:"large",prefix:e(t,{name:"view-user"},null)},null)]}),e(u,g({name:"password",wrapperCol:{span:24}},this.formRef.validateInfos.password),{default:()=>[e(R,{value:this.formModel.password,"onUpdate:value":a=>this.formModel.password=a,placeholder:"\u5BC6\u7801\uFF1A\u4EFB\u610F",size:"large",prefix:e(t,{name:"view-lock"},null),onPressEnter:this.handleSubmit},null)]}),e(u,{wrapperCol:{span:24}},{default:()=>[e(q,{size:"large",type:"primary",loading:this.loading,onClick:this.handleSubmit,style:{width:"100%"}},{default:()=>[m("\u767B\u5F55")]})]})]}),e(t,{class:o.backgroundIcon,name:"background"},null)])}});export{Y as default};
