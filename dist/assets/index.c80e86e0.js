import{d as h,v as r,c as e,a2 as q,af as J,ag as Q,u as p,r as T,e as R,W as f,ah as F,ai as X,aj as j,i as A,ak as Y,al as I,Q as H,am as Z,J as S,an as ee,ao as te,ap as ne,aq as ae,ar as d,as as le,at as se,au as ie,av as re,aw as oe,ax as ue,ay as de,az as ce,G as he,o as pe,aA as E,aB as W,aC as fe,K as me,O as be,aD as ge,aE as ve,aF as ye,aG as xe,aH as O}from"./vendor.2ced17f5.js";import{u as N,a as $,S as B,p as U,b as Ce,c as Te,R as V}from"./index.bf4d11a9.js";/* empty css              */var Se=h({name:"Content",setup(){const t=N();return{cachedTabs:r(()=>t.cachedTabs)}},render(){return e(q,null,{default:({Component:t,route:n})=>e(J,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(Q,{max:20,include:this.cachedTabs},[e(t,{key:n.fullPath},null)])]})})}});const ke=p({display:"flex",justifyContent:"center",alignItems:"center"}),Oe=p({transform:"scale(2)"});var $e=h({name:"Logo",setup(){const t=T({}),n=$(),a=r(()=>n.$state);return R(a,s=>{t.value.height=s.siderLogoHeight,t.value.borderRight=s.siderTheme==="light"?"1px solid #f0f0f0":"unset"},{deep:!0,immediate:!0}),{style:t}},render(){return e("div",{class:ke,style:this.style},[e(B,{class:Oe,name:"ant-design"},null)])}}),L=h({name:"MainMenu",props:{item:U.object().isRequired},setup(t){return{show:r(()=>t.item.meta?!t.item.meta.hidden:!1)}},render(){return this.show?e(f.Item,{icon:this.item.meta.icon,key:this.item.path},{default:()=>[e(F,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),z=h({name:"SubMenu",props:{item:U.object().isRequired},setup(t){return{onlyOneChild:r(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e(L,{item:this.item.children[0]},null):e(f.SubMenu,{key:this.item.path,icon:this.item.meta.icon,title:this.item.meta.title},{default:()=>{var t;return[(t=this.item.children)==null?void 0:t.map(n=>n.children?e(X("sub-menu"),{item:n},null):e(L,{item:n},null))]}})}});function we(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!A(t)}var Re=h({name:"Menu",components:{SubMenu:z},setup(){const t=T([]),n=T([]),a=T([]),s=j(),o=Ce(),l=$(),y=r(()=>Y(o.routes)),c=r(()=>l.$state),x=r(()=>{const m={};return m.minHeight=`calc(100vh - ${c.value.siderLogoHeight})`,m});function b(m,k=""){for(const u of m)if(u.name!=="Dashboard"?u.path=k+(u.path.startsWith("/")?u.path:`/${u.path}`):u.path=`/${u.path}`,delete u.component,delete u.redirect,u.children){if(u.children.length===0)continue;b(u.children,u.path)}return m}function C(){const m=b(y.value);t.value=m}return R(()=>s.path,m=>{C(),n.value=[...s.matched.map(k=>k.path)],a.value=[m]},{immediate:!0}),{list:t,openKeys:n,selectedKeys:a,settings:c,style:x}},render(){let t;const n=a=>a.children?e(z,{item:a},null):e(L,{item:a},null);return e(f,{mode:"inline",theme:this.settings.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":a=>this.openKeys=a,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":a=>this.selectedKeys=a,style:this.style},we(t=this.list.map(n))?t:{default:()=>[t]})}});var Ie=h({name:"Avatar",setup(){const t=I(),n=Te();function a(){ee.confirm({title:"\u63D0\u793A",icon:e(te,null,null),content:"\u786E\u8BA4\u9000\u51FA\u767B\u5F55\uFF1F",async onOk(){await n.logout(),t.replace({path:"/login"})}})}return{handleLogout:a}},render(){return e(H,null,{default:()=>e("div",{class:"avatar-wrapper"},[e(B,{name:"avatar",class:"avatar"},null)]),overlay:()=>e(f,null,{default:()=>[e(f.Item,{onClick:this.handleLogout},{default:()=>[e(Z,null,null),e("span",null,[S("\u9000\u51FA\u767B\u5F55")])]})]})})}});var Le=h({name:"Breadcrumb",setup(){const t=T([]),n=I();function a(o){var l;return((l=o.meta)==null?void 0:l.title)||"undefined"}function s(o){var y;const l=[];for(const c of o){if(c.path==="/")continue;const x={path:c.path.startsWith("/")?c.path:`/${c.path}`,breadcrumbName:((y=c.meta)==null?void 0:y.title)||"undefined",children:[]};c.children&&(x.children=c.children.map(b=>{var C;return{path:c.path+`/${b.path}`,breadcrumbName:((C=b.meta)==null?void 0:C.title)||"undefined"}})),l.push(x)}return l}return ne(()=>{const o=n.currentRoute.value;t.value=s(o.matched)}),{routes:t,getBreadcrumbName:a}},render(){return e(ae,{class:"breadcrumb",routes:this.routes,itemRender:({route:t,routes:n})=>n.indexOf(t)===n.length-1?e("span",null,[t.breadcrumbName]):e(F,{to:t.path},{default:()=>[t.breadcrumbName]})},null)}});const De=p({display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%"}),D=p({display:"flex",alignItems:"center",height:"100%"});d(`${D} .trigger`,{fontSize:"18px",cursor:"pointer",transition:"color 0.3s"});d(`${D} .breadcrumb`,{marginLeft:"20px"});const w=p({display:"flex",alignItems:"center",height:"100%"});d(`${w} .ant-space-item`,{minWidth:"24px",cursor:"pointer",textAlign:"center",lineHeight:"48px"});d(`${w} .ant-space-item:hover`,{backgroundColor:"rgba(0, 0, 0, 0.025)"});d(`${w} .avatar-wrapper`,{display:"flex",alignItems:"center"});d(`${w} .avatar`,{width:"24px",height:"24px"});var Me=h({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:n,toggle:a}=le();function s(){n?a():re.warn("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5168\u5C4F")}return{isFullscreen:t,handleClick:s}},render(){return e("div",{title:"\u5168\u5C4F",style:{cursor:"pointer"},onClick:this.handleClick},[this.isFullscreen?e(se,null,null):e(ie,null,null)])}}),Ke=h({name:"SiderTheme",setup(){const t=$(),n=r(()=>t.siderTheme);function a(){t.change({key:"siderTheme",value:n.value==="dark"?"light":"dark"})}return{siderTheme:n,handleClick:a}},render(){return e("div",{title:"\u4E3B\u9898",style:{cursor:"pointer"},onClick:this.handleClick},[this.siderTheme==="dark"?e(oe,null,null):e(ue,null,null)])}}),Fe=h({name:"Trigger",setup(){const t=$(),n=r(()=>!t.siderOpened);function a(){t.change({key:"siderOpened",value:n.value})}return{collapsed:n,handleClick:a}},render(){return this.collapsed?e(de,{class:"trigger",onClick:this.handleClick},null):e(ce,{class:"trigger",onClick:this.handleClick},null)}}),je=h({name:"Header",render(){return e("div",{class:De},[e("div",{class:D},[e(Fe,null,null),e(Le,null,null)]),e("div",{class:w},[e(he,null,{default:()=>[e(Me,null,null),e(Ke,null,null),e(Ie,null,null)]})])])}});const v=p({display:"flex",justifyContent:"space-between",height:"42px",padding:"6px 12px",backgroundColor:"#f5f7f9",transition:"all 0.2s ease",zIndex:50});d(`${v} .ant-tab`,{flexGrow:1,flexShrink:1});d(`${v} .ant-tabs-bar`,{margin:0,border:"none"});d(`${v} .ant-tabs-tab`,{height:"32px",margin:"0 6px 0 0",padding:"5px 16px 4px",backgroundColor:"#fff",borderRadius:"3px",border:"none",color:"#808695",cursor:"default",userSelect:"none"});d(`${v} .ant-tabs-tab::before`,{top:0,borderTopColor:"inherit"});d(`${v} .ant-tabs-tab-active`,{color:"#2d8cf0",fontWeight:"unset"});d(`${v} .ant-tabs-ink-bar`,{display:"none !important"});const M=p({});d(`${M} .anticon`,{margin:"0 0 0 6px",color:"#999"});d(`${M} .anticon:hover`,{color:"#444"});const Ae=p({flexGrow:0,flexShrink:0,width:"30px",height:"30px",lineHeight:"30px",textAlign:"center",backgroundColor:"#fff",borderRadius:"2px",cursor:"pointer"});function He(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!A(t)}var Ee=h({name:"Tabs",setup(){const t=T(""),n=j(),a=I(),s=N(),o=r(()=>s.visitedTabs),l=r(()=>o.value.findIndex(i=>i.path===t.value)===0),y=r(()=>o.value.findIndex(i=>i.path===t.value)===o.value.length-1),c=r(()=>o.value.length<=1);function x(i){return t.value===i.path}function b(){const{name:i,path:g}=n;return i&&[V.LOGIN,V.ERROR].indexOf(g)===-1&&(s.addTab(n),t.value=g),!1}function C(){s.delCachedTab(n).then(()=>{const{fullPath:i}=n;xe(()=>{a.replace({path:"/redirect"+i})})})}function m(i){s.delTab(i).then(({visitedTabs:g})=>{x(i)&&K(g)})}function k(){s.delLeftTabs(n)}function u(){s.delRightTabs(n)}function P(){s.delOthersTabs(n)}function _(){s.delAllTabs().then(({visitedTabs:i})=>{K(i)})}function G(i){a.push(i)}function K(i){const g=i.slice(-1)[0];g?a.push(g.fullPath):n.name==="Dashboard"?a.replace({path:"/redirect"+n.fullPath}):a.push("/")}return R(()=>n.path,()=>{b()}),pe(()=>{b()}),{activeKey:t,visitedTabs:o,closeLeftDisabled:l,closeRightDisabled:y,closeOtherDisabled:c,handleCloseTab:m,handleCloseLeftTabs:k,handleCloseRightTabs:u,handleCloseOtherTabs:P,handleCloseAllTabs:_,handleSelectTab:G,handleRefreshTab:C}},render(){let t;return e("div",{class:v},[e(E,{activeKey:this.activeKey,"onUpdate:activeKey":n=>this.activeKey=n,onChange:this.handleSelectTab},He(t=this.visitedTabs.map(n=>e(E.TabPane,{tab:()=>e("div",{class:M},[e("span",null,[n.meta.title]),e(W,{onClick:fe(()=>this.handleCloseTab(n),["stop"])},null)]),key:n.path},null)))?t:{default:()=>[t]}),e(H,{overlayStyle:{zIndex:100002}},{default:()=>e("div",{class:Ae},[e(me,null,null)]),overlay:()=>e(f,null,{default:()=>[e(f.Item,{onClick:this.handleRefreshTab},{default:()=>[e(be,null,null),S("\u5237\u65B0\u9875\u9762")]}),e(f.Divider,null,null),e(f.Item,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[e(ge,null,null),S("\u5173\u95ED\u5DE6\u4FA7")]}),e(f.Item,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[e(ve,null,null),S("\u5173\u95ED\u53F3\u4FA7")]}),e(f.Divider,null,null),e(f.Item,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[e(W,null,null),S("\u5173\u95ED\u5176\u5B83")]}),e(f.Item,{onClick:this.handleCloseAllTabs},{default:()=>[e(ye,null,null),S("\u5173\u95ED\u6240\u6709")]})]})})])}});const We=p({width:"100%",height:"100%"}),Ne=p({position:"fixed",overflow:"auto",height:"100vh",left:0,zIndex:100}),Be=p({backgroundColor:"#fff",transition:"all 0.2s"}),Ue=p({padding:"0 12px",backgroundColor:"#fff",zIndex:100}),Ve=p({padding:"12px 12px 0"});var Ge=h({name:"Layout",setup(){const t=$(),n=r(()=>t.$state),a=r(()=>{const l={};return n.value.siderOpened?(l.marginLeft=n.value.siderOpenedWidth,l.width=`calc(100vw - ${n.value.siderOpenedWidth})`):(l.marginLeft=n.value.siderClosedWidth,l.width=`calc(100vw - ${n.value.siderClosedWidth})`),l}),s=r(()=>{const l={height:n.value.headerHeight};return n.value.fixedHeader&&(l.position="sticky",l.top="0px"),l}),o=r(()=>{const l={};return n.value.fixedHeader&&(l.position="sticky",l.top=n.value.headerHeight),l});return{settings:n,mainStyle:a,headerStyle:s,tabbarStyle:o}},render(){return e(O,{class:We},{default:()=>[e(O.Sider,{class:Ne,collapsed:!this.settings.siderOpened,trigger:null,theme:this.settings.siderTheme,width:this.settings.siderOpenedWidth,collapsedWidth:this.settings.siderClosedWidth,collapsible:!0},{default:()=>[e($e,null,null),e(Re,null,null)]}),e(O,{class:Be,style:this.mainStyle},{default:()=>[e(O.Header,{class:Ue,style:this.headerStyle},{default:()=>[e(je,null,null)]}),e(Ee,{style:this.tabbarStyle},null),e(O.Content,{class:Ve},{default:()=>[e(Se,null,null)]})]})]})}});export{Ge as default};
