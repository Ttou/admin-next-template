import{H as R,J as _,K as C,L as b,M as m,N as y,O as E,Q as P,R as S,S as L,T as H,U as p,V as T,W as A,m as w,X as G,o as O,r as k,Y as l,Z as c,$ as u,a0 as x,a1 as D,t as I,d as B,a2 as F,_ as N,a as d,b as M,c as Y,e as f,w as g,j as $,A as j}from"./index-d2a92494.js";import{g as q}from"./util-e00ff914.js";var z="[object Object]",K=Function.prototype,V=Object.prototype,h=K.toString,U=V.hasOwnProperty,J=h.call(Object);function Q(e){if(!R(e)||_(e)!=z)return!1;var t=C(e);if(t===null)return!0;var n=U.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&h.call(n)==J}function W(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++o<r;)i[o]=e[o+t];return i}function X(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function Z(e,t){return t.length<2?e:b(e,W(t,0,-1))}function ee(e,t){return t=m(t,e),e=Z(e,t),e==null||delete e[y(X(t))]}function te(e){return Q(e)?void 0:e}var ne=1,oe=2,re=4,ie=E(function(e,t){var n={};if(e==null)return n;var o=!1;t=P(t,function(i){return i=m(i,e),o||(o=i.length>1),i}),S(e,L(e),n),o&&(n=H(n,ne|oe|re,te));for(var r=t.length;r--;)ee(n,t[r]);return n});const ae=ie;function le(e){const t=p({});function n(a){const s=e.value.formConfig.items.find(v=>v.field===a.field);T(s,a.key,a.value)}function o(){e.value.loading=!0}function r(){e.value.loading=!1}async function i(a){try{o(),await(a==null?void 0:a()),await t.value.commitProxy("query")}finally{r()}}return{gridRef:t,updateFormItem:n,showLoading:o,hideLoading:r,refresh:i}}const se={getList(e){return A.get("/demo/list",{params:e})}};function ue(e){const t=p(0),n=w(()=>t.value+"px"),o=G();function r(){const i=document.querySelector("#page");t.value=i.scrollHeight-(o.fixedHeader?20:110)-((e==null?void 0:e.extraHeight)||0)}return O(()=>{r()}),{pageHeight:t,pageHeightPx:n}}function ce(){const e=k({gridConfig:{id:q(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"admin",value:"admin"},{label:"normal",value:"normal"}]}},{title:"状态",field:"status",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"时间",field:"date",itemRender:{name:c.FormItemDate,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"}}},{itemRender:{name:c.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:u.Input}},{title:"角色",field:"role"},{title:"状态",field:"status",editRender:{name:u.Select,options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"备注",field:"remark",editRender:{name:u.Input}},{title:"创建时间",field:"createTs",formatter:x.Date}],pagerConfig:{pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:n,form:o})=>(o.date&&(o.start=o.date[0],o.end=o.date[1],o=ae(o,["date"])),await se.getList({pageSize:n.pageSize,current:n.currentPage,...o}))}}}}),t=le(D(e,"gridConfig"));return{...I(e),proGridHook:t}}function de({proGridHook:e}){function t(){e.refresh()}return{handleCustomRefresh:t}}const fe=B({components:{ProGrid:F},setup(){const{proGridHook:e,...t}=ce(),n=de({proGridHook:e}),{pageHeight:o}=ue();return{...t,...n,gridRef:e.gridRef,pageHeight:o}}});function ge(e,t,n,o,r,i){const a=d("el-button"),s=d("ProGrid");return M(),Y("div",null,[f(s,j({ref:"gridRef"},e.gridConfig,{height:e.pageHeight}),{toolbar_buttons:g(()=>[f(a,{type:"primary",link:"",onClick:e.handleCustomRefresh},{default:g(()=>[$(" 自定义刷新 ")]),_:1},8,["onClick"])]),_:1},16,["height"])])}const he=N(fe,[["render",ge]]);export{he as default};
