import{u as R,a as S,S as i,b as F,c as H,R as L}from"./index.d85de917.js";import{d as h,c as u,b as e,n as B,O as E,P,r as T,a as x,Q as m,U as j,W as U,X as D,e as M,Y as V,Z as O,_ as K,z as k,$ as q,w as G,a0 as Q,a1 as X,a2 as Y,A as Z,o as J,a3 as I,a4 as ee,a5 as te,a6 as $}from"./vendor.2d9b4bb9.js";var ae=h({name:"Content",setup(){const t=R();return{cachedTabs:u(()=>t.cachedTabs)}},render(){return e(B,null,{default:({Component:t,route:a})=>e(E,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(P,{max:20,include:this.cachedTabs},[e(t,{key:a.fullPath},null)])]})})}});var ne="xo7tdh0",le="xo7tdh1",se=h({name:"Logo",setup(){const t=T({}),a=S(),n=u(()=>a.$state);return x(n,s=>{t.value.height=s.siderLogoHeight,t.value.borderRight=s.siderTheme==="light"?"1px solid #f0f0f0":"unset"},{deep:!0,immediate:!0}),{style:t}},render(){return e("div",{class:ne,style:this.style},[e(i,{class:le,name:"logo"},null)])}}),w=h({name:"MainMenu",props:{item:{type:Object,required:!0}},setup(t){return{show:u(()=>t.item.meta?!t.item.meta.hidden:!1)}},render(){return this.show?e(m.Item,{icon:this.item.meta.icon?e(i,{name:this.item.meta.icon},null):null,key:this.item.path},{default:()=>[e(j,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),N=h({name:"SubMenu",props:{item:{type:Object,required:!0}},setup(t){return{onlyOneChild:u(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e(w,{item:this.item.children[0]},null):e(m.SubMenu,{key:this.item.path,icon:this.item.meta.icon?e(i,{name:this.item.meta.icon},null):null,title:this.item.meta.title},{default:()=>{var t;return[(t=this.item.children)==null?void 0:t.map(a=>a.children?e(U("sub-menu"),{item:a},null):e(w,{item:a},null))]}})}});function re(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!M(t)}var ie=h({name:"Menu",components:{SubMenu:N},setup(){const t=T([]),a=T([]),n=T([]),s=D(),o=F(),l=S(),v=u(()=>V(o.routes)),c=u(()=>l.$state),g=u(()=>{const p={};return p.minHeight=`calc(100vh - ${c.value.siderLogoHeight})`,p});function f(p,C=""){for(const d of p)if(d.name!=="Dashboard"?d.path=C+(d.path.startsWith("/")?d.path:`/${d.path}`):d.path=`/${d.path}`,delete d.component,delete d.redirect,d.children){if(d.children.length===0)continue;f(d.children,d.path)}return p}function y(){const p=f(v.value);t.value=p}return x(()=>s.path,p=>{y(),a.value=[...s.matched.map(C=>C.path)],n.value=[p]},{immediate:!0}),{list:t,openKeys:a,selectedKeys:n,setting:c,style:g}},render(){let t;const a=n=>n.children?e(N,{item:n},null):e(w,{item:n},null);return e(m,{mode:"inline",theme:this.setting.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":n=>this.openKeys=n,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":n=>this.selectedKeys=n,style:this.style},re(t=this.list.map(a))?t:{default:()=>[t]})}});var ue="pkjctc6",oe="pkjctc5",de="pkjctc3",ce="pkjctc1",he="pkjctc0",me="pkjctc4",pe="pkjctc2",fe=h({name:"Avatar",setup(){const t=O(),a=H();function n(){q.confirm({title:"\u63D0\u793A",icon:e(i,{class:"anticon",name:"navbar-exclamation"},null),content:"\u786E\u8BA4\u9000\u51FA\u767B\u5F55\uFF1F",async onOk(){await a.logout(),t.replace({path:"/login"})}})}return{handleLogout:n}},render(){return e(K,null,{default:()=>e("div",{class:oe},[e(i,{class:ue,name:"avatar"},null)]),overlay:()=>e(m,null,{default:()=>[e(m.Item,{onClick:this.handleLogout},{default:()=>[e(i,{name:"navbar-logout",style:{marginRight:"5px"}},null),e("span",null,[k("\u9000\u51FA\u767B\u5F55")])]})]})})}}),be=h({name:"Breadcrumb",setup(){const t=T([]),a=O();function n(o){var l;return((l=o.meta)==null?void 0:l.title)||"undefined"}function s(o){var v;const l=[];for(const c of o){if(c.path==="/")continue;const g={path:c.path.startsWith("/")?c.path:`/${c.path}`,breadcrumbName:((v=c.meta)==null?void 0:v.title)||"undefined",children:[]};c.children&&(g.children=c.children.map(f=>{var y;return{path:c.path+`/${f.path}`,breadcrumbName:((y=f.meta)==null?void 0:y.title)||"undefined"}})),l.push(g)}return l}return G(()=>{const o=a.currentRoute.value;t.value=s(o.matched)}),{routes:t,getBreadcrumbName:n}},render(){return e(Q,{class:de,routes:this.routes,itemRender:({route:t,routes:a})=>a.indexOf(t)===a.length-1?e("span",null,[t.breadcrumbName]):e(j,{to:t.path},{default:()=>[t.breadcrumbName]})},null)}}),ve=h({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:a,toggle:n}=X();function s(){a?n():Y.warn("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5168\u5C4F")}return{isFullscreen:t,handleClick:s}},render(){return e("div",{title:"\u5168\u5C4F",style:{cursor:"pointer"},onClick:this.handleClick},[this.isFullscreen?e(i,{name:"navbar-fullscreen-exit"},null):e(i,{name:"navbar-fullscreen"},null)])}}),ge=h({name:"SiderTheme",setup(){const t=S(),a=u(()=>t.siderTheme);function n(){t.change({key:"siderTheme",value:a.value==="dark"?"light":"dark"})}return{siderTheme:a,handleClick:n}},render(){return e("div",{title:"\u4E3B\u9898",style:{cursor:"pointer"},onClick:this.handleClick},[this.siderTheme==="dark"?e(i,{name:"navbar-theme-dark"},null):e(i,{name:"navbar-theme-light"},null)])}}),ye=h({name:"Trigger",setup(){const t=S(),a=u(()=>!t.siderOpened);function n(){t.change({key:"siderOpened",value:a.value})}return{collapsed:a,handleClick:n}},render(){return e(i,{class:pe,name:this.collapsed?"navbar-menu-unfold":"navbar-menu-fold",onClick:this.handleClick},null)}}),Te=h({name:"Header",render(){return e("div",{class:he},[e("div",{class:ce},[e(ye,null,null),e(be,null,null)]),e("div",{class:me},[e(Z,null,{default:()=>[e(ve,null,null),e(ge,null,null),e(fe,null,null)]})])])}});var ke="zwrgka2",Ce="zwrgka1",Se="zwrgka0",$e="zwrgka4",xe="zwrgka3";function Oe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!M(t)}var we=h({name:"Tabs",setup(){const t=T(""),a=D(),n=O(),s=R(),o=u(()=>s.visitedTabs),l=u(()=>o.value.findIndex(r=>r.path===t.value)===0),v=u(()=>o.value.findIndex(r=>r.path===t.value)===o.value.length-1),c=u(()=>o.value.length<=1);function g(r){return t.value===r.path}function f(){const{name:r,path:b}=a;return r&&[L.LOGIN,L.ERROR].indexOf(b)===-1&&(s.addTab(a),t.value=b),!1}function y(){s.delCachedTab(a).then(()=>{const{fullPath:r}=a;te(()=>{n.replace({path:"/redirect"+r})})})}function p(r){s.delTab(r).then(({visitedTabs:b})=>{g(r)&&_(b)})}function C(){s.delLeftTabs(a)}function d(){s.delRightTabs(a)}function z(){s.delOthersTabs(a)}function A(){s.delAllTabs().then(({visitedTabs:r})=>{_(r)})}function W(r){n.push(r)}function _(r){const b=r.slice(-1)[0];b?n.push(b.fullPath):a.name==="Analysis"?n.replace({path:"/redirect"+a.fullPath}):n.replace("/")}return x(()=>a.path,()=>{f()}),J(()=>{f()}),{activeKey:t,visitedTabs:o,closeLeftDisabled:l,closeRightDisabled:v,closeOtherDisabled:c,handleCloseTab:p,handleCloseLeftTabs:C,handleCloseRightTabs:d,handleCloseOtherTabs:z,handleCloseAllTabs:A,handleSelectTab:W,handleRefreshTab:y}},render(){let t;return e("div",{class:Se},[e(I,{activeKey:this.activeKey,"onUpdate:activeKey":a=>this.activeKey=a,onChange:this.handleSelectTab},Oe(t=this.visitedTabs.map(a=>e(I.TabPane,{tab:()=>e("div",{class:Ce},[e("span",null,[a.meta.title]),e(i,{name:"tabbar-close",class:ke,onClick:ee(()=>this.handleCloseTab(a),["stop"])},null)]),key:a.path},null)))?t:{default:()=>[t]}),e(K,{overlayStyle:{zIndex:100002}},{default:()=>e("div",{class:xe},[e(i,{name:"tabbar-down"},null)]),overlay:()=>e(m,{class:$e},{default:()=>[e(m.Item,{onClick:this.handleRefreshTab},{default:()=>[e(i,{name:"tabbar-refresh"},null),k("\u5237\u65B0\u9875\u9762")]}),e(m.Divider,null,null),e(m.Item,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[e(i,{name:"tabbar-close-left"},null),k("\u5173\u95ED\u5DE6\u4FA7")]}),e(m.Item,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[e(i,{name:"tabbar-close-right"},null),k("\u5173\u95ED\u53F3\u4FA7")]}),e(m.Divider,null,null),e(m.Item,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[e(i,{name:"tabbar-close"},null),k("\u5173\u95ED\u5176\u5B83")]}),e(m.Item,{onClick:this.handleCloseAllTabs},{default:()=>[e(i,{name:"tabbar-close-all"},null),k("\u5173\u95ED\u6240\u6709")]})]})})])}});var _e="_63mzhe0",Re="_63mzhe4",Le="_63mzhe3",je="_63mzhe2",De="_63mzhe1",Ie=h({name:"Layout",setup(){const t=S(),a=u(()=>t.$state),n=u(()=>{const l={};return a.value.siderOpened?(l.marginLeft=a.value.siderOpenedWidth,l.width=`calc(100vw - ${a.value.siderOpenedWidth})`):(l.marginLeft=a.value.siderClosedWidth,l.width=`calc(100vw - ${a.value.siderClosedWidth})`),l}),s=u(()=>{const l={height:a.value.headerHeight};return a.value.fixedHeader&&(l.position="sticky",l.top="0px"),l}),o=u(()=>{const l={};return a.value.fixedHeader&&(l.position="sticky",l.top=a.value.headerHeight),l});return{settings:a,mainStyle:n,headerStyle:s,tabbarStyle:o}},render(){return e($,{class:_e},{default:()=>[e($.Sider,{class:De,collapsed:!this.settings.siderOpened,trigger:null,theme:this.settings.siderTheme,width:this.settings.siderOpenedWidth,collapsedWidth:this.settings.siderClosedWidth,collapsible:!0},{default:()=>[e(se,null,null),e(ie,null,null)]}),e($,{class:je,style:this.mainStyle},{default:()=>[e($.Header,{class:Le,style:this.headerStyle},{default:()=>[e(Te,null,null)]}),e(we,{style:this.tabbarStyle},null),e($.Content,{class:Re},{default:()=>[e(ae,null,null)]})]})]})}});export{Ie as default};
