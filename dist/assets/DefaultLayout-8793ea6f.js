import{d as v,aa as U,m as b,_ as C,a as s,b as c,g as _,w as l,e as o,ab as ee,ac as ne,ad as te,I as D,c as g,ae as f,a6 as H,a7 as q,af as z,h as k,i as B,f as P,F as T,r as N,ag as oe,X as E,ah as se,ai as Y,t as J,aj as j,a8 as ae,B as G,q as X,j as S,ak as le,z as ce,o as re,al as Q,am as Z,a3 as A}from"./index-e2504ed3.js";const ie=v({name:"Content",setup(){const e=U();return{cachedTabs:b(()=>e.cachedTabs)}}});function ue(e,n,r,a,m,i){const t=s("router-view");return c(),_(t,null,{default:l(({Component:p,route:u})=>[o(te,{name:"fade-slide",mode:"out-in",appear:""},{default:l(()=>[(c(),_(ee,{max:20,include:e.cachedTabs},[(c(),_(ne(p),{key:u.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}const de=C(ie,[["render",ue]]),me=v({name:"Logo",components:{Icon:D}}),pe="logo__O3W1z",_e="logoIcon__gvzS2",fe={logo:pe,logoIcon:_e};function he(e,n,r,a,m,i){const t=s("Icon");return c(),g("div",{class:f(e.$style.logo)},[o(t,{class:f(e.$style.logoIcon),icon:"logos:element"},null,8,["class"])],2)}const be={$style:fe},$e=C(me,[["render",he],["__cssModules",be]]),ye=v({name:"MainMenu",components:{Icon:D},props:{item:{type:Object,required:!0}},setup(e){const n=H(),r=q(),a=b(()=>e.item.meta?!e.item.meta.hidden:!1);function m(){n.path!==e.item.path&&r.push(e.item.path).catch(i=>{console.error(i)})}return{show:a,handleJump:m}}});function ge(e,n,r,a,m,i){const t=s("Icon"),p=s("el-menu-item");return e.show?(c(),_(p,{key:0,index:e.item.path,onClick:e.handleJump},{title:l(()=>[e.item.meta.icon?(c(),_(t,{key:0,icon:e.item.meta.icon},null,8,["icon"])):z("",!0),k("span",null,B(e.item.meta.title),1)]),_:1},8,["index","onClick"])):z("",!0)}const x=C(ye,[["render",ge]]),ve=v({name:"SubMenu",components:{Icon:D,MainMenu:x},props:{item:{type:Object,required:!0}},setup(e){return{onlyOneChild:b(()=>e.item.children.length===1?e.item.meta?!e.item.meta.alwaysShow:!0:!1)}}});function Ce(e,n,r,a,m,i){const t=s("MainMenu"),p=s("Icon"),u=s("sub-menu",!0),d=s("el-sub-menu");return e.onlyOneChild?(c(),_(t,{key:0,item:e.item.children[0]},null,8,["item"])):(c(),_(d,{key:1,index:e.item.path},{title:l(()=>[e.item.meta.icon?(c(),_(p,{key:0,class:"el-icon",icon:e.item.meta.icon},null,8,["icon"])):z("",!0),k("span",null,B(e.item.meta.title),1)]),default:l(()=>[(c(!0),g(T,null,P(e.item.children,y=>(c(),g(T,{key:y.path},[y.children?(c(),_(u,{key:0,item:y},null,8,["item"])):(c(),_(t,{key:1,item:y},null,8,["item"]))],64))),128))]),_:1},8,["index"]))}const Me=C(ve,[["render",Ce]]),Te=v({name:"Menu",components:{MainMenu:x,SubMenu:Me},setup(){const e=N({list:[]}),n=H(),r=oe(),a=E(),m=b(()=>se(r.routes)),i=b(()=>a.$state),t=b(()=>n.path);function p(d,y=""){for(const $ of d)if($.path=y+($.path.startsWith("/")?$.path:`/${$.path}`),delete $.component,delete $.redirect,$.children){if($.children.length===0)continue;p($.children,$.path)}return d}function u(){const d=p(m.value);e.list=d}return Y(()=>{u()}),{...J(e),vars:j,activeMenu:t,setting:i}}}),we="menu__JeSdZ",Se={menu:we};function ke(e,n,r,a,m,i){const t=s("SubMenu"),p=s("MainMenu"),u=s("el-menu");return c(),_(u,{mode:"vertical",class:f(e.$style.menu),defaultActive:e.activeMenu,backgroundColor:e.vars.menuBg,textColor:e.vars.menuText,activeTextColor:e.vars.menuActiveText,collapse:!e.setting.sideOpened,collapseTransition:!1,uniqueOpened:""},{default:l(()=>[(c(!0),g(T,null,P(e.list,d=>(c(),g(T,{key:d.path},[d.children?(c(),_(t,{key:0,item:d},null,8,["item"])):(c(),_(p,{key:1,item:d},null,8,["item"]))],64))),128))]),_:1},8,["class","defaultActive","backgroundColor","textColor","activeTextColor","collapse"])}const De={$style:Se},Oe=C(Te,[["render",ke],["__cssModules",De]]),Ie=v({name:"Avatar",components:{Icon:D},setup(){const e=N({commandMap:{logout:()=>m()}}),n=q(),r=ae(),{$msgbox:a}=G();function m(){a.confirm("确认退出登录？","提示",{type:"warning"}).then(async()=>{await r.logout(),n.replace({path:"/login"})}).catch(()=>{})}function i(t){e.commandMap[t]()}return{handleCommand:i}}}),Re="avatarWrapper__qJ38h",Le="avatar__XLkyv",Ae="avatarDropdownMenu__vY1TP",Fe={avatarWrapper:Re,avatar:Le,avatarDropdownMenu:Ae},We=k("span",null,"退出登录",-1);function Be(e,n,r,a,m,i){const t=s("Icon"),p=s("el-dropdown-item"),u=s("el-dropdown-menu"),d=s("el-dropdown");return c(),_(d,{onCommand:e.handleCommand},{default:l(()=>[k("div",{class:f(e.$style.avatarWrapper)},[o(t,{class:f(e.$style.avatar),icon:"custom:avatar",inline:!0},null,8,["class"])],2)]),dropdown:l(()=>[o(u,{class:f(e.$style.avatarDropdownMenu)},{default:l(()=>[o(p,{command:"logout"},{default:l(()=>[o(t,{icon:"ant-design:logout-outlined",inline:!0}),We]),_:1})]),_:1},8,["class"])]),_:1},8,["onCommand"])}const He={$style:Fe},Pe=C(Ie,[["render",Be],["__cssModules",He]]),Ne=v({name:"Breadcrumb",setup(){const e=N({breadcrumbs:[]}),n=H();function r(){var i;const a=n.matched,m=[];for(const t of a)t.path!=="/"&&m.push({path:t.path.startsWith("/")?t.path:`/${t.path}`,title:((i=t.meta)==null?void 0:i.title)||"-"});e.breadcrumbs=m}return X(()=>n.path,a=>{a.startsWith("/redirect/")||r()}),Y(()=>{r()}),{...J(e)}}}),Ee="breadcrumb__45QCe",Ke={breadcrumb:Ee};function Ve(e,n,r,a,m,i){const t=s("el-breadcrumb-item"),p=s("el-breadcrumb");return c(),_(p,{class:f(e.$style.breadcrumb)},{default:l(()=>[(c(!0),g(T,null,P(e.breadcrumbs,(u,d)=>(c(),g(T,{key:u.path},[d===e.breadcrumbs.length-1?(c(),_(t,{key:0},{default:l(()=>[S(B(u.title),1)]),_:2},1024)):(c(),_(t,{key:1,to:{path:u.path}},{default:l(()=>[S(B(u.title),1)]),_:2},1032,["to"]))],64))),128))]),_:1},8,["class"])}const ze={$style:Ke},je=C(Ne,[["render",Ve],["__cssModules",ze]]),qe=v({name:"ScreenFull",components:{Icon:D},setup(){const{isFullscreen:e,isSupported:n,toggle:r}=le(),{$message:a}=G(),m=b(()=>e.value?"ant-design:fullscreen-exit-outlined":"ant-design:fullscreen-outlined");function i(){n?r():a.warning("浏览器不支持全屏")}return{icon:m,handleClick:i}}});function Je(e,n,r,a,m,i){const t=s("Icon");return c(),g("div",{title:"全屏",onClick:n[0]||(n[0]=(...p)=>e.handleClick&&e.handleClick(...p))},[o(t,{icon:e.icon,inline:!0},null,8,["icon"])])}const Qe=C(qe,[["render",Je]]),Ue=v({name:"Trigger",components:{Icon:D},setup(){const e=E(),n=b(()=>!e.sideOpened),r=b(()=>n.value?"ant-design:menu-unfold-outlined":"ant-design:menu-fold-outlined");function a(){e.change({key:"sideOpened",value:n.value})}return{collapsed:n,icon:r,handleClick:a}}}),Ye="trigger__lcYms",Ge={trigger:Ye};function Xe(e,n,r,a,m,i){const t=s("Icon");return c(),_(t,{class:f(e.$style.trigger),icon:e.icon,onClick:e.handleClick},null,8,["class","icon","onClick"])}const Ze={$style:Ge},xe=C(Ue,[["render",Xe],["__cssModules",Ze]]),en=v({name:"Navbar",components:{Avatar:Pe,Breadcrumb:je,ScreenFull:Qe,Trigger:xe}}),nn="navbar__JDd-o",tn="left__Yp02w",on="right__Z-Ibh",sn={navbar:nn,left:tn,right:on};function an(e,n,r,a,m,i){const t=s("Trigger"),p=s("Breadcrumb"),u=s("ScreenFull"),d=s("Avatar"),y=s("el-space");return c(),g("div",{class:f(e.$style.navbar)},[k("div",{class:f(e.$style.left)},[o(t),o(p)],2),k("div",{class:f(e.$style.right)},[o(y,{size:15},{default:l(()=>[o(u),o(d)]),_:1})],2)],2)}const ln={$style:sn},cn=C(en,[["render",an],["__cssModules",ln]]),rn=v({name:"Tabbar",components:{Icon:D},setup(){const e=N({activeKey:"",commandMap:{refresh:()=>$(),closeLeft:()=>K(),closeRight:()=>O(),closeOther:()=>V(),closeAll:()=>F()}}),n=H(),r=q(),a=U(),m=E(),i=b(()=>a.visitedTabs),t=b(()=>i.value.findIndex(h=>h.fullPath===e.activeKey)===0),p=b(()=>i.value.findIndex(h=>h.fullPath===e.activeKey)===i.value.length-1),u=b(()=>i.value.length<=1);function d(h){return e.activeKey===h.fullPath}function y(){const{name:h,path:w,fullPath:L}=n;return h&&[Q.LOGIN,Q.ERROR].indexOf(w)===-1&&(a.addTab(n),e.activeKey=L),!1}function $(){a.delCachedTab(n).then(()=>{const{fullPath:h}=n;ce(()=>{r.replace({path:"/redirect"+h})})})}function M(h){const w=i.value.find(L=>L.fullPath===h);a.delTab(w).then(({visitedTabs:L})=>{d(w)&&I(L)})}function K(){a.delLeftTabs(n)}function O(){a.delRightTabs(n)}function V(){a.delOthersTabs(n)}function F(){a.delAllTabs().then(({visitedTabs:h})=>{I(h)})}function W(h){r.push(h)}function I(h){const w=h.slice(-1)[0];w?r.push(w.fullPath):n.name===m.homeRoute.name?r.replace({path:"/redirect"+n.fullPath}):r.replace("/")}function R(h){e.commandMap[h]()}return X(()=>n.path,()=>{y()}),re(()=>{y()}),{...J(e),visitedTabs:i,closeLeftDisabled:t,closeRightDisabled:p,closeOtherDisabled:u,handleCloseTab:M,handleSelectTab:W,handleCommand:R}}}),un="tabbar__2iI-k",dn="tabsMenu__sonef",mn="tabsDropdownMenu__x75gy",pn={tabbar:un,tabsMenu:dn,tabsDropdownMenu:mn};function _n(e,n,r,a,m,i){const t=s("el-tab-pane"),p=s("el-tabs"),u=s("Icon"),d=s("el-dropdown-item"),y=s("el-dropdown-menu"),$=s("el-dropdown");return c(),g("div",{class:f(e.$style.tabbar)},[o(p,{modelValue:e.activeKey,"onUpdate:modelValue":n[0]||(n[0]=M=>e.activeKey=M),onTabChange:e.handleSelectTab,onTabRemove:e.handleCloseTab},{default:l(()=>[(c(!0),g(T,null,P(e.visitedTabs,M=>(c(),_(t,{key:M.fullPath,name:M.fullPath,label:M.meta.title,closable:""},null,8,["name","label"]))),128))]),_:1},8,["modelValue","onTabChange","onTabRemove"]),o($,{placement:"bottom-end",onCommand:e.handleCommand},{default:l(()=>[k("div",{class:f(e.$style.tabsMenu)},[o(u,{icon:"ant-design:down-outlined",inline:!0})],2)]),dropdown:l(()=>[o(y,{class:f(e.$style.tabsDropdownMenu)},{default:l(()=>[o(d,{command:"refresh"},{default:l(()=>[o(u,{icon:"ant-design:reload-outlined",inline:!0}),S(" 刷新页面 ")]),_:1}),o(d,{command:"closeLeft",disabled:e.closeLeftDisabled,divided:""},{default:l(()=>[o(u,{icon:"ant-design:vertical-right-outlined",inline:!0}),S(" 关闭左侧 ")]),_:1},8,["disabled"]),o(d,{command:"closeRight",disabled:e.closeRightDisabled},{default:l(()=>[o(u,{icon:"ant-design:vertical-left-outlined",inline:!0}),S(" 关闭右侧 ")]),_:1},8,["disabled"]),o(d,{command:"closeOther",disabled:e.closeOtherDisabled,divided:""},{default:l(()=>[o(u,{icon:"ant-design:close-outlined",inline:!0}),S(" 关闭其它 ")]),_:1},8,["disabled"]),o(d,{command:"closeAll"},{default:l(()=>[o(u,{icon:"ant-design:close-circle-outlined",inline:!0}),S(" 关闭所有 ")]),_:1})]),_:1},8,["class"])]),_:1},8,["onCommand"])],2)}const fn={$style:pn},hn=C(rn,[["render",_n],["__cssModules",fn]]),[bn,$n]=Z(),[yn,gn]=Z(),vn=v({name:"DefaultLayout",components:{Content:de,Logo:$e,Menu:Oe,Navbar:cn,Tabbar:hn,DefineHeader:bn,ReuseHeader:$n,DefineContent:yn,ReuseContent:gn},setup(){const e=E(),n=b(()=>e.$state),r=b(()=>n.value.sideOpened?n.value.sideOpenedWidth:n.value.sideClosedWidth),a=b(()=>{const t={};return n.value.sideOpened?(t.marginLeft=n.value.sideOpenedWidth,t.width=`calc(100vw - ${n.value.sideOpenedWidth})`):(t.marginLeft=n.value.sideClosedWidth,t.width=`calc(100vw - ${n.value.sideClosedWidth})`),t}),m=b(()=>{const t={height:j.headerHeight};return n.value.fixedHeader&&(t.position="sticky",t.top="0px"),t}),i=b(()=>{const t={};return n.value.fixedHeader&&(t.position="sticky",t.top=j.headerHeight),t});return{setting:n,asideWidth:r,mainStyle:a,headerStyle:m,tabbarStyle:i}}}),Cn="layout__Cm3G4",Mn="layoutSide__Qx-Oj",Tn="layoutMain__RvQoN",wn="layoutHeader__1O0br",Sn="layoutContent__0Ei-r",kn={layout:Cn,layoutSide:Mn,layoutMain:Tn,layoutHeader:wn,layoutContent:Sn};function Dn(e,n,r,a,m,i){const t=s("Navbar"),p=s("el-header"),u=s("DefineHeader"),d=s("Content"),y=s("el-main"),$=s("DefineContent"),M=s("Logo"),K=s("Menu"),O=s("el-scrollbar"),V=s("el-aside"),F=s("ReuseHeader"),W=s("Tabbar"),I=s("ReuseContent"),R=s("el-container");return c(),g(T,null,[o(u,null,{default:l(()=>[o(p,{class:f(e.$style.layoutHeader),style:A(e.headerStyle)},{default:l(()=>[o(t)]),_:1},8,["class","style"])]),_:1}),o($,null,{default:l(()=>[o(y,{class:f(e.$style.layoutContent)},{default:l(()=>[o(d)]),_:1},8,["class"])]),_:1}),o(R,{class:f(e.$style.layout)},{default:l(()=>[o(V,{class:f(e.$style.layoutSide),width:e.asideWidth},{default:l(()=>[o(M),o(O,null,{default:l(()=>[o(K)]),_:1})]),_:1},8,["class","width"]),e.setting.fixedHeader?(c(),_(R,{key:0,class:f(e.$style.layoutMain),style:A(e.mainStyle),direction:"vertical"},{default:l(()=>[o(F),o(W,{style:A(e.tabbarStyle)},null,8,["style"]),o(O,{id:"page"},{default:l(()=>[o(I)]),_:1})]),_:1},8,["class","style"])):(c(),_(O,{key:1},{default:l(()=>[o(R,{class:f(e.$style.layoutMain),style:A(e.mainStyle),direction:"vertical"},{default:l(()=>[o(F),o(W,{style:A(e.tabbarStyle)},null,8,["style"]),o(I)]),_:1},8,["class","style"])]),_:1}))]),_:1},8,["class"])],64)}const On={$style:kn},Rn=C(vn,[["render",Dn],["__cssModules",On]]);export{Rn as default};
