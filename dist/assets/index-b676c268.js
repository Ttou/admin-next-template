import"./base-3117a520.js";/* empty css                  */import{G as h}from"./index.common-5b8c2a1c.js";/* empty css                 *//* empty css                  *//* empty css               *//* empty css                   */import{b as R}from"./index-8c06401f.js";import{r as d,c as v,o as b,K as y,R as C,U as E,d as P,p as s,z as S,m as L}from"./runtime-core.esm-bundler-a4e74cc4.js";import{b as T}from"./el-message-cf125374.js";import{g as x}from"./util-4c0c89e9.js";import{l as H,h as c,t as A,F as _,G}from"./plugin-vue_export-helper-f50e9431.js";import{b as l,a as f,c as u,T as O}from"./table-f4d16f04.js";import{k as w,l as D,m as I,h as k}from"./_baseClone-409b4e96.js";import{i as F,b as B}from"./isObjectLike-46b91259.js";import{f as N}from"./_flatRest-047ab154.js";import{z as M}from"./index-ac42ff0c.js";import"./dayjs.min-bc4b3a60.js";import"./vue-router-8273c86d.js";import"./index-387dc701.js";import"./config-provider-74aaaa6e.js";var z="[object Object]",Y=Function.prototype,j=Object.prototype,m=Y.toString,q=j.hasOwnProperty,K=m.call(Object);function U(e){if(!F(e)||B(e)!=z)return!1;var t=w(e);if(t===null)return!0;var r=q.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&m.call(r)==K}function V(e,t,r){var o=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var n=Array(i);++o<i;)n[o]=e[o+t];return n}function $(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function J(e,t){return t.length<2?e:H(e,V(t,0,-1))}function Q(e,t){return t=c(t,e),e=J(e,t),e==null||delete e[A($(t))]}function W(e){return U(e)?void 0:e}var X=1,Z=2,ee=4,te=N(function(e,t){var r={};if(e==null)return r;var o=!1;t=_(t,function(n){return n=c(n,e),o||(o=n.length>1),n}),D(e,I(e),r),o&&(r=k(r,X|Z|ee,W));for(var i=t.length;i--;)Q(r,t[i]);return r});const re=te;function oe(e){const t=d({});function r(a){const g=e.value.formConfig.items.find(p=>p.field===a.field);G(g,a.key,a.value)}function o(){e.value.loading=!0}function i(){e.value.loading=!1}async function n(a){try{o(),await(a==null?void 0:a()),await t.value.commitProxy("query")}finally{i()}}return{gridRef:t,updateFormItem:r,showLoading:o,hideLoading:i,refresh:n}}const ie={getList(e){return T.get("/demo/list",{params:e})}};function ne(e){const t=d(0),r=v(()=>t.value+"px"),o=R();function i(){const n=document.querySelector("#page");t.value=n.scrollHeight-(o.fixedHeader?20:110)-((e==null?void 0:e.extraHeight)||0)}return b(()=>{i()}),{pageHeight:t,pageHeightPx:r}}function ae(){const e=y({gridConfig:{id:x(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"admin",value:"admin"},{label:"normal",value:"normal"}]}},{title:"状态",field:"status",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"时间",field:"date",itemRender:{name:f.FormItemDate,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"}}},{itemRender:{name:f.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:u.Input}},{title:"角色",field:"role"},{title:"状态",field:"status",editRender:{name:u.Select,options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"备注",field:"remark",editRender:{name:u.Input}},{title:"创建时间",field:"createTs",formatter:O.Date}],pagerConfig:{pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:r,form:o})=>(o.date&&(o.start=o.date[0],o.end=o.date[1],o=re(o,["date"])),await ie.getList({pageSize:r.pageSize,current:r.currentPage,...o}))}}}}),t=oe(C(e,"gridConfig"));return{...E(e),proGridHook:t}}function le({proGridHook:e}){function t(){e.refresh()}return{handleCustomRefresh:t}}const Ae=P({setup(){const{proGridHook:e,...t}=ae(),r=le({proGridHook:e}),{pageHeightPx:o}=ne();return{...t,...r,gridRef:e.gridRef,pageHeightPx:o}},render(){return s("div",{style:{height:this.pageHeightPx}},[s(h,S({ref:"gridRef"},this.gridConfig),{toolbar_buttons:()=>s(M,{type:"primary",link:!0,onClick:this.handleCustomRefresh},{default:()=>[L("自定义刷新")]})})])}});export{Ae as default};
