import{d as e,u as t,c as l,a1 as a,ae as n,af as s,r as i,e as u,T as r,ag as d,ah as h,ai as o,i as c,aj as m,ak as p,O as f,al as v,H as b,am as g,an as y,ao as T,ap as C,aq as k,ar as O,as as S,at as w,au as x,av as R,aw as j,ax as K,z as L,o as z,ay as D,az as I,aA as H,J as $,M as W,aB as M,aC as N,aD as A,aE as F,aF as P}from"./vendor.ab62e078.js";import{u as _,a as q,S as B,p as U,b as E,c as G,R as J}from"./index.a5ffa2fe.js";/* empty css              */var Q=e({name:"Content",setup(){const e=_();return{cachedTabs:t((()=>e.cachedTabs))}},render(){return l(a,null,{default:({Component:e,route:t})=>l(n,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[l(s,{max:20,include:this.cachedTabs},[l(e,{key:t.fullPath},null)])]})})}}),V=e({name:"Logo",setup(){const e=i({}),l=q(),a=t((()=>l.$state));return u(a,(t=>{e.value.height=t.siderLogoHeight,e.value.borderRight="light"===t.siderTheme?"1px solid #f0f0f0":"unset"}),{deep:!0,immediate:!0}),{style:e}},render(){return l("div",{class:"xo7tdh0",style:this.style},[l(B,{class:"xo7tdh1",name:"ant-design"},null)])}}),X=e({name:"MainMenu",props:{item:U.object().isRequired},setup:e=>({show:t((()=>!!e.item.meta&&!e.item.meta.hidden))}),render(){return this.show?l(r.Item,{icon:this.item.meta.icon,key:this.item.path},{default:()=>[l(d,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),Y=e({name:"SubMenu",props:{item:U.object().isRequired},setup:e=>({onlyOneChild:t((()=>1===e.item.children.length&&(!e.item.meta||!e.item.meta.alwaysShow)))}),render(){return this.onlyOneChild?l(X,{item:this.item.children[0]},null):l(r.SubMenu,{key:this.item.path,icon:this.item.meta.icon,title:this.item.meta.title},{default:()=>{var e;return[null==(e=this.item.children)?void 0:e.map((e=>e.children?l(h("sub-menu"),{item:e},null):l(X,{item:e},null)))]}})}});var Z=e({name:"Menu",components:{SubMenu:Y},setup(){const e=i([]),l=i([]),a=i([]),n=o(),s=E(),r=q(),d=t((()=>m(s.routes))),h=t((()=>r.$state)),c=t((()=>{const e={};return e.minHeight=`calc(100vh - ${h.value.siderLogoHeight})`,e}));function p(e,t=""){for(const l of e)if("Dashboard"!==l.name?l.path=t+(l.path.startsWith("/")?l.path:`/${l.path}`):l.path=`/${l.path}`,delete l.component,delete l.redirect,l.children){if(0===l.children.length)continue;p(l.children,l.path)}return e}function f(){const t=p(d.value);e.value=t}return u((()=>n.path),(e=>{f(),l.value=[...n.matched.map((e=>e.path))],a.value=[e]}),{immediate:!0}),{list:e,openKeys:l,selectedKeys:a,settings:h,style:c}},render(){let e;return l(r,{mode:"inline",theme:this.settings.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":e=>this.openKeys=e,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":e=>this.selectedKeys=e,style:this.style},"function"==typeof(t=e=this.list.map((e=>e.children?l(Y,{item:e},null):l(X,{item:e},null))))||"[object Object]"===Object.prototype.toString.call(t)&&!c(t)?e:{default:()=>[e]});var t}}),ee=e({name:"Avatar",setup(){const e=p(),t=G();return{handleLogout:function(){g.confirm({title:"提示",icon:l(y,null,null),content:"确认退出登录？",async onOk(){await t.logout(),e.replace({path:"/login"})}})}}},render(){return l(f,null,{default:()=>l("div",{class:"avatar-wrapper"},[l(B,{name:"avatar",class:"avatar"},null)]),overlay:()=>l(r,null,{default:()=>[l(r.Item,{onClick:this.handleLogout},{default:()=>[l(v,null,null),l("span",null,[b("退出登录")])]})]})})}}),te=e({name:"Breadcrumb",setup(){const e=i([]),t=p();return T((()=>{const l=t.currentRoute.value;e.value=function(e){var t;const l=[];for(const a of e){if("/"===a.path)continue;const e={path:a.path.startsWith("/")?a.path:`/${a.path}`,breadcrumbName:(null==(t=a.meta)?void 0:t.title)||"undefined",children:[]};a.children&&(e.children=a.children.map((e=>{var t;return{path:a.path+`/${e.path}`,breadcrumbName:(null==(t=e.meta)?void 0:t.title)||"undefined"}}))),l.push(e)}return l}(l.matched)})),{routes:e,getBreadcrumbName:function(e){var t;return(null==(t=e.meta)?void 0:t.title)||"undefined"}}},render(){return l(C,{class:"breadcrumb",routes:this.routes,itemRender:({route:e,routes:t})=>t.indexOf(e)===t.length-1?l("span",null,[e.breadcrumbName]):l(d,{to:e.path},{default:()=>[e.breadcrumbName]})},null)}}),le=e({name:"ScreenFull",setup(){const{isFullscreen:e,isSupported:t,toggle:l}=k();return{isFullscreen:e,handleClick:function(){t?l():w.warn("浏览器不支持全屏")}}},render(){return l("div",{title:"全屏",style:{cursor:"pointer"},onClick:this.handleClick},[this.isFullscreen?l(O,null,null):l(S,null,null)])}}),ae=e({name:"SiderTheme",setup(){const e=q(),l=t((()=>e.siderTheme));return{siderTheme:l,handleClick:function(){e.change({key:"siderTheme",value:"dark"===l.value?"light":"dark"})}}},render(){return l("div",{title:"主题",style:{cursor:"pointer"},onClick:this.handleClick},["dark"===this.siderTheme?l(x,null,null):l(R,null,null)])}}),ne=e({name:"Trigger",setup(){const e=q(),l=t((()=>!e.siderOpened));return{collapsed:l,handleClick:function(){e.change({key:"siderOpened",value:l.value})}}},render(){return this.collapsed?l(j,{class:"trigger",onClick:this.handleClick},null):l(K,{class:"trigger",onClick:this.handleClick},null)}}),se=e({name:"Header",render:()=>l("div",{class:"pkjctc0"},[l("div",{class:"pkjctc1"},[l(ne,null,null),l(te,null,null)]),l("div",{class:"pkjctc2"},[l(L,null,{default:()=>[l(le,null,null),l(ae,null,null),l(ee,null,null)]})])])});var ie=e({name:"Tabs",setup(){const e=i(""),l=o(),a=p(),n=_(),s=t((()=>n.visitedTabs)),r=t((()=>0===s.value.findIndex((t=>t.path===e.value)))),d=t((()=>s.value.findIndex((t=>t.path===e.value))===s.value.length-1)),h=t((()=>s.value.length<=1));function c(){const{name:t,path:a}=l;return t&&-1===[J.LOGIN,J.ERROR].indexOf(a)&&(n.addTab(l),e.value=a),!1}function m(e){const t=e.slice(-1)[0];t?a.push(t.fullPath):"Dashboard"===l.name?a.replace({path:"/redirect"+l.fullPath}):a.push("/")}return u((()=>l.path),(()=>{c()})),z((()=>{c()})),{activeKey:e,visitedTabs:s,closeLeftDisabled:r,closeRightDisabled:d,closeOtherDisabled:h,handleCloseTab:function(t){n.delTab(t).then((({visitedTabs:l})=>{(function(t){return e.value===t.path})(t)&&m(l)}))},handleCloseLeftTabs:function(){n.delLeftTabs(l)},handleCloseRightTabs:function(){n.delRightTabs(l)},handleCloseOtherTabs:function(){n.delOthersTabs(l)},handleCloseAllTabs:function(){n.delAllTabs().then((({visitedTabs:e})=>{m(e)}))},handleSelectTab:function(e){a.push(e)},handleRefreshTab:function(){n.delCachedTab(l).then((()=>{const{fullPath:e}=l;F((()=>{a.replace({path:"/redirect"+e})}))}))}}},render(){let e;return l("div",{class:"zwrgka0"},[l(D,{activeKey:this.activeKey,"onUpdate:activeKey":e=>this.activeKey=e,onChange:this.handleSelectTab},(t=e=this.visitedTabs.map((e=>l(D.TabPane,{tab:()=>l("div",{class:"zwrgka1"},[l("span",null,[e.meta.title]),l(I,{onClick:H((()=>this.handleCloseTab(e)),["stop"])},null)]),key:e.path},null))),"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!c(t)?e:{default:()=>[e]})),l(f,{overlayStyle:{zIndex:100002}},{default:()=>l("div",{class:"zwrgka2"},[l($,null,null)]),overlay:()=>l(r,null,{default:()=>[l(r.Item,{onClick:this.handleRefreshTab},{default:()=>[l(W,null,null),b("刷新页面")]}),l(r.Divider,null,null),l(r.Item,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[l(M,null,null),b("关闭左侧")]}),l(r.Item,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[l(N,null,null),b("关闭右侧")]}),l(r.Divider,null,null),l(r.Item,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[l(I,null,null),b("关闭其它")]}),l(r.Item,{onClick:this.handleCloseAllTabs},{default:()=>[l(A,null,null),b("关闭所有")]})]})})]);var t}}),ue=e({name:"Layout",setup(){const e=q(),l=t((()=>e.$state)),a=t((()=>{const e={};return l.value.siderOpened?(e.marginLeft=l.value.siderOpenedWidth,e.width=`calc(100vw - ${l.value.siderOpenedWidth})`):(e.marginLeft=l.value.siderClosedWidth,e.width=`calc(100vw - ${l.value.siderClosedWidth})`),e})),n=t((()=>{const e={height:l.value.headerHeight};return l.value.fixedHeader&&(e.position="sticky",e.top="0px"),e})),s=t((()=>{const e={};return l.value.fixedHeader&&(e.position="sticky",e.top=l.value.headerHeight),e}));return{settings:l,mainStyle:a,headerStyle:n,tabbarStyle:s}},render(){return l(P,{class:"_63mzhe0"},{default:()=>[l(P.Sider,{class:"_63mzhe1",collapsed:!this.settings.siderOpened,trigger:null,theme:this.settings.siderTheme,width:this.settings.siderOpenedWidth,collapsedWidth:this.settings.siderClosedWidth,collapsible:!0},{default:()=>[l(V,null,null),l(Z,null,null)]}),l(P,{class:"_63mzhe2",style:this.mainStyle},{default:()=>[l(P.Header,{class:"_63mzhe3",style:this.headerStyle},{default:()=>[l(se,null,null)]}),l(ie,{style:this.tabbarStyle},null),l(P.Content,{class:"_63mzhe4"},{default:()=>[l(Q,null,null)]})]})]})}});export{ue as default};
