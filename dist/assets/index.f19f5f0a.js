import{d as e,ad as t,u as a,c as l,a1 as s,ae as n,af as i,r as u,e as r,T as d,ag as h,ah as o,ai as c,i as p,aj as m,ak as b,O as f,al as v,H as g,am as y,an as T,ao as C,ap as k,aq as O,ar as S,as as K,at as R,au as L,av as w,aw as x,ax as j,z as D,o as H,ay as I,az as W,aA as M,J as $,M as A,aB as N,aC as F,aD as P,aE as q,aF as B}from"./vendor.464c5deb.js";import{K as U,S as z,p as E,A as G,R as J}from"./index.5883e170.js";/* empty css              */var Q=e({name:"Content",setup(){const e=t(U);return{cachedTabs:a((()=>e.state.tabs.cachedTabs))}},render(){return l(s,null,{default:({Component:e,route:t})=>l(n,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[l(i,{max:20,include:this.cachedTabs},[l(e,{key:t.fullPath},null)])]})})}}),V=e({name:"Logo",setup(){const e=u({}),l=t(U),s=a((()=>l.state.settings));return r(s,(t=>{e.value.height=t.siderLogoHeight,e.value.borderRight="light"===t.siderTheme?"1px solid #f0f0f0":"unset"}),{deep:!0,immediate:!0}),{style:e}},render(){return l("div",{class:"logo",style:this.style},[l(z,{class:"logo-icon",name:"ant-design"},null)])}}),X=e({name:"MainMenu",props:{item:E.object().isRequired},setup:e=>({show:a((()=>!!e.item.meta&&!e.item.meta.hidden))}),render(){return this.show?l(d.Item,{icon:this.item.meta.icon,key:this.item.path},{default:()=>[l(h,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),Y=e({name:"SubMenu",props:{item:E.object().isRequired},setup:e=>({onlyOneChild:a((()=>1===e.item.children.length&&(!e.item.meta||!e.item.meta.alwaysShow)))}),render(){return this.onlyOneChild?l(X,{item:this.item.children[0]},null):l(d.SubMenu,{key:this.item.path,icon:this.item.meta.icon,title:this.item.meta.title},{default:()=>{var e;return[null==(e=this.item.children)?void 0:e.map((e=>e.children?l(o("sub-menu"),{item:e},null):l(X,{item:e},null)))]}})}});var Z=e({name:"Menu",components:{SubMenu:Y},setup(){const e=u([]),l=u([]),s=u([]),n=c(),i=t(U),d=a((()=>m(i.state.permission.routes))),h=a((()=>i.state.settings)),o=a((()=>{const e={};return e.minHeight=`calc(100vh - ${h.value.siderLogoHeight})`,e}));function p(e,t=""){for(const a of e)if("Dashboard"!==a.name?a.path=t+(a.path.startsWith("/")?a.path:`/${a.path}`):a.path=`/${a.path}`,delete a.component,delete a.redirect,a.children){if(0===a.children.length)continue;p(a.children,a.path)}return e}function b(){const t=p(d.value);e.value=t}return r((()=>n.path),(e=>{b(),l.value=[...n.matched.map((e=>e.path))],s.value=[e]}),{immediate:!0}),{list:e,openKeys:l,selectedKeys:s,settings:h,style:o}},render(){let e;return l(d,{mode:"inline",theme:this.settings.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":e=>this.openKeys=e,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":e=>this.selectedKeys=e,style:this.style},"function"==typeof(t=e=this.list.map((e=>e.children?l(Y,{item:e},null):l(X,{item:e},null))))||"[object Object]"===Object.prototype.toString.call(t)&&!p(t)?e:{default:()=>[e]});var t}}),_=e({name:"Avatar",setup(){const e=b(),a=t(U);return{handleLogout:function(){y.confirm({title:"提示",icon:l(T,null,null),content:"确认退出登录？",async onOk(){await a.dispatch(G.user.logout),e.replace({path:"/login"})}})}}},render(){return l(f,null,{default:()=>l("div",{class:"avatar-wrapper"},[l(z,{name:"avatar",class:"avatar"},null)]),overlay:()=>l(d,null,{default:()=>[l(d.Item,{onClick:this.handleLogout},{default:()=>[l(v,null,null),l("span",null,[g("退出登录")])]})]})})}}),ee=e({name:"Breadcrumb",setup(){const e=u([]),t=b();return C((()=>{const a=t.currentRoute.value;e.value=function(e){var t;const a=[];for(const l of e){if("/"===l.path)continue;const e={path:l.path.startsWith("/")?l.path:`/${l.path}`,breadcrumbName:(null==(t=l.meta)?void 0:t.title)||"undefined",children:[]};l.children&&(e.children=l.children.map((e=>{var t;return{path:l.path+`/${e.path}`,breadcrumbName:(null==(t=e.meta)?void 0:t.title)||"undefined"}}))),a.push(e)}return a}(a.matched)})),{routes:e,getBreadcrumbName:function(e){var t;return(null==(t=e.meta)?void 0:t.title)||"undefined"}}},render(){return l(k,{class:"breadcrumb",routes:this.routes,itemRender:({route:e,routes:t})=>t.indexOf(e)===t.length-1?l("span",null,[e.breadcrumbName]):l(h,{to:e.path},{default:()=>[e.breadcrumbName]})},null)}}),te=e({name:"ScreenFull",setup(){const{isFullscreen:e,isSupported:t,toggle:a}=O();return{isFullscreen:e,handleClick:function(){t?a():R.warn("浏览器不支持全屏")}}},render(){return l("div",{title:"全屏",style:{cursor:"pointer"},onClick:this.handleClick},[this.isFullscreen?l(S,null,null):l(K,null,null)])}}),ae=e({name:"SiderTheme",setup(){const e=t(U),l=a((()=>e.state.settings.siderTheme));return{siderTheme:l,handleClick:function(){e.dispatch(G.settings.changeSetting,{key:"siderTheme",value:"dark"===l.value?"light":"dark"})}}},render(){return l("div",{title:"主题",style:{cursor:"pointer"},onClick:this.handleClick},["dark"===this.siderTheme?l(L,null,null):l(w,null,null)])}}),le=e({name:"Trigger",setup(){const e=t(U),l=a((()=>!e.state.settings.siderOpened));return{collapsed:l,handleClick:function(){e.dispatch(G.settings.changeSetting,{key:"siderOpened",value:l.value})}}},render(){return this.collapsed?l(x,{class:"trigger",onClick:this.handleClick},null):l(j,{class:"trigger",onClick:this.handleClick},null)}}),se=e({name:"Header",render:()=>l("div",{class:"navbar"},[l("div",{class:"left"},[l(le,null,null),l(ee,null,null)]),l("div",{class:"right"},[l(D,null,{default:()=>[l(te,null,null),l(ae,null,null),l(_,null,null)]})])])});var ne=e({name:"Tabs",setup(){const e=u(""),l=c(),s=b(),n=t(U),i=a((()=>n.state.tabs.visitedTabs)),d=a((()=>0===i.value.findIndex((t=>t.path===e.value)))),h=a((()=>i.value.findIndex((t=>t.path===e.value))===i.value.length-1)),o=a((()=>i.value.length<=1));function p(){const{name:t,path:a}=l;return t&&-1===[J.LOGIN,J.ERROR].indexOf(a)&&(n.dispatch(G.tabs.addTab,l),e.value=a),!1}function m(e){const t=e.slice(-1)[0];t?s.push(t.fullPath):"Dashboard"===l.name?s.replace({path:"/redirect"+l.fullPath}):s.push("/")}return r((()=>l.path),(()=>{p()})),H((()=>{p()})),{activeKey:e,visitedTabs:i,closeLeftDisabled:d,closeRightDisabled:h,closeOtherDisabled:o,handleCloseTab:function(t){n.dispatch(G.tabs.delTab,t).then((({visitedTabs:a})=>{(function(t){return e.value===t.path})(t)&&m(a)}))},handleCloseLeftTabs:function(){n.dispatch(G.tabs.delLeftTabs,l)},handleCloseRightTabs:function(){n.dispatch(G.tabs.delRightTabs,l)},handleCloseOtherTabs:function(){n.dispatch(G.tabs.delOthersTabs,l)},handleCloseAllTabs:function(){n.dispatch(G.tabs.delAllTabs).then((({visitedTabs:e})=>{m(e)}))},handleSelectTab:function(e){s.push(e)},handleRefreshTab:function(){n.dispatch(G.tabs.delCachedTab,l).then((()=>{const{fullPath:e}=l;q((()=>{s.replace({path:"/redirect"+e})}))}))}}},render(){let e;return l("div",{class:"tabbar"},[l(I,{activeKey:this.activeKey,"onUpdate:activeKey":e=>this.activeKey=e,onChange:this.handleSelectTab},(t=e=this.visitedTabs.map((e=>l(I.TabPane,{tab:()=>l("div",{class:"tab-content"},[l("span",null,[e.meta.title]),l(W,{onClick:M((()=>this.handleCloseTab(e)),["stop"])},null)]),key:e.path},null))),"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!p(t)?e:{default:()=>[e]})),l(f,null,{default:()=>l("div",{class:"tabs-menu"},[l($,null,null)]),overlay:()=>l(d,null,{default:()=>[l(d.Item,{onClick:this.handleRefreshTab},{default:()=>[l(A,null,null),g("刷新页面")]}),l(d.Divider,null,null),l(d.Item,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[l(N,null,null),g("关闭左侧")]}),l(d.Item,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[l(F,null,null),g("关闭右侧")]}),l(d.Divider,null,null),l(d.Item,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[l(W,null,null),g("关闭其它")]}),l(d.Item,{onClick:this.handleCloseAllTabs},{default:()=>[l(P,null,null),g("关闭所有")]})]})})]);var t}}),ie=e({name:"Layout",setup(){const e=t(U),l=a((()=>e.state.settings)),s=a((()=>{const e={};return l.value.siderOpened?(e.marginLeft=l.value.siderOpenedWidth,e.width=`calc(100vw - ${l.value.siderOpenedWidth})`):(e.marginLeft=l.value.siderClosedWidth,e.width=`calc(100vw - ${l.value.siderClosedWidth})`),e})),n=a((()=>{const e={height:l.value.headerHeight};return l.value.fixedHeader&&(e.position="sticky",e.top="0px"),e})),i=a((()=>{const e={};return l.value.fixedHeader&&(e.position="sticky",e.top=l.value.headerHeight),e}));return{settings:l,mainStyle:s,headerStyle:n,tabbarStyle:i}},render(){return l(B,{class:"layout"},{default:()=>[l(B.Sider,{class:"layout-sider",collapsed:!this.settings.siderOpened,trigger:null,theme:this.settings.siderTheme,width:this.settings.siderOpenedWidth,collapsedWidth:this.settings.siderClosedWidth,collapsible:!0},{default:()=>[l(V,null,null),l(Z,null,null)]}),l(B,{class:"layout-main",style:this.mainStyle},{default:()=>[l(B.Header,{class:"layout-header",style:this.headerStyle},{default:()=>[l(se,null,null)]}),l(ne,{style:this.tabbarStyle},null),l(B.Content,{class:"layout-content"},{default:()=>[l(Q,null,null)]})]})]})}});export{ie as default};
