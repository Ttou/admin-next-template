import{H as R,J as _,K as y,L as C,M as m,N as b,O as P,Q as E,R as S,S as L,T as H,U as p,V as T,W as x,m as A,X as w,o as G,r as O,Y as l,Z as c,$ as u,a0 as k,a1 as D,t as I,d as B,a2 as F,_ as N,a as d,b as M,c as Y,e as f,w as g,j as $,A as j,a3 as z}from"./index-d339a942.js";import{g as q}from"./util-a768e8e3.js";var K="[object Object]",V=Function.prototype,U=Object.prototype,h=V.toString,J=U.hasOwnProperty,Q=h.call(Object);function W(e){if(!R(e)||_(e)!=K)return!1;var t=y(e);if(t===null)return!0;var n=J.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&h.call(n)==Q}function X(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++o<r;)i[o]=e[o+t];return i}function Z(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function ee(e,t){return t.length<2?e:C(e,X(t,0,-1))}function te(e,t){return t=m(t,e),e=ee(e,t),e==null||delete e[b(Z(t))]}function ne(e){return W(e)?void 0:e}var oe=1,re=2,ie=4,ae=P(function(e,t){var n={};if(e==null)return n;var o=!1;t=E(t,function(i){return i=m(i,e),o||(o=i.length>1),i}),S(e,L(e),n),o&&(n=H(n,oe|re|ie,ne));for(var r=t.length;r--;)te(n,t[r]);return n});const le=ae;function se(e){const t=p({});function n(a){const s=e.value.formConfig.items.find(v=>v.field===a.field);T(s,a.key,a.value)}function o(){e.value.loading=!0}function r(){e.value.loading=!1}async function i(a){try{o(),await(a==null?void 0:a()),await t.value.commitProxy("query")}finally{r()}}return{gridRef:t,updateFormItem:n,showLoading:o,hideLoading:r,refresh:i}}const ue={getList(e){return x.get("/demo/list",{params:e})}};function ce(e){const t=p(0),n=A(()=>t.value+"px"),o=w();function r(){const i=document.querySelector("#page");t.value=i.scrollHeight-(o.fixedHeader?20:110)-((e==null?void 0:e.extraHeight)||0)}return G(()=>{r()}),{pageHeight:t,pageHeightPx:n}}function de(){const e=O({gridConfig:{id:q(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"admin",value:"admin"},{label:"normal",value:"normal"}]}},{title:"状态",field:"status",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"时间",field:"date",itemRender:{name:c.FormItemDate,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"}}},{itemRender:{name:c.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:u.Input}},{title:"角色",field:"role"},{title:"状态",field:"status",editRender:{name:u.Select,options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"备注",field:"remark",editRender:{name:u.Input}},{title:"创建时间",field:"createTs",formatter:k.Date}],pagerConfig:{pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:n,form:o})=>(o.date&&(o.start=o.date[0],o.end=o.date[1],o=le(o,["date"])),await ue.getList({pageSize:n.pageSize,current:n.currentPage,...o}))}}}}),t=se(D(e,"gridConfig"));return{...I(e),proGridHook:t}}function fe({proGridHook:e}){function t(){e.refresh()}return{handleCustomRefresh:t}}const ge=B({components:{ProGrid:F},setup(){const{proGridHook:e,...t}=de(),n=fe({proGridHook:e}),{pageHeightPx:o}=ce();return{...t,...n,gridRef:e.gridRef,pageHeightPx:o}}});function me(e,t,n,o,r,i){const a=d("el-button"),s=d("ProGrid");return M(),Y("div",{style:z({height:e.pageHeightPx})},[f(s,j({ref:"gridRef"},e.gridConfig),{toolbar_buttons:g(()=>[f(a,{type:"primary",link:"",onClick:e.handleCustomRefresh},{default:g(()=>[$(" 自定义刷新 ")]),_:1},8,["onClick"])]),_:1},16)],4)}const ve=N(ge,[["render",me]]);export{ve as default};
