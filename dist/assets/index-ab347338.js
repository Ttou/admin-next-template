import{h as Le}from"./_baseClone-409b4e96.js";import{a as X,w as q,v as Q,T as Ae,r as be}from"./dayjs.min-bc4b3a60.js";import{N as re,w as ie,O as Ie,P as Oe,Q as Pe,b as $e,z as Re,E as ze,a as Ve,R as Ne,T as ue,G as de,h as De,e as He,F as ce}from"./index-ac42ff0c.js";import{t as Fe,E as Ue}from"./index-d725b1d6.js";import{u as ae,b as Ye,d as fe,_ as Ke}from"./plugin-vue_export-helper-f50e9431.js";import{o as he,V as Xe,aW as Ee,O as Ce,bt as qe,w as j,aq as We,N as x,B as D,d as we,p as E,l as oe,G as je,r as A,K as Ge,c as I,U as Ze,H as O,a as c,b,e as p,f as _,g as v,n as u,x as me,k as ee,i as W,j as P,t as N,m as ne,q as Me,aT as Be,s as Je,bs as pe,J as ve}from"./runtime-core.esm-bundler-a4e74cc4.js";import{P as te}from"./index-49c6ccf3.js";import{g as Qe,f as xe,i as _e,b as en}from"./index-5c9b78aa.js";import{i as Te}from"./base-3117a520.js";var nn=1,tn=4;function Dn(e){return Le(e,nn|tn)}const on='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',sn=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,ge=e=>Array.from(e.querySelectorAll(on)).filter(n=>an(n)&&sn(n)),an=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Hn=function(e,n,...s){let a;n.includes("mouse")||n.includes("click")?a="MouseEvents":n.includes("key")?a="KeyboardEvent":a="HTMLEvents";const o=document.createEvent(a);return o.initEvent(n,...s),e.dispatchEvent(o),e},ln=e=>!e.getAttribute("aria-owns"),Fn=(e,n,s)=>{const{parentNode:a}=e;if(!a)return null;const o=a.querySelectorAll(s),l=Array.prototype.indexOf.call(o,e);return o[l+n]||null},Un=e=>{e&&(e.focus(),!ln(e)&&e.click())},rn=(e,n,s)=>{let a={offsetX:0,offsetY:0};const o=d=>{const f=d.clientX,g=d.clientY,{offsetX:C,offsetY:w}=a,r=e.value.getBoundingClientRect(),m=r.left,R=r.top,M=r.width,S=r.height,F=document.documentElement.clientWidth,G=document.documentElement.clientHeight,Z=-m+C,B=-R+w,U=F-m-M+C,J=G-R-S+w,Y=z=>{const K=Math.min(Math.max(C+z.clientX-f,Z),U),V=Math.min(Math.max(w+z.clientY-g,B),J);a={offsetX:K,offsetY:V},e.value.style.transform=`translate(${re(K)}, ${re(V)})`},T=()=>{document.removeEventListener("mousemove",Y),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",Y),document.addEventListener("mouseup",T)},l=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",o)},t=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",o)};he(()=>{Xe(()=>{s.value?l():t()})}),Ee(()=>{t()})},un=e=>{Ce(e)||Fe("[useLockscreen]","You need to pass a ref param to this function");const n=ae("popup"),s=qe(()=>n.bm("parent","hidden"));if(!Te||ie(document.body,s.value))return;let a=0,o=!1,l="0";const t=()=>{setTimeout(()=>{Pe(document==null?void 0:document.body,s.value),o&&document&&(document.body.style.width=l)},200)};j(e,d=>{if(!d){t();return}o=!ie(document.body,s.value),o&&(l=document.body.style.width),a=Qe(n.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,g=Ie(document.body,"overflowY");a>0&&(f||g==="scroll")&&o&&(document.body.style.width=`calc(100% - ${a}px)`),Oe(document.body,s.value)}),We(()=>t())},dn=(e,n)=>{let s;j(()=>e.value,a=>{var o,l;a?(s=document.activeElement,Ce(n)&&((l=(o=n.value).focus)==null||l.call(o))):s.focus()})},ke=e=>{if(!e)return{onClick:x,onMousedown:x,onMouseup:x};let n=!1,s=!1;return{onClick:t=>{n&&s&&e(t),n=s=!1},onMousedown:t=>{n=t.target===t.currentTarget},onMouseup:t=>{s=t.target===t.currentTarget}}},se="_trap-focus-children",k=[],ye=e=>{if(k.length===0)return;const n=k[k.length-1][se];if(n.length>0&&e.code===$e.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const s=e.shiftKey,a=e.target===n[0],o=e.target===n[n.length-1];a&&s&&(e.preventDefault(),n[n.length-1].focus()),o&&!s&&(e.preventDefault(),n[0].focus())}},cn={beforeMount(e){e[se]=ge(e),k.push(e),k.length<=1&&document.addEventListener("keydown",ye)},updated(e){D(()=>{e[se]=ge(e)})},unmounted(){k.shift(),k.length===0&&document.removeEventListener("keydown",ye)}},fn=Ye({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:fe([String,Array,Object])},zIndex:{type:fe([String,Number])}}),mn={click:e=>e instanceof MouseEvent};var pn=we({name:"ElOverlay",props:fn,emits:mn,setup(e,{slots:n,emit:s}){const a=ae("overlay"),o=f=>{s("click",f)},{onClick:l,onMousedown:t,onMouseup:d}=ke(e.customMaskEvent?void 0:o);return()=>e.mask?E("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:l,onMousedown:t,onMouseup:d},[oe(n,"default")],te.STYLE|te.CLASS|te.PROPS,["onClick","onMouseup","onMousedown"]):je("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[oe(n,"default")])}});const vn=pn,gn=we({name:"ElMessageBox",directives:{TrapFocus:cn},components:{ElButton:Re,ElFocusTrap:xe,ElInput:Ue,ElOverlay:vn,ElIcon:ze,...Ve},inheritAttrs:!1,props:{buttonSize:{type:String,validator:_e},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{t:s}=en(),a=ae("message-box"),o=A(!1),{nextZIndex:l}=Ne(),t=Ge({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:l()}),d=I(()=>{const i=t.type;return{[a.bm("icon",i)]:i&&ue[i]}}),f=de(),g=de(),C=De(I(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),w=I(()=>t.icon||ue[t.type]||""),r=I(()=>!!t.message),m=A(),R=A(),M=A(),S=A(),F=A(),G=I(()=>t.confirmButtonClass);j(()=>t.inputValue,async i=>{await D(),e.boxType==="prompt"&&i!==null&&z()},{immediate:!0}),j(()=>o.value,i=>{var y,L;i&&(e.boxType!=="prompt"&&(t.autofocus?M.value=(L=(y=F.value)==null?void 0:y.$el)!=null?L:m.value:M.value=m.value),t.zIndex=l()),e.boxType==="prompt"&&(i?D().then(()=>{var le;S.value&&S.value.$el&&(t.autofocus?M.value=(le=K())!=null?le:m.value:M.value=m.value)}):(t.editorErrorMessage="",t.validateError=!1))});const Z=I(()=>e.draggable);rn(m,R,Z),he(async()=>{await D(),e.closeOnHashChange&&window.addEventListener("hashchange",B)}),Ee(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",B)});function B(){o.value&&(o.value=!1,D(()=>{t.action&&n("action",t.action)}))}const U=()=>{e.closeOnClickModal&&T(t.distinguishCancelAndClose?"close":"cancel")},J=ke(U),Y=i=>{if(t.inputType!=="textarea")return i.preventDefault(),T("confirm")},T=i=>{var y;e.boxType==="prompt"&&i==="confirm"&&!z()||(t.action=i,t.beforeClose?(y=t.beforeClose)==null||y.call(t,i,t,B):B())},z=()=>{if(e.boxType==="prompt"){const i=t.inputPattern;if(i&&!i.test(t.inputValue||""))return t.editorErrorMessage=t.inputErrorMessage||s("el.messagebox.error"),t.validateError=!0,!1;const y=t.inputValidator;if(typeof y=="function"){const L=y(t.inputValue);if(L===!1)return t.editorErrorMessage=t.inputErrorMessage||s("el.messagebox.error"),t.validateError=!0,!1;if(typeof L=="string")return t.editorErrorMessage=L,t.validateError=!0,!1}}return t.editorErrorMessage="",t.validateError=!1,!0},K=()=>{const i=S.value.$refs;return i.input||i.textarea},V=()=>{T("close")},Se=()=>{e.closeOnPressEscape&&V()};return e.lockScroll&&un(o),dn(o),{...Ze(t),ns:a,overlayEvent:J,visible:o,hasMessage:r,typeClass:d,contentId:f,inputId:g,btnSize:C,iconComponent:w,confirmButtonClasses:G,rootRef:m,focusStartRef:M,headerRef:R,inputRef:S,confirmRef:F,doClose:B,handleClose:V,onCloseRequested:Se,handleWrapperClick:U,handleInputEnter:Y,handleAction:T,t:s}}}),yn=["aria-label","aria-describedby"],bn=["aria-label"],hn=["id"];function En(e,n,s,a,o,l){const t=O("el-icon"),d=O("close"),f=O("el-input"),g=O("el-button"),C=O("el-focus-trap"),w=O("el-overlay");return c(),b(Ae,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=r=>e.$emit("vanish")),persisted:""},{default:p(()=>[_(E(w,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:p(()=>[v("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:u(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...r)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...r)),onMousedown:n[9]||(n[9]=(...r)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...r)),onMouseup:n[10]||(n[10]=(...r)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...r))},[E(C,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:p(()=>[v("div",{ref:"rootRef",class:u([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:me(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=X(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(c(),ee("div",{key:0,ref:"headerRef",class:u(e.ns.e("header"))},[v("div",{class:u(e.ns.e("title"))},[e.iconComponent&&e.center?(c(),b(t,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:p(()=>[(c(),b(W(e.iconComponent)))]),_:1},8,["class"])):P("v-if",!0),v("span",null,N(e.title),1)],2),e.showClose?(c(),ee("button",{key:0,type:"button",class:u(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=q(X(r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[E(t,{class:u(e.ns.e("close"))},{default:p(()=>[E(d)]),_:1},8,["class"])],42,bn)):P("v-if",!0)],2)):P("v-if",!0),v("div",{id:e.contentId,class:u(e.ns.e("content"))},[v("div",{class:u(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(c(),b(t,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:p(()=>[(c(),b(W(e.iconComponent)))]),_:1},8,["class"])):P("v-if",!0),e.hasMessage?(c(),ee("div",{key:1,class:u(e.ns.e("message"))},[oe(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(c(),b(W(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(c(),b(W(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:p(()=>[ne(N(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):P("v-if",!0)],2),_(v("div",{class:u(e.ns.e("input"))},[E(f,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=r=>e.inputValue=r),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:u({invalid:e.validateError}),onKeydown:q(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),v("div",{class:u(e.ns.e("errormsg")),style:me({visibility:e.editorErrorMessage?"visible":"hidden"})},N(e.editorErrorMessage),7)],2),[[Q,e.showInput]])],10,hn),v("div",{class:u(e.ns.e("btns"))},[e.showCancelButton?(c(),b(g,{key:0,loading:e.cancelButtonLoading,class:u([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=r=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=q(X(r=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:p(()=>[ne(N(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):P("v-if",!0),_(E(g,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:u([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=r=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=q(X(r=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:p(()=>[ne(N(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[Q,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,yn)]),_:3},8,["z-index","overlay-class","mask"]),[[Q,e.visible]])]),_:3})}var Cn=Ke(gn,[["render",En],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const H=new Map,wn=e=>{let n=document.body;return e.appendTo&&(Me(e.appendTo)&&(n=document.querySelector(e.appendTo)),ce(e.appendTo)&&(n=e.appendTo),ce(n)||(n=document.body)),n},Mn=(e,n,s=null)=>{const a=E(Cn,e,ve(e.message)||Be(e.message)?{default:ve(e.message)?e.message:()=>e.message}:null);return a.appContext=s,be(a,n),wn(e).appendChild(n.firstElementChild),a.component},Bn=()=>document.createElement("div"),Tn=(e,n)=>{const s=Bn();e.onVanish=()=>{be(null,s),H.delete(o)},e.onAction=l=>{const t=H.get(o);let d;e.showInput?d={value:o.inputValue,action:l}:d=l,e.callback?e.callback(d,a.proxy):l==="cancel"||l==="close"?e.distinguishCancelAndClose&&l!=="cancel"?t.reject("close"):t.reject("cancel"):t.resolve(d)};const a=Mn(e,s,n),o=a.proxy;for(const l in e)pe(e,l)&&!pe(o.$props,l)&&(o[l]=e[l]);return o.visible=!0,o};function $(e,n=null){if(!Te)return Promise.reject();let s;return Me(e)||Be(e)?e={message:e}:s=e.callback,new Promise((a,o)=>{const l=Tn(e,n??$._context);H.set(l,{options:e,callback:s,resolve:a,reject:o})})}const kn=["alert","confirm","prompt"],Sn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};kn.forEach(e=>{$[e]=Ln(e)});function Ln(e){return(n,s,a,o)=>{let l="";return Je(s)?(a=s,l=""):He(s)?l="":l=s,$(Object.assign({title:l,message:n,type:"",...Sn[e]},a,{boxType:e}),o)}}$.close=()=>{H.forEach((e,n)=>{n.doClose()}),H.clear()};$._context=null;const h=$;h.install=e=>{h._context=e._context,e.config.globalProperties.$msgbox=h,e.config.globalProperties.$messageBox=h,e.config.globalProperties.$alert=h.alert,e.config.globalProperties.$confirm=h.confirm,e.config.globalProperties.$prompt=h.prompt};const Yn=h;export{Yn as E,Dn as c,Un as f,Fn as g,ln as i,Hn as t};
