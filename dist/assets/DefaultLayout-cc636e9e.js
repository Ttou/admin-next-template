import{d as g,aa as q,m as b,_ as v,a as s,b as c,g as f,w as l,e as o,ab as x,ac as ee,ad as ne,I as O,c as M,ae as _,a6 as W,a7 as V,af as E,h as w,i as A,f as B,F as k,r as P,ag as te,X as N,ah as oe,ai as J,t as K,aj as H,a8 as se,B as Q,q as U,j as S,ak as ae,z as le,o as ce,al as j,a3 as I}from"./index-ceb77c2d.js";const re=g({name:"Content",setup(){const e=q();return{cachedTabs:b(()=>e.cachedTabs)}}});function ie(e,n,r,a,m,i){const t=s("router-view");return c(),f(t,null,{default:l(({Component:p,route:u})=>[o(ne,{name:"fade-slide",mode:"out-in",appear:""},{default:l(()=>[(c(),f(x,{max:20,include:e.cachedTabs},[(c(),f(ee(p),{key:u.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}const ue=v(re,[["render",ie]]),de=g({name:"Logo",components:{Icon:O}}),me="logo__O3W1z",pe="logoIcon__gvzS2",_e={logo:me,logoIcon:pe};function fe(e,n,r,a,m,i){const t=s("Icon");return c(),M("div",{class:_(e.$style.logo)},[o(t,{class:_(e.$style.logoIcon),icon:"logos:element"},null,8,["class"])],2)}const he={$style:_e},be=v(de,[["render",fe],["__cssModules",he]]),ye=g({name:"MainMenu",components:{Icon:O},props:{item:{type:Object,required:!0}},setup(e){const n=W(),r=V(),a=b(()=>e.item.meta?!e.item.meta.hidden:!1);function m(){n.path!==e.item.path&&r.push(e.item.path).catch(i=>{console.error(i)})}return{show:a,handleJump:m}}});function $e(e,n,r,a,m,i){const t=s("Icon"),p=s("el-menu-item");return e.show?(c(),f(p,{key:0,index:e.item.path,onClick:e.handleJump},{title:l(()=>[e.item.meta.icon?(c(),f(t,{key:0,icon:e.item.meta.icon},null,8,["icon"])):E("",!0),w("span",null,A(e.item.meta.title),1)]),_:1},8,["index","onClick"])):E("",!0)}const Y=v(ye,[["render",$e]]),ge=g({name:"SubMenu",components:{Icon:O,MainMenu:Y},props:{item:{type:Object,required:!0}},setup(e){return{onlyOneChild:b(()=>e.item.children.length===1?e.item.meta?!e.item.meta.alwaysShow:!0:!1)}}});function ve(e,n,r,a,m,i){const t=s("MainMenu"),p=s("Icon"),u=s("sub-menu",!0),d=s("el-sub-menu");return e.onlyOneChild?(c(),f(t,{key:0,item:e.item.children[0]},null,8,["item"])):(c(),f(d,{key:1,index:e.item.path},{title:l(()=>[e.item.meta.icon?(c(),f(p,{key:0,class:"el-icon",icon:e.item.meta.icon},null,8,["icon"])):E("",!0),w("span",null,A(e.item.meta.title),1)]),default:l(()=>[(c(!0),M(k,null,B(e.item.children,$=>(c(),M(k,{key:$.path},[$.children?(c(),f(u,{key:0,item:$},null,8,["item"])):(c(),f(t,{key:1,item:$},null,8,["item"]))],64))),128))]),_:1},8,["index"]))}const Me=v(ge,[["render",ve]]),Ce=g({name:"Menu",components:{MainMenu:Y,SubMenu:Me},setup(){const e=P({list:[]}),n=W(),r=te(),a=N(),m=b(()=>oe(r.routes)),i=b(()=>a.$state),t=b(()=>n.path);function p(d,$=""){for(const y of d)if(y.path=$+(y.path.startsWith("/")?y.path:`/${y.path}`),delete y.component,delete y.redirect,y.children){if(y.children.length===0)continue;p(y.children,y.path)}return d}function u(){const d=p(m.value);e.list=d}return J(()=>{u()}),{...K(e),vars:H,activeMenu:t,setting:i}}}),Te="menu__JeSdZ",Se={menu:Te};function we(e,n,r,a,m,i){const t=s("SubMenu"),p=s("MainMenu"),u=s("el-menu");return c(),f(u,{mode:"vertical",class:_(e.$style.menu),defaultActive:e.activeMenu,backgroundColor:e.vars.menuBg,textColor:e.vars.menuText,activeTextColor:e.vars.menuActiveText,collapse:!e.setting.sideOpened,collapseTransition:!1,uniqueOpened:""},{default:l(()=>[(c(!0),M(k,null,B(e.list,d=>(c(),M(k,{key:d.path},[d.children?(c(),f(t,{key:0,item:d},null,8,["item"])):(c(),f(p,{key:1,item:d},null,8,["item"]))],64))),128))]),_:1},8,["class","defaultActive","backgroundColor","textColor","activeTextColor","collapse"])}const ke={$style:Se},Oe=v(Ce,[["render",we],["__cssModules",ke]]),Ie=g({name:"Avatar",components:{Icon:O},setup(){const e=P({commandMap:{logout:()=>m()}}),n=V(),r=se(),{$msgbox:a}=Q();function m(){a.confirm("确认退出登录？","提示",{type:"warning"}).then(async()=>{await r.logout(),n.replace({path:"/login"})}).catch(()=>{})}function i(t){e.commandMap[t]()}return{handleCommand:i}}}),De="avatarWrapper__qJ38h",Fe="avatar__XLkyv",Le="avatarDropdownMenu__vY1TP",Re={avatarWrapper:De,avatar:Fe,avatarDropdownMenu:Le},Ae=w("span",null,"退出登录",-1);function We(e,n,r,a,m,i){const t=s("Icon"),p=s("el-dropdown-item"),u=s("el-dropdown-menu"),d=s("el-dropdown");return c(),f(d,{onCommand:e.handleCommand},{default:l(()=>[w("div",{class:_(e.$style.avatarWrapper)},[o(t,{class:_(e.$style.avatar),icon:"custom:avatar",inline:""},null,8,["class"])],2)]),dropdown:l(()=>[o(u,{class:_(e.$style.avatarDropdownMenu)},{default:l(()=>[o(p,{command:"logout"},{default:l(()=>[o(t,{icon:"ant-design:logout-outlined",inline:""}),Ae]),_:1})]),_:1},8,["class"])]),_:1},8,["onCommand"])}const Be={$style:Re},Pe=v(Ie,[["render",We],["__cssModules",Be]]),Ne=g({name:"Breadcrumb",setup(){const e=P({breadcrumbs:[]}),n=W();function r(){var i;const a=n.matched,m=[];for(const t of a)t.path!=="/"&&m.push({path:t.path.startsWith("/")?t.path:`/${t.path}`,title:((i=t.meta)==null?void 0:i.title)||"-"});e.breadcrumbs=m}return U(()=>n.path,a=>{a.startsWith("/redirect/")||r()}),J(()=>{r()}),{...K(e)}}}),Ee="breadcrumb__45QCe",He={breadcrumb:Ee};function Ve(e,n,r,a,m,i){const t=s("el-breadcrumb-item"),p=s("el-breadcrumb");return c(),f(p,{class:_(e.$style.breadcrumb)},{default:l(()=>[(c(!0),M(k,null,B(e.breadcrumbs,(u,d)=>(c(),M(k,{key:u.path},[d===e.breadcrumbs.length-1?(c(),f(t,{key:0},{default:l(()=>[S(A(u.title),1)]),_:2},1024)):(c(),f(t,{key:1,to:{path:u.path}},{default:l(()=>[S(A(u.title),1)]),_:2},1032,["to"]))],64))),128))]),_:1},8,["class"])}const Ke={$style:He},ze=v(Ne,[["render",Ve],["__cssModules",Ke]]),je=g({name:"ScreenFull",components:{Icon:O},setup(){const{isFullscreen:e,isSupported:n,toggle:r}=ae(),{$message:a}=Q(),m=b(()=>e.value?"ant-design:fullscreen-exit-outlined":"ant-design:fullscreen-outlined");function i(){n?r():a.warning("浏览器不支持全屏")}return{icon:m,handleClick:i}}}),qe="screenFull__hZ-RV",Je={screenFull:qe};function Qe(e,n,r,a,m,i){const t=s("Icon");return c(),M("div",{title:"全屏",class:_(e.$style.screenFull),onClick:n[0]||(n[0]=(...p)=>e.handleClick&&e.handleClick(...p))},[o(t,{icon:e.icon,inline:""},null,8,["icon"])],2)}const Ue={$style:Je},Ye=v(je,[["render",Qe],["__cssModules",Ue]]),Ze=g({name:"Trigger",components:{Icon:O},setup(){const e=N(),n=b(()=>!e.sideOpened),r=b(()=>n.value?"ant-design:menu-unfold-outlined":"ant-design:menu-fold-outlined");function a(){e.change({key:"sideOpened",value:n.value})}return{collapsed:n,icon:r,handleClick:a}}}),Ge="trigger__lcYms",Xe={trigger:Ge};function xe(e,n,r,a,m,i){const t=s("Icon");return c(),f(t,{class:_(e.$style.trigger),icon:e.icon,onClick:e.handleClick},null,8,["class","icon","onClick"])}const en={$style:Xe},nn=v(Ze,[["render",xe],["__cssModules",en]]),tn=g({name:"Navbar",components:{Avatar:Pe,Breadcrumb:ze,ScreenFull:Ye,Trigger:nn}}),on="navbar__JDd-o",sn="left__Yp02w",an="right__Z-Ibh",ln={navbar:on,left:sn,right:an};function cn(e,n,r,a,m,i){const t=s("Trigger"),p=s("Breadcrumb"),u=s("ScreenFull"),d=s("Avatar"),$=s("el-space");return c(),M("div",{class:_(e.$style.navbar)},[w("div",{class:_(e.$style.left)},[o(t),o(p)],2),w("div",{class:_(e.$style.right)},[o($,{size:15},{default:l(()=>[o(u),o(d)]),_:1})],2)],2)}const rn={$style:ln},un=v(tn,[["render",cn],["__cssModules",rn]]),dn=g({name:"Tabbar",components:{Icon:O},setup(){const e=P({activeKey:"",commandMap:{refresh:()=>y(),closeLeft:()=>L(),closeRight:()=>R(),closeOther:()=>D(),closeAll:()=>Z()}}),n=W(),r=V(),a=q(),m=N(),i=b(()=>a.visitedTabs),t=b(()=>i.value.findIndex(h=>h.fullPath===e.activeKey)===0),p=b(()=>i.value.findIndex(h=>h.fullPath===e.activeKey)===i.value.length-1),u=b(()=>i.value.length<=1);function d(h){return e.activeKey===h.fullPath}function $(){const{name:h,path:T,fullPath:F}=n;return h&&[j.LOGIN,j.ERROR].indexOf(T)===-1&&(a.addTab(n),e.activeKey=F),!1}function y(){a.delCachedTab(n).then(()=>{const{fullPath:h}=n;le(()=>{r.replace({path:"/redirect"+h})})})}function C(h){const T=i.value.find(F=>F.fullPath===h);a.delTab(T).then(({visitedTabs:F})=>{d(T)&&z(F)})}function L(){a.delLeftTabs(n)}function R(){a.delRightTabs(n)}function D(){a.delOthersTabs(n)}function Z(){a.delAllTabs().then(({visitedTabs:h})=>{z(h)})}function G(h){r.push(h)}function z(h){const T=h.slice(-1)[0];T?r.push(T.fullPath):n.name===m.homeRoute.name?r.replace({path:"/redirect"+n.fullPath}):r.replace("/")}function X(h){e.commandMap[h]()}return U(()=>n.path,()=>{$()}),ce(()=>{$()}),{...K(e),visitedTabs:i,closeLeftDisabled:t,closeRightDisabled:p,closeOtherDisabled:u,handleCloseTab:C,handleSelectTab:G,handleCommand:X}}}),mn="tabbar__2iI-k",pn="tabsMenu__sonef",_n="tabsDropdownMenu__x75gy",fn={tabbar:mn,tabsMenu:pn,tabsDropdownMenu:_n};function hn(e,n,r,a,m,i){const t=s("el-tab-pane"),p=s("el-tabs"),u=s("Icon"),d=s("el-dropdown-item"),$=s("el-dropdown-menu"),y=s("el-dropdown");return c(),M("div",{class:_(e.$style.tabbar)},[o(p,{modelValue:e.activeKey,"onUpdate:modelValue":n[0]||(n[0]=C=>e.activeKey=C),onTabChange:e.handleSelectTab,onTabRemove:e.handleCloseTab},{default:l(()=>[(c(!0),M(k,null,B(e.visitedTabs,C=>(c(),f(t,{key:C.fullPath,name:C.fullPath,label:C.meta.title,closable:""},null,8,["name","label"]))),128))]),_:1},8,["modelValue","onTabChange","onTabRemove"]),o(y,{placement:"bottom-end",onCommand:e.handleCommand},{default:l(()=>[w("div",{class:_(e.$style.tabsMenu)},[o(u,{icon:"ant-design:down-outlined",inline:""})],2)]),dropdown:l(()=>[o($,{class:_(e.$style.tabsDropdownMenu)},{default:l(()=>[o(d,{command:"refresh"},{default:l(()=>[o(u,{icon:"ant-design:reload-outlined",inline:""}),S(" 刷新页面 ")]),_:1}),o(d,{command:"closeLeft",disabled:e.closeLeftDisabled,divided:""},{default:l(()=>[o(u,{icon:"ant-design:vertical-right-outlined",inline:""}),S(" 关闭左侧 ")]),_:1},8,["disabled"]),o(d,{command:"closeRight",disabled:e.closeRightDisabled},{default:l(()=>[o(u,{icon:"ant-design:vertical-left-outlined",inline:""}),S(" 关闭右侧 ")]),_:1},8,["disabled"]),o(d,{command:"closeOther",disabled:e.closeOtherDisabled,divided:""},{default:l(()=>[o(u,{icon:"ant-design:close-outlined",inline:""}),S(" 关闭其它 ")]),_:1},8,["disabled"]),o(d,{command:"closeAll"},{default:l(()=>[o(u,{icon:"ant-design:close-circle-outlined",inline:""}),S(" 关闭所有 ")]),_:1})]),_:1},8,["class"])]),_:1},8,["onCommand"])],2)}const bn={$style:fn},yn=v(dn,[["render",hn],["__cssModules",bn]]),$n=g({name:"DefaultLayout",components:{Content:ue,Logo:be,Menu:Oe,Navbar:un,Tabbar:yn},setup(){const e=N(),n=b(()=>e.$state),r=b(()=>n.value.sideOpened?n.value.sideOpenedWidth:n.value.sideClosedWidth),a=b(()=>{const t={};return n.value.sideOpened?(t.marginLeft=n.value.sideOpenedWidth,t.width=`calc(100vw - ${n.value.sideOpenedWidth})`):(t.marginLeft=n.value.sideClosedWidth,t.width=`calc(100vw - ${n.value.sideClosedWidth})`),t}),m=b(()=>{const t={height:H.headerHeight};return n.value.fixedHeader&&(t.position="sticky",t.top="0px"),t}),i=b(()=>{const t={};return n.value.fixedHeader&&(t.position="sticky",t.top=H.headerHeight),t});return{setting:n,asideWidth:r,mainStyle:a,headerStyle:m,tabbarStyle:i}}}),gn="layout__Cm3G4",vn="layoutSide__Qx-Oj",Mn="layoutMain__RvQoN",Cn="layoutHeader__1O0br",Tn="layoutContent__0Ei-r",Sn={layout:gn,layoutSide:vn,layoutMain:Mn,layoutHeader:Cn,layoutContent:Tn};function wn(e,n,r,a,m,i){const t=s("Logo"),p=s("Menu"),u=s("el-scrollbar"),d=s("el-aside"),$=s("Navbar"),y=s("el-header"),C=s("Tabbar"),L=s("Content"),R=s("el-main"),D=s("el-container");return c(),f(D,{class:_(e.$style.layout)},{default:l(()=>[o(d,{class:_(e.$style.layoutSide),width:e.asideWidth},{default:l(()=>[o(t),o(u,null,{default:l(()=>[o(p)]),_:1})]),_:1},8,["class","width"]),e.setting.fixedHeader?(c(),f(D,{key:0,class:_(e.$style.layoutMain),style:I(e.mainStyle)},{default:l(()=>[o(y,{class:_(e.$style.layoutHeader),style:I(e.headerStyle)},{default:l(()=>[o($)]),_:1},8,["class","style"]),o(C,{style:I(e.tabbarStyle)},null,8,["style"]),o(u,{id:"page"},{default:l(()=>[o(R,{class:_(e.$style.layoutContent)},{default:l(()=>[o(L)]),_:1},8,["class"])]),_:1})]),_:1},8,["class","style"])):(c(),f(u,{key:1},{default:l(()=>[o(D,{class:_(e.$style.layoutMain),style:I(e.mainStyle)},{default:l(()=>[o(y,{class:_(e.$style.layoutHeader),style:I(e.headerStyle)},{default:l(()=>[o($)]),_:1},8,["class","style"]),o(C,{style:I(e.tabbarStyle)},null,8,["style"]),o(R,{class:_(e.$style.layoutContent)},{default:l(()=>[o(L)]),_:1},8,["class"])]),_:1},8,["class","style"])]),_:1}))]),_:1},8,["class"])}const kn={$style:Sn},In=v($n,[["render",wn],["__cssModules",kn]]);export{In as default};
