import{d as e,u as t,c as l,a1 as a,ae as n,af as s,r as i,e as u,T as r,ag as d,ah as h,ai as o,i as c,aj as m,ak as p,O as f,al as b,H as v,am as y,an as g,ao as T,ap as C,aq as k,ar as O,as as S,at as R,au as K,av as x,aw as L,ax as w,z as j,o as D,ay as I,az as H,aA as $,J as W,M,aB as N,aC as A,aD as F,aE as P,aF as q}from"./vendor.152cd490.js";import{u as z,a as B,S as U,p as E,b as G,c as J,R as Q}from"./index.e15479f8.js";/* empty css              */var V=e({name:"Content",setup(){const e=z();return{cachedTabs:t((()=>e.cachedTabs))}},render(){return l(a,null,{default:({Component:e,route:t})=>l(n,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[l(s,{max:20,include:this.cachedTabs},[l(e,{key:t.fullPath},null)])]})})}}),X=e({name:"Logo",setup(){const e=i({}),l=B(),a=t((()=>l.$state));return u(a,(t=>{e.value.height=t.siderLogoHeight,e.value.borderRight="light"===t.siderTheme?"1px solid #f0f0f0":"unset"}),{deep:!0,immediate:!0}),{style:e}},render(){return l("div",{class:"logo",style:this.style},[l(U,{class:"logo-icon",name:"ant-design"},null)])}}),Y=e({name:"MainMenu",props:{item:E.object().isRequired},setup:e=>({show:t((()=>!!e.item.meta&&!e.item.meta.hidden))}),render(){return this.show?l(r.Item,{icon:this.item.meta.icon,key:this.item.path},{default:()=>[l(d,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),Z=e({name:"SubMenu",props:{item:E.object().isRequired},setup:e=>({onlyOneChild:t((()=>1===e.item.children.length&&(!e.item.meta||!e.item.meta.alwaysShow)))}),render(){return this.onlyOneChild?l(Y,{item:this.item.children[0]},null):l(r.SubMenu,{key:this.item.path,icon:this.item.meta.icon,title:this.item.meta.title},{default:()=>{var e;return[null==(e=this.item.children)?void 0:e.map((e=>e.children?l(h("sub-menu"),{item:e},null):l(Y,{item:e},null)))]}})}});var _=e({name:"Menu",components:{SubMenu:Z},setup(){const e=i([]),l=i([]),a=i([]),n=o(),s=G(),r=B(),d=t((()=>m(s.routes))),h=t((()=>r.$state)),c=t((()=>{const e={};return e.minHeight=`calc(100vh - ${h.value.siderLogoHeight})`,e}));function p(e,t=""){for(const l of e)if("Dashboard"!==l.name?l.path=t+(l.path.startsWith("/")?l.path:`/${l.path}`):l.path=`/${l.path}`,delete l.component,delete l.redirect,l.children){if(0===l.children.length)continue;p(l.children,l.path)}return e}function f(){const t=p(d.value);e.value=t}return u((()=>n.path),(e=>{f(),l.value=[...n.matched.map((e=>e.path))],a.value=[e]}),{immediate:!0}),{list:e,openKeys:l,selectedKeys:a,settings:h,style:c}},render(){let e;return l(r,{mode:"inline",theme:this.settings.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":e=>this.openKeys=e,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":e=>this.selectedKeys=e,style:this.style},"function"==typeof(t=e=this.list.map((e=>e.children?l(Z,{item:e},null):l(Y,{item:e},null))))||"[object Object]"===Object.prototype.toString.call(t)&&!c(t)?e:{default:()=>[e]});var t}}),ee=e({name:"Avatar",setup(){const e=p(),t=J();return{handleLogout:function(){y.confirm({title:"提示",icon:l(g,null,null),content:"确认退出登录？",async onOk(){await t.logout(),e.replace({path:"/login"})}})}}},render(){return l(f,null,{default:()=>l("div",{class:"avatar-wrapper"},[l(U,{name:"avatar",class:"avatar"},null)]),overlay:()=>l(r,null,{default:()=>[l(r.Item,{onClick:this.handleLogout},{default:()=>[l(b,null,null),l("span",null,[v("退出登录")])]})]})})}}),te=e({name:"Breadcrumb",setup(){const e=i([]),t=p();return T((()=>{const l=t.currentRoute.value;e.value=function(e){var t;const l=[];for(const a of e){if("/"===a.path)continue;const e={path:a.path.startsWith("/")?a.path:`/${a.path}`,breadcrumbName:(null==(t=a.meta)?void 0:t.title)||"undefined",children:[]};a.children&&(e.children=a.children.map((e=>{var t;return{path:a.path+`/${e.path}`,breadcrumbName:(null==(t=e.meta)?void 0:t.title)||"undefined"}}))),l.push(e)}return l}(l.matched)})),{routes:e,getBreadcrumbName:function(e){var t;return(null==(t=e.meta)?void 0:t.title)||"undefined"}}},render(){return l(C,{class:"breadcrumb",routes:this.routes,itemRender:({route:e,routes:t})=>t.indexOf(e)===t.length-1?l("span",null,[e.breadcrumbName]):l(d,{to:e.path},{default:()=>[e.breadcrumbName]})},null)}}),le=e({name:"ScreenFull",setup(){const{isFullscreen:e,isSupported:t,toggle:l}=k();return{isFullscreen:e,handleClick:function(){t?l():R.warn("浏览器不支持全屏")}}},render(){return l("div",{title:"全屏",style:{cursor:"pointer"},onClick:this.handleClick},[this.isFullscreen?l(O,null,null):l(S,null,null)])}}),ae=e({name:"SiderTheme",setup(){const e=B(),l=t((()=>e.siderTheme));return{siderTheme:l,handleClick:function(){e.change({key:"siderTheme",value:"dark"===l.value?"light":"dark"})}}},render(){return l("div",{title:"主题",style:{cursor:"pointer"},onClick:this.handleClick},["dark"===this.siderTheme?l(K,null,null):l(x,null,null)])}}),ne=e({name:"Trigger",setup(){const e=B(),l=t((()=>!e.siderOpened));return{collapsed:l,handleClick:function(){e.change({key:"siderOpened",value:l.value})}}},render(){return this.collapsed?l(L,{class:"trigger",onClick:this.handleClick},null):l(w,{class:"trigger",onClick:this.handleClick},null)}}),se=e({name:"Header",render:()=>l("div",{class:"navbar"},[l("div",{class:"left"},[l(ne,null,null),l(te,null,null)]),l("div",{class:"right"},[l(j,null,{default:()=>[l(le,null,null),l(ae,null,null),l(ee,null,null)]})])])});var ie=e({name:"Tabs",setup(){const e=i(""),l=o(),a=p(),n=z(),s=t((()=>n.visitedTabs)),r=t((()=>0===s.value.findIndex((t=>t.path===e.value)))),d=t((()=>s.value.findIndex((t=>t.path===e.value))===s.value.length-1)),h=t((()=>s.value.length<=1));function c(){const{name:t,path:a}=l;return t&&-1===[Q.LOGIN,Q.ERROR].indexOf(a)&&(n.addTab(l),e.value=a),!1}function m(e){const t=e.slice(-1)[0];t?a.push(t.fullPath):"Dashboard"===l.name?a.replace({path:"/redirect"+l.fullPath}):a.push("/")}return u((()=>l.path),(()=>{c()})),D((()=>{c()})),{activeKey:e,visitedTabs:s,closeLeftDisabled:r,closeRightDisabled:d,closeOtherDisabled:h,handleCloseTab:function(t){n.delTab(t).then((({visitedTabs:l})=>{(function(t){return e.value===t.path})(t)&&m(l)}))},handleCloseLeftTabs:function(){n.delLeftTabs(l)},handleCloseRightTabs:function(){n.delRightTabs(l)},handleCloseOtherTabs:function(){n.delOthersTabs(l)},handleCloseAllTabs:function(){n.delAllTabs().then((({visitedTabs:e})=>{m(e)}))},handleSelectTab:function(e){a.push(e)},handleRefreshTab:function(){n.delCachedTab(l).then((()=>{const{fullPath:e}=l;P((()=>{a.replace({path:"/redirect"+e})}))}))}}},render(){let e;return l("div",{class:"tabbar"},[l(I,{activeKey:this.activeKey,"onUpdate:activeKey":e=>this.activeKey=e,onChange:this.handleSelectTab},(t=e=this.visitedTabs.map((e=>l(I.TabPane,{tab:()=>l("div",{class:"tab-content"},[l("span",null,[e.meta.title]),l(H,{onClick:$((()=>this.handleCloseTab(e)),["stop"])},null)]),key:e.path},null))),"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!c(t)?e:{default:()=>[e]})),l(f,{overlayStyle:{zIndex:100002}},{default:()=>l("div",{class:"tabs-menu"},[l(W,null,null)]),overlay:()=>l(r,null,{default:()=>[l(r.Item,{onClick:this.handleRefreshTab},{default:()=>[l(M,null,null),v("刷新页面")]}),l(r.Divider,null,null),l(r.Item,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[l(N,null,null),v("关闭左侧")]}),l(r.Item,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[l(A,null,null),v("关闭右侧")]}),l(r.Divider,null,null),l(r.Item,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[l(H,null,null),v("关闭其它")]}),l(r.Item,{onClick:this.handleCloseAllTabs},{default:()=>[l(F,null,null),v("关闭所有")]})]})})]);var t}}),ue=e({name:"Layout",setup(){const e=B(),l=t((()=>e.$state)),a=t((()=>{const e={};return l.value.siderOpened?(e.marginLeft=l.value.siderOpenedWidth,e.width=`calc(100vw - ${l.value.siderOpenedWidth})`):(e.marginLeft=l.value.siderClosedWidth,e.width=`calc(100vw - ${l.value.siderClosedWidth})`),e})),n=t((()=>{const e={height:l.value.headerHeight};return l.value.fixedHeader&&(e.position="sticky",e.top="0px"),e})),s=t((()=>{const e={};return l.value.fixedHeader&&(e.position="sticky",e.top=l.value.headerHeight),e}));return{settings:l,mainStyle:a,headerStyle:n,tabbarStyle:s}},render(){return l(q,{class:"layout"},{default:()=>[l(q.Sider,{class:"layout-sider",collapsed:!this.settings.siderOpened,trigger:null,theme:this.settings.siderTheme,width:this.settings.siderOpenedWidth,collapsedWidth:this.settings.siderClosedWidth,collapsible:!0},{default:()=>[l(X,null,null),l(_,null,null)]}),l(q,{class:"layout-main",style:this.mainStyle},{default:()=>[l(q.Header,{class:"layout-header",style:this.headerStyle},{default:()=>[l(se,null,null)]}),l(ie,{style:this.tabbarStyle},null),l(q.Content,{class:"layout-content"},{default:()=>[l(V,null,null)]})]})]})}});export{ue as default};
