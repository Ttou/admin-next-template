import{c as T,u as L,I as j}from"./index-7f8506ed.js";import{u as z,b as Q}from"./vue-router-22a2ab70.js";import{I as H,b as G}from"./index-77678eab.js";import{d as Y,r as O,c as Z,o as k,f as l,q as $,C as q}from"./runtime-core.esm-bundler-d3f66853.js";import{F as D,e as N}from"./Form-8ff6e022.js";import{B as J}from"./button-5adece00.js";import"./cloneDeep-a0bb90cb.js";import"./_getPrototype-d283ffb9.js";import"./ajax-be8adbaf.js";import"./useConfigInject-bc8cb14d.js";import"./omit-5b6448ed.js";import"./vnode-f0ed5691.js";import"./index-66f9ca29.js";import"./isPlainObject-16ee9a1b.js";import"./raf-436af0c2.js";import"./Col-166ee151.js";import"./useFlexGapSupport-89e64ba1.js";import"./collapseMotion-6761c192.js";import"./_flatRest-bc1d4817.js";import"./omit-486f4e1f.js";import"./wave-c3e26277.js";var B={},K=s=>encodeURIComponent(s).replace(/[!'()*]/g,c=>`%${c.charCodeAt(0).toString(16).toUpperCase()}`),V="%[a-f0-9]{2}",R=new RegExp("("+V+")|([^%]+?)","gi"),M=new RegExp("("+V+")+","gi");function U(s,c){try{return[decodeURIComponent(s.join(""))]}catch{}if(s.length===1)return s;c=c||1;var f=s.slice(0,c),m=s.slice(c);return Array.prototype.concat.call([],U(f),U(m))}function W(s){try{return decodeURIComponent(s)}catch{for(var c=s.match(R)||[],f=1;f<c.length;f++)s=U(c,f).join(""),c=s.match(R)||[];return s}}function X(s){for(var c={"%FE%FF":"��","%FF%FE":"��"},f=M.exec(s);f;){try{c[f[0]]=decodeURIComponent(f[0])}catch{var m=W(f[0]);m!==f[0]&&(c[f[0]]=m)}f=M.exec(s)}c["%C2"]="�";for(var F=Object.keys(c),h=0;h<F.length;h++){var u=F[h];s=s.replace(new RegExp(u,"g"),c[u])}return s}var v=function(s){if(typeof s!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof s+"`");try{return s=s.replace(/\+/g," "),decodeURIComponent(s)}catch{return X(s)}},rr=(s,c)=>{if(!(typeof s=="string"&&typeof c=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(c==="")return[s];const f=s.indexOf(c);return f===-1?[s]:[s.slice(0,f),s.slice(f+c.length)]},er=function(s,c){for(var f={},m=Object.keys(s),F=Array.isArray(c),h=0;h<m.length;h++){var u=m[h],y=s[u];(F?c.indexOf(u)!==-1:c(u,y,s))&&(f[u]=y)}return f};(function(s){const c=K,f=v,m=rr,F=er,h=r=>r==null,u=Symbol("encodeFragmentIdentifier");function y(r){switch(r.arrayFormat){case"index":return e=>(n,t)=>{const a=n.length;return t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,[d(e,r),"[",a,"]"].join("")]:[...n,[d(e,r),"[",d(a,r),"]=",d(t,r)].join("")]};case"bracket":return e=>(n,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,[d(e,r),"[]"].join("")]:[...n,[d(e,r),"[]=",d(t,r)].join("")];case"colon-list-separator":return e=>(n,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,[d(e,r),":list="].join("")]:[...n,[d(e,r),":list=",d(t,r)].join("")];case"comma":case"separator":case"bracket-separator":{const e=r.arrayFormat==="bracket-separator"?"[]=":"=";return n=>(t,a)=>a===void 0||r.skipNull&&a===null||r.skipEmptyString&&a===""?t:(a=a===null?"":a,t.length===0?[[d(n,r),e,d(a,r)].join("")]:[[t,d(a,r)].join(r.arrayFormatSeparator)])}default:return e=>(n,t)=>t===void 0||r.skipNull&&t===null||r.skipEmptyString&&t===""?n:t===null?[...n,d(e,r)]:[...n,[d(e,r),"=",d(t,r)].join("")]}}function C(r){let e;switch(r.arrayFormat){case"index":return(n,t,a)=>{if(e=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!e){a[n]=t;return}a[n]===void 0&&(a[n]={}),a[n][e[1]]=t};case"bracket":return(n,t,a)=>{if(e=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),!e){a[n]=t;return}if(a[n]===void 0){a[n]=[t];return}a[n]=[].concat(a[n],t)};case"colon-list-separator":return(n,t,a)=>{if(e=/(:list)$/.exec(n),n=n.replace(/:list$/,""),!e){a[n]=t;return}if(a[n]===void 0){a[n]=[t];return}a[n]=[].concat(a[n],t)};case"comma":case"separator":return(n,t,a)=>{const o=typeof t=="string"&&t.includes(r.arrayFormatSeparator),i=typeof t=="string"&&!o&&p(t,r).includes(r.arrayFormatSeparator);t=i?p(t,r):t;const g=o||i?t.split(r.arrayFormatSeparator).map(P=>p(P,r)):t===null?t:p(t,r);a[n]=g};case"bracket-separator":return(n,t,a)=>{const o=/(\[\])$/.test(n);if(n=n.replace(/\[\]$/,""),!o){a[n]=t&&p(t,r);return}const i=t===null?[]:t.split(r.arrayFormatSeparator).map(g=>p(g,r));if(a[n]===void 0){a[n]=i;return}a[n]=[].concat(a[n],i)};default:return(n,t,a)=>{if(a[n]===void 0){a[n]=t;return}a[n]=[].concat(a[n],t)}}}function S(r){if(typeof r!="string"||r.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(r,e){return e.encode?e.strict?c(r):encodeURIComponent(r):r}function p(r,e){return e.decode?f(r):r}function w(r){return Array.isArray(r)?r.sort():typeof r=="object"?w(Object.keys(r)).sort((e,n)=>Number(e)-Number(n)).map(e=>r[e]):r}function I(r){const e=r.indexOf("#");return e!==-1&&(r=r.slice(0,e)),r}function A(r){let e="";const n=r.indexOf("#");return n!==-1&&(e=r.slice(n)),e}function E(r){r=I(r);const e=r.indexOf("?");return e===-1?"":r.slice(e+1)}function x(r,e){return e.parseNumbers&&!Number.isNaN(Number(r))&&typeof r=="string"&&r.trim()!==""?r=Number(r):e.parseBooleans&&r!==null&&(r.toLowerCase()==="true"||r.toLowerCase()==="false")&&(r=r.toLowerCase()==="true"),r}function _(r,e){e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e),S(e.arrayFormatSeparator);const n=C(e),t=Object.create(null);if(typeof r!="string"||(r=r.trim().replace(/^[?#&]/,""),!r))return t;for(const a of r.split("&")){if(a==="")continue;let[o,i]=m(e.decode?a.replace(/\+/g," "):a,"=");i=i===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?i:p(i,e),n(p(o,e),i,t)}for(const a of Object.keys(t)){const o=t[a];if(typeof o=="object"&&o!==null)for(const i of Object.keys(o))o[i]=x(o[i],e);else t[a]=x(o,e)}return e.sort===!1?t:(e.sort===!0?Object.keys(t).sort():Object.keys(t).sort(e.sort)).reduce((a,o)=>{const i=t[o];return Boolean(i)&&typeof i=="object"&&!Array.isArray(i)?a[o]=w(i):a[o]=i,a},Object.create(null))}s.extract=E,s.parse=_,s.stringify=(r,e)=>{if(!r)return"";e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e),S(e.arrayFormatSeparator);const n=i=>e.skipNull&&h(r[i])||e.skipEmptyString&&r[i]==="",t=y(e),a={};for(const i of Object.keys(r))n(i)||(a[i]=r[i]);const o=Object.keys(a);return e.sort!==!1&&o.sort(e.sort),o.map(i=>{const g=r[i];return g===void 0?"":g===null?d(i,e):Array.isArray(g)?g.length===0&&e.arrayFormat==="bracket-separator"?d(i,e)+"[]":g.reduce(t(i),[]).join("&"):d(i,e)+"="+d(g,e)}).filter(i=>i.length>0).join("&")},s.parseUrl=(r,e)=>{e=Object.assign({decode:!0},e);const[n,t]=m(r,"#");return Object.assign({url:n.split("?")[0]||"",query:_(E(r),e)},e&&e.parseFragmentIdentifier&&t?{fragmentIdentifier:p(t,e)}:{})},s.stringifyUrl=(r,e)=>{e=Object.assign({encode:!0,strict:!0,[u]:!0},e);const n=I(r.url).split("?")[0]||"",t=s.extract(r.url),a=s.parse(t,{sort:!1}),o=Object.assign(a,r.query);let i=s.stringify(o,e);i&&(i=`?${i}`);let g=A(r.url);return r.fragmentIdentifier&&(g=`#${e[u]?d(r.fragmentIdentifier,e):r.fragmentIdentifier}`),`${n}${i}${g}`},s.pick=(r,e,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[u]:!1},n);const{url:t,query:a,fragmentIdentifier:o}=s.parseUrl(r,n);return s.stringifyUrl({url:t,query:F(a,e),fragmentIdentifier:o},n)},s.exclude=(r,e,n)=>{const t=Array.isArray(e)?a=>!e.includes(a):(a,o)=>!e(a,o);return s.pick(r,t,n)}})(B);const tr="view__uyu0o",nr="top__w2bkm",ar="header__nY81t",sr="logoIcon__43qgn",ir="title__6yEth",cr="desc__ggigV",or="loginForm__PMp5G",fr="backgroundIcon__DZTQP",b={view:tr,top:nr,header:ar,logoIcon:sr,title:ir,desc:cr,loginForm:or,backgroundIcon:fr},{useForm:dr}=D,$r=Y({name:"LoginView",setup(){const s=z(),c=Q(),f=T(),m=L(),F=O(!1),h=O(null),u=O({}),y=O({username:"",password:""}),C=O({username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),S=dr(y.value,C.value),d=Z(()=>f.title);function p(){S.validate().then(()=>{F.value=!0,m.login(y.value).then(()=>{c.replace({path:h.value||"/",query:u.value})}).finally(()=>{F.value=!1})}).catch(()=>{})}return k(()=>{const{query:w}=s;if(w){const I=w.redirect;if(I){const{url:A,query:E}=B.parseUrl(I);h.value=A,u.value=E}}}),{title:d,loading:F,formRef:S,formModel:y,handleSubmit:p}},render(){return l("div",{class:b.view},[l("div",{class:b.top},[l("div",{class:b.header},[l(j,{class:b.logoIcon,icon:"logos:ant-design"},null),l("span",{class:b.title},[this.title])]),l("div",{class:b.desc},[$("基于 Ant Design 的后台管理系统")])]),l(D,{class:b.loginForm},{default:()=>[l(N,q({name:"username",wrapperCol:{span:24}},this.formRef.validateInfos.username),{default:()=>[l(H,{value:this.formModel.username,"onUpdate:value":s=>this.formModel.username=s,placeholder:"账号：admin",size:"large",prefix:l(j,{icon:"ant-design:user-outlined"},null)},null)]}),l(N,q({name:"password",wrapperCol:{span:24}},this.formRef.validateInfos.password),{default:()=>[l(G,{value:this.formModel.password,"onUpdate:value":s=>this.formModel.password=s,placeholder:"密码：任意",size:"large",prefix:l(j,{icon:"ant-design:lock-outlined"},null),onPressEnter:this.handleSubmit},null)]}),l(N,{wrapperCol:{span:24}},{default:()=>[l(J,{size:"large",type:"primary",loading:this.loading,onClick:this.handleSubmit,style:{width:"100%"}},{default:()=>[$("登录")]})]})]}),l(j,{class:b.backgroundIcon,icon:"custom:background"},null)])}});export{$r as default};
