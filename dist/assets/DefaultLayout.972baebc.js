var Q=Object.defineProperty;var H=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var P=(t,a,n)=>a in t?Q(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,W=(t,a)=>{for(var n in a||(a={}))Y.call(a,n)&&P(t,n,a[n]);if(H)for(var n of H(a))Z.call(a,n)&&P(t,n,a[n]);return t};import{a4 as ee,g as e,j as o,f as c,a5 as F,p as u,a6 as te,a7 as ae,a8 as ne,r as _,a9 as L,aa as B,ab as p,ac as le,ad as se,u as V,ae as re,i as K,af as x,ag as oe,m as I,n as ue,l as S,ah as q,ai as ie,aj as ce,ak as de,z as he,D as me,o as be,al as fe,am as pe,an as ve,ao as j,ap as A,aq as ge,ar as ye,as as R,at as w,au as Ce,av as Te}from"./index.8d5e04ab.js";import{u as k}from"./useSettingStore.c59174e3.js";function Se(){function t(a){ee.confirm(W({title:"\u63D0\u793A",icon:e(o,{name:"navbar-exclamation",class:"anticon"})},a))}return{showConfirm:t}}var _e=c({name:"Content",setup(){const t=F();return{cachedTabs:u(()=>t.cachedTabs)}},render(){return e(ne,null,{default:({Component:t,route:a})=>e(te,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(ae,{max:20,include:this.cachedTabs},[e(t,{key:a.fullPath},null)])]})})}});const ke="logo__nQHp8",Me="logoIcon__HX-TC";var N={logo:ke,logoIcon:Me},Oe=c({name:"Logo",setup(){const t=_({}),a=k(),n=u(()=>a.$state);return L(n,s=>{t.value.height=s.siderLogoHeight,t.value.borderRight=s.siderTheme==="light"?"1px solid #f0f0f0":"unset"},{deep:!0,immediate:!0}),{style:t}},render(){return e("div",{class:N.logo,style:this.style},[e(o,{class:N.logoIcon,name:"logo"},null)])}}),D=c({name:"MainMenu",props:{item:{type:Object,required:!0}},setup(t){return{show:u(()=>t.item.meta?!t.item.meta.hidden:!1)}},render(){return this.show?e(p,{icon:this.item.meta.icon?e(o,{name:this.item.meta.icon},null):null,key:this.item.path},{default:()=>[e(B,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),E=c({name:"SubMenu",props:{item:{type:Object,required:!0}},setup(t){return{onlyOneChild:u(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e(D,{item:this.item.children[0]},null):e(se,{key:this.item.path,icon:this.item.meta.icon?e(o,{name:this.item.meta.icon},null):null,title:this.item.meta.title},{default:()=>{var t;return[(t=this.item.children)==null?void 0:t.map(a=>a.children?e(le("sub-menu"),{item:a},null):e(D,{item:a},null))]}})}});function Re(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}var we=c({name:"Menu",components:{SubMenu:E},setup(){const t=_([]),a=_([]),n=_([]),s=V(),d=re(),l=k(),g=u(()=>oe(d.routes)),i=u(()=>l.$state),y=u(()=>{const m={};return m.minHeight=`calc(100vh - ${i.value.siderLogoHeight})`,m});function b(m,O=""){for(const h of m)if(h.path=O+(h.path.startsWith("/")?h.path:`/${h.path}`),delete h.component,delete h.redirect,h.children){if(h.children.length===0)continue;b(h.children,h.path)}return m}function f(){const m=b(g.value);t.value=m}return L(()=>s.path,m=>{f(),a.value=[...d.matched],n.value=[m]},{immediate:!0}),{list:t,openKeys:a,selectedKeys:n,setting:i,style:y}},render(){let t;const a=n=>n.children?e(E,{item:n},null):e(D,{item:n},null);return e(x,{mode:"inline",theme:this.setting.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":n=>this.openKeys=n,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":n=>this.selectedKeys=n,style:this.style},Re(t=this.list.map(a))?t:{default:()=>[t]})}});const De="navbar__2X3Pm",Le="left__Ip74X",Ke="trigger__4z7GV",xe="breadcrumb__T3PiA",Ie="right__blJKi",$e="avatarWrapper__eMGlK",He="avatar__a3qRJ";var v={navbar:De,left:Le,trigger:Ke,breadcrumb:xe,right:Ie,avatarWrapper:$e,avatar:He},Pe=c({name:"Avatar",setup(){const t=I(),a=ue(),{showConfirm:n}=Se();function s(){n({content:"\u786E\u8BA4\u9000\u51FA\u767B\u5F55\uFF1F",async onOk(){await a.logout(),t.replace({path:"/login"})}})}return{handleLogout:s}},render(){return e(q,{placement:"bottomRight"},{default:()=>e("div",{class:v.avatarWrapper},[e(o,{class:v.avatar,name:"avatar"},null)]),overlay:()=>e(x,null,{default:()=>[e(p,{onClick:this.handleLogout},{default:()=>[e(o,{name:"navbar-logout",style:{marginRight:"5px"}},null),e("span",null,[S("\u9000\u51FA\u767B\u5F55")])]})]})})}}),We=c({name:"Breadcrumb",setup(){const t=_([]),a=I();function n(d){var l;return((l=d.meta)==null?void 0:l.title)||"undefined"}function s(d){var g;const l=[];for(const i of d){if(i.path==="/")continue;const y={path:i.path.startsWith("/")?i.path:`/${i.path}`,breadcrumbName:((g=i.meta)==null?void 0:g.title)||"undefined",children:[]};i.children&&(y.children=i.children.map(b=>{var f;return{path:i.path+`/${b.path}`,breadcrumbName:((f=b.meta)==null?void 0:f.title)||"undefined"}})),l.push(y)}return l}return ie(()=>{const d=a.currentRoute.value;t.value=s(d.matched)}),{routes:t,getBreadcrumbName:n}},render(){return e(ce,{class:v.breadcrumb,routes:this.routes,itemRender:({route:t,routes:a})=>a.indexOf(t)===a.length-1?e("span",null,[t.breadcrumbName]):e(B,{to:t.path},{default:()=>[t.breadcrumbName]})},null)}}),je=c({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:a,toggle:n}=de();function s(){a?n():he.warn("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5168\u5C4F")}return{isFullscreen:t,handleClick:s}},render(){return e("div",{title:"\u5168\u5C4F",style:{cursor:"pointer"},onClick:this.handleClick},[this.isFullscreen?e(o,{name:"navbar-fullscreen-exit"},null):e(o,{name:"navbar-fullscreen"},null)])}}),Ae=c({name:"SiderTheme",setup(){const t=k(),a=u(()=>t.siderTheme);function n(){t.change({key:"siderTheme",value:a.value==="dark"?"light":"dark"})}return{siderTheme:a,handleClick:n}},render(){return e("div",{title:"\u4E3B\u9898",style:{cursor:"pointer"},onClick:this.handleClick},[this.siderTheme==="dark"?e(o,{name:"navbar-theme-dark"},null):e(o,{name:"navbar-theme-light"},null)])}}),Ne=c({name:"Trigger",setup(){const t=k(),a=u(()=>!t.siderOpened);function n(){t.change({key:"siderOpened",value:a.value})}return{collapsed:a,handleClick:n}},render(){return e(o,{class:v.trigger,name:this.collapsed?"navbar-menu-unfold":"navbar-menu-fold",onClick:this.handleClick},null)}}),Ee=c({name:"Navbar",render(){return e("div",{class:v.navbar},[e("div",{class:v.left},[e(Ne,null,null),e(We,null,null)]),e("div",{class:v.right},[e(me,null,{default:()=>[e(je,null,null),e(Ae,null,null),e(Pe,null,null)]})])])}});const Fe="tabbar__IoWcE",Be="tabContent__o1ga1",Ve="tabCloseIcon__QbklE",qe="tabsMenu__PyueP",Ue="tabsDropdownMenu__lmJWd";var M={tabbar:Fe,tabContent:Be,tabCloseIcon:Ve,tabsMenu:qe,tabsDropdownMenu:Ue};function Xe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}var ze=c({name:"Tabbar",setup(){const t=_(""),a=V(),n=I(),s=F(),d=k(),l=u(()=>s.visitedTabs),g=u(()=>l.value.findIndex(r=>r.fullPath===t.value)===0),i=u(()=>l.value.findIndex(r=>r.fullPath===t.value)===l.value.length-1),y=u(()=>l.value.length<=1);function b(r){return t.value===r.fullPath}function f(){const{name:r,path:C,fullPath:J}=a;return r&&[A.LOGIN,A.ERROR].indexOf(C)===-1&&(s.addTab(a),t.value=J),!1}function m(){s.delCachedTab(a).then(()=>{const{fullPath:r}=a;ge(()=>{n.replace({path:"/redirect"+r})})})}function O(r){s.delTab(r).then(({visitedTabs:C})=>{b(r)&&$(C)})}function h(){s.delLeftTabs(a)}function U(){s.delRightTabs(a)}function X(){s.delOthersTabs(a)}function z(){s.delAllTabs().then(({visitedTabs:r})=>{$(r)})}function G(r){n.push(r)}function $(r){const C=r.slice(-1)[0];C?n.push(C.fullPath):a.name===d.homeRoute.name?n.replace({path:"/redirect"+a.fullPath}):n.replace("/")}return L(()=>a.path,()=>{f()}),be(()=>{f()}),{activeKey:t,visitedTabs:l,closeLeftDisabled:g,closeRightDisabled:i,closeOtherDisabled:y,handleCloseTab:O,handleCloseLeftTabs:h,handleCloseRightTabs:U,handleCloseOtherTabs:X,handleCloseAllTabs:z,handleSelectTab:G,handleRefreshTab:m}},render(){let t;return e("div",{class:M.tabbar},[e(fe,{activeKey:this.activeKey,"onUpdate:activeKey":a=>this.activeKey=a,onChange:this.handleSelectTab},Xe(t=this.visitedTabs.map(a=>e(pe,{tab:()=>e("div",{class:M.tabContent},[e("input",{"data-key":a.fullPath,hidden:!0},null),e("span",null,[a.meta.title]),e(o,{name:"tabbar-close",class:M.tabCloseIcon,onClick:ve(()=>this.handleCloseTab(a),["stop"])},null)]),key:a.fullPath},null)))?t:{default:()=>[t]}),e(q,{placement:"bottomRight",overlayStyle:{zIndex:100002}},{default:()=>e("div",{class:M.tabsMenu},[e(o,{name:"tabbar-down"},null)]),overlay:()=>e(x,{class:M.tabsDropdownMenu},{default:()=>[e(p,{onClick:this.handleRefreshTab},{default:()=>[e(o,{name:"tabbar-refresh"},null),S("\u5237\u65B0\u9875\u9762")]}),e(j,null,null),e(p,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[e(o,{name:"tabbar-close-left"},null),S("\u5173\u95ED\u5DE6\u4FA7")]}),e(p,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[e(o,{name:"tabbar-close-right"},null),S("\u5173\u95ED\u53F3\u4FA7")]}),e(j,null,null),e(p,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[e(o,{name:"tabbar-close"},null),S("\u5173\u95ED\u5176\u5B83")]}),e(p,{onClick:this.handleCloseAllTabs},{default:()=>[e(o,{name:"tabbar-close-all"},null),S("\u5173\u95ED\u6240\u6709")]})]})})])}});const Ge="layout__gqKsp",Je="layoutSider__5vReN",Qe="layoutMain__qSEVg",Ye="layoutHeader__p1uhU",Ze="layoutContent__XW4xd";var T={layout:Ge,layoutSider:Je,layoutMain:Qe,layoutHeader:Ye,layoutContent:Ze};function et(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}var lt=c({name:"DefaultLayout",setup(){const t=k(),a=u(()=>t.$state),n=u(()=>{const l={};return a.value.siderOpened?(l.marginLeft=a.value.siderOpenedWidth,l.width=`calc(100vw - ${a.value.siderOpenedWidth})`):(l.marginLeft=a.value.siderClosedWidth,l.width=`calc(100vw - ${a.value.siderClosedWidth})`),l}),s=u(()=>{const l={height:a.value.headerHeight};return a.value.fixedHeader&&(l.position="sticky",l.top="0px"),l}),d=u(()=>{const l={};return a.value.fixedHeader&&(l.position="sticky",l.top=a.value.headerHeight),l});return{setting:a,mainStyle:n,headerStyle:s,tabbarStyle:d}},render(){let t;const a=()=>e(Ce,{class:T.layoutHeader,style:this.headerStyle},{default:()=>[e(Ee,null,null)]}),n=()=>e(ze,{style:this.tabbarStyle},null),s=()=>e(Te,{class:T.layoutContent},{default:()=>[e(_e,null,null)]});return e(w,{class:T.layout},{default:()=>[e(ye,{class:T.layoutSider,collapsed:!this.setting.siderOpened,trigger:null,theme:this.setting.siderTheme,width:this.setting.siderOpenedWidth,collapsedWidth:this.setting.siderClosedWidth,collapsible:!0},{default:()=>[e(Oe,null,null),e(R,null,{default:()=>[e(we,null,null)]})]}),this.setting.fixedHeader?e(w,{class:T.layoutMain,style:this.mainStyle},{default:()=>[a(),n(),e(R,null,et(t=s())?t:{default:()=>[t]})]}):e(R,null,{default:()=>[e(w,{class:T.layoutMain,style:this.mainStyle},{default:()=>[a(),n(),s()]})]})]})}});export{lt as default};
