import{b as c}from"./ajax-be8adbaf.js";import{G as g}from"./el-scrollbar-f77101f7.js";import"./dayjs.min-73c6472a.js";import{c as h}from"./index-7f8506ed.js";import{r as m,c as R,o as b,d as v,f as u,C as y,q as x}from"./runtime-core.esm-bundler-d3f66853.js";import{b as l,a as d,c as s,T as A}from"./table-5536d2d6.js";import{b as E}from"./_baseSet-fefcb639.js";import{o as C}from"./omit-486f4e1f.js";import{B as S}from"./button-5adece00.js";import"./useConfigInject-bc8cb14d.js";import"./_commonjsHelpers-042e6b4d.js";import"./vue-router-22a2ab70.js";import"./cloneDeep-a0bb90cb.js";import"./_getPrototype-d283ffb9.js";import"./_flatRest-bc1d4817.js";import"./isPlainObject-16ee9a1b.js";import"./wave-c3e26277.js";import"./raf-436af0c2.js";function T(e,o,i){return e==null?e:E(e,o,i)}const H={getList(e){return c.get("/demo/list",{params:e})}};function D(e){const o=m(0),i=R(()=>o.value+"px"),n=h();function a(){const t=document.querySelector("#page");o.value=t.scrollHeight-(n.fixedHeader?20:110)-((e==null?void 0:e.extraHeight)||0)}return b(()=>{a()}),{pageHeight:o,pageHeightPx:i}}function I(e){const o=m({});function i(r){const f=e.value.formConfig.items.find(p=>p.field===r.field);T(f,r.key,r.value)}function n(){e.value.loading=!0}function a(){e.value.loading=!1}async function t(r){try{n(),await(r==null?void 0:r()),await o.value.commitProxy("query")}finally{a()}}return{tableRef:o,updateFormItem:i,showLoading:n,hideLoading:a,refresh:t}}const Q=v({name:"DemoTable",setup(){const e=m({showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:l.AInput,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:l.AInput,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:l.ASelect,props:{placeholder:"请选择"},options:[{label:"admin",value:"admin"},{label:"normal",value:"normal"}]}},{title:"状态",field:"status",itemRender:{name:l.ASelect,props:{placeholder:"请选择"},options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"时间",field:"date",itemRender:{name:d.FormItemDate,props:{type:"range",placeholder:["开始时间","结束时间"],valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{itemRender:{name:d.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:s.AInput}},{title:"角色",field:"role"},{title:"状态",field:"status",editRender:{name:s.ASelect,options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"备注",field:"remark",editRender:{name:s.AInput}},{title:"创建时间",field:"createTs",formatter:A.Date}],pagerConfig:{pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:a,form:t})=>(t.date&&(t.start=t.date[0],t.end=t.date[1],t=C(t,["date"])),await H.getList({pageSize:a.pageSize,current:a.currentPage,...t}))}}}),{tableRef:o}=I(e),{pageHeightPx:i}=D();function n(){o.value.commitProxy("query")}return{tableRef:o,tableConfig:e,pageHeightPx:i,handleCustomRefresh:n}},render(){return u("div",{style:{height:this.pageHeightPx}},[u(g,y({ref:"tableRef"},this.tableConfig),{toolbar_buttons:()=>u(S,{type:"link",onClick:this.handleCustomRefresh},{default:()=>[x("自定义刷新")]})})])}});export{Q as default};
