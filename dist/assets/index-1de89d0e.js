import{i as R,b as _,O as y,P as C,Q as m,R as P,S as b,U as E,V as S,W as L,X as x,K as p,Y as H,Z as T,c as k,_ as A,o as G,r as O,$ as l,a0 as c,a1 as u,a2 as w,t as D,f as I,d as B,a3 as F,g as d,h as N,j as M,e as f,k as g,q as Y,E as $,a4 as j}from"./index-4147d4f8.js";import{g as q}from"./util-2ccc61ea.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";var K="[object Object]",V=Function.prototype,U=Object.prototype,h=V.toString,Q=U.hasOwnProperty,W=h.call(Object);function X(e){if(!R(e)||_(e)!=K)return!1;var t=y(e);if(t===null)return!0;var n=Q.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&h.call(n)==W}function Z(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++o<r;)i[o]=e[o+t];return i}function J(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function ee(e,t){return t.length<2?e:C(e,Z(t,0,-1))}function te(e,t){return t=m(t,e),e=ee(e,t),e==null||delete e[P(J(t))]}function ne(e){return X(e)?void 0:e}var oe=1,re=2,ie=4,ae=b(function(e,t){var n={};if(e==null)return n;var o=!1;t=E(t,function(i){return i=m(i,e),o||(o=i.length>1),i}),S(e,L(e),n),o&&(n=x(n,oe|re|ie,ne));for(var r=t.length;r--;)te(n,t[r]);return n});const le=ae;function se(e){const t=p({});function n(a){const s=e.value.formConfig.items.find(v=>v.field===a.field);H(s,a.key,a.value)}function o(){e.value.loading=!0}function r(){e.value.loading=!1}async function i(a){try{o(),await(a==null?void 0:a()),await t.value.commitProxy("query")}finally{r()}}return{gridRef:t,updateFormItem:n,showLoading:o,hideLoading:r,refresh:i}}const ue={getList(e){return T.get("/demo/list",{params:e})}};function ce(e){const t=p(0),n=k(()=>t.value+"px"),o=A();function r(){const i=document.querySelector("#page");t.value=i.scrollHeight-(o.fixedHeader?20:110)-((e==null?void 0:e.extraHeight)||0)}return G(()=>{r()}),{pageHeight:t,pageHeightPx:n}}function de(){const e=O({gridConfig:{id:q(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"admin",value:"admin"},{label:"normal",value:"normal"}]}},{title:"状态",field:"status",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"时间",field:"date",itemRender:{name:c.FormItemDate,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"}}},{itemRender:{name:c.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:u.Input}},{title:"角色",field:"role"},{title:"状态",field:"status",editRender:{name:u.Select,options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"备注",field:"remark",editRender:{name:u.Input}},{title:"创建时间",field:"createTs",formatter:w.Date}],pagerConfig:{pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:n,form:o})=>(o.date&&(o.start=o.date[0],o.end=o.date[1],o=le(o,["date"])),await ue.getList({pageSize:n.pageSize,current:n.currentPage,...o}))}}}}),t=se(D(e,"gridConfig"));return{...I(e),proGridHook:t}}function fe({proGridHook:e}){function t(){e.refresh()}return{handleCustomRefresh:t}}const ge=B({components:{ProGrid:F},setup(){const{proGridHook:e,...t}=de(),n=fe({proGridHook:e}),{pageHeightPx:o}=ce();return{...t,...n,gridRef:e.gridRef,pageHeightPx:o}}});function me(e,t,n,o,r,i){const a=d("el-button"),s=d("ProGrid");return N(),M("div",{style:j({height:e.pageHeightPx})},[f(s,$({ref:"gridRef"},e.gridConfig),{toolbar_buttons:g(()=>[f(a,{type:"primary",link:"",onClick:e.handleCustomRefresh},{default:g(()=>[Y(" 自定义刷新 ")]),_:1},8,["onClick"])]),_:1},16)],4)}const Re=z(ge,[["render",me]]);export{Re as default};
