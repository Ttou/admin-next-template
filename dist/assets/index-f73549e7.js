import{G as h}from"./index.common-3410e121.js";import{b}from"./index-3f245db3.js";import{r as c,c as R,o as v,O as y,a4 as E,$ as C,d as T,q as s,y as P,v as S}from"./runtime-core.esm-bundler-8c23b74b.js";import{a as L}from"./ajax-676e8075.js";import{b as l,a as f,c as u,T as x}from"./table-f5bf8c20.js";import{d as H,a0 as A,b as O,P as d,t as _,e as w,a6 as D}from"./plugin-vue_export-helper-11364865.js";import{l as I,m as k,n as B,h as F}from"./_baseClone-5b9aeaf1.js";import{f as N}from"./_flatRest-a8e82866.js";import{E as G}from"./index-d91a418e.js";import"./runtime-dom.esm-bundler-f4221b35.js";import"./dayjs.min-4c9a69f7.js";import"./vue-router-acd36729.js";import"./index-f8533f9f.js";import"./index-11c4686d.js";import"./index-fbb8de7a.js";import"./icon-390fc75b.js";var M="[object Object]",q=Function.prototype,Y=Object.prototype,m=q.toString,j=Y.hasOwnProperty,z=m.call(Object);function K(e){if(!H(e)||A(e)!=M)return!1;var t=I(e);if(t===null)return!0;var r=j.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&m.call(r)==z}function V(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++o<n;)a[o]=e[o+t];return a}function $(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function U(e,t){return t.length<2?e:O(e,V(t,0,-1))}function J(e,t){return t=d(t,e),e=U(e,t),e==null||delete e[_($(t))]}function Q(e){return K(e)?void 0:e}var W=1,X=2,Z=4,ee=N(function(e,t){var r={};if(e==null)return r;var o=!1;t=w(t,function(a){return a=d(a,e),o||(o=a.length>1),a}),k(e,B(e),r),o&&(r=F(r,W|X|Z,Q));for(var n=t.length;n--;)J(r,t[n]);return r});const te=ee,re={getList(e){return L.get("/demo/list",{params:e})}};function oe(e){const t=c(0),r=R(()=>t.value+"px"),o=b();function n(){const a=document.querySelector("#page");t.value=a.scrollHeight-(o.fixedHeader?20:110)-((e==null?void 0:e.extraHeight)||0)}return v(()=>{n()}),{pageHeight:t,pageHeightPx:r}}function ne(e){const t=c({});function r(i){const g=e.value.formConfig.items.find(p=>p.field===i.field);D(g,i.key,i.value)}function o(){e.value.loading=!0}function n(){e.value.loading=!1}async function a(i){try{o(),await(i==null?void 0:i()),await t.value.commitProxy("query")}finally{n()}}return{tableRef:t,updateFormItem:r,showLoading:o,hideLoading:n,refresh:a}}function ae(){const e=y({tableConfig:{showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"admin",value:"admin"},{label:"normal",value:"normal"}]}},{title:"状态",field:"status",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"时间",field:"date",itemRender:{name:f.FormItemDate,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"}}},{itemRender:{name:f.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:u.Input}},{title:"角色",field:"role"},{title:"状态",field:"status",editRender:{name:u.Select,options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"备注",field:"remark",editRender:{name:u.Input}},{title:"创建时间",field:"createTs",formatter:x.Date}],pagerConfig:{pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:r,form:o})=>(o.date&&(o.start=o.date[0],o.end=o.date[1],o=te(o,["date"])),await re.getList({pageSize:r.pageSize,current:r.currentPage,...o}))}}}}),t=ne(E(e,"tableConfig"));return{...C(e),tableRefHook:t}}function ie({tableRefHook:e}){function t(){e.refresh()}return{handleCustomRefresh:t}}const Te=T({name:"DemoTable",setup(){const{tableRefHook:e,...t}=ae(),r=ie({tableRefHook:e}),{pageHeightPx:o}=oe();return{...t,...r,tableRef:e.tableRef,pageHeightPx:o}},render(){return s("div",{style:{height:this.pageHeightPx}},[s(h,P({ref:"tableRef"},this.tableConfig),{toolbar_buttons:()=>s(G,{type:"primary",link:!0,onClick:this.handleCustomRefresh},{default:()=>[S("自定义刷新")]})})])}});export{Te as default};
