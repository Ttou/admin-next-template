import{d as F,a8 as y,ac as S,r as a,c as k,o as C,au as M,b as e,C as m,av as p,aw as u,m as g,ax as x,ay as E,B as R}from"./vendor.4068de6c.js";import{b as q,S as t}from"./index.7064e514.js";import{u as B}from"./useSettingStore.0a0a6629.js";const P="view__uyu0o",V="top__w2bkm",z="header__nY81t",A="logoIcon__43qgn",D="title__6yEth",U="desc__ggigV",N="loginForm__PMp5G",Q="backgroundIcon__DZTQP";var o={view:P,top:V,header:z,logoIcon:A,title:D,desc:U,loginForm:N,backgroundIcon:Q},Y=F({name:"LoginView",setup(){const s=y(),f=S(),v=B(),h=q(),r=a(!1),i=a(null),c=a({}),n=a({username:"",password:""}),w=a({username:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]}),{useForm:_}=p,d=_(n.value,w.value),I=k(()=>v.title);function b(){d.validate().then(()=>{r.value=!0,h.login(n.value).then(()=>{f.replace({path:i.value||"/",query:c.value})}).finally(()=>{r.value=!1})}).catch(()=>{})}return C(()=>{const{query:l}=s;l&&(i.value=l.redirect,c.value=M(l,["redirect"]))}),{title:I,loading:r,formRef:d,formModel:n,handleSubmit:b}},render(){return e("div",{class:o.view},[e("div",{class:o.top},[e("div",{class:o.header},[e(t,{class:o.logoIcon,name:"logo"},null),e("span",{class:o.title},[this.title])]),e("div",{class:o.desc},[m("\u57FA\u4E8E Ant Design \u7684\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF")])]),e(p,{class:o.loginForm},{default:()=>[e(u,g({name:"username",wrapperCol:{span:24}},this.formRef.validateInfos.username),{default:()=>[e(x,{value:this.formModel.username,"onUpdate:value":s=>this.formModel.username=s,placeholder:"\u8D26\u53F7\uFF1Aadmin",size:"large",prefix:e(t,{name:"view-user"},null)},null)]}),e(u,g({name:"password",wrapperCol:{span:24}},this.formRef.validateInfos.password),{default:()=>[e(E,{value:this.formModel.password,"onUpdate:value":s=>this.formModel.password=s,placeholder:"\u5BC6\u7801\uFF1A\u4EFB\u610F",size:"large",prefix:e(t,{name:"view-lock"},null),onPressEnter:this.handleSubmit},null)]}),e(u,{wrapperCol:{span:24}},{default:()=>[e(R,{size:"large",type:"primary",loading:this.loading,onClick:this.handleSubmit,style:{width:"100%"}},{default:()=>[m("\u767B\u5F55")]})]})]}),e(t,{class:o.backgroundIcon,name:"background"},null)])}});export{Y as default};
