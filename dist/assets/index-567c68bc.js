import{G as h}from"./index.common-3b4443aa.js";import{b as v}from"./index-d8f88f37.js";import{r as d,c as R,o as b,O as y,a1 as C,$ as E,d as P,x as s,C as S,t as L}from"./runtime-core.esm-bundler-d9565f10.js";import{b as T}from"./ajax-7ef056e0.js";import{g as x}from"./util-365cd9d2.js";import{b as H,z as c,t as A,d as O,K as _}from"./plugin-vue_export-helper-06eb3496.js";import{b as l,a as f,c as u,T as D}from"./table-f5bf8c20.js";import{l as w,m as G,n as I,b as k}from"./_baseClone-374bd332.js";import{i as B,b as F}from"./isObjectLike-46b91259.js";import{f as N}from"./_flatRest-165d4a27.js";import{g as M}from"./index-bdb5f9e9.js";import"./index-f73b31ab.js";import"./index-3439f6b7.js";import"./dayjs.min-4c9a69f7.js";import"./vue-router-f551aed2.js";import"./index-851f96ae.js";var z="[object Object]",Y=Function.prototype,j=Object.prototype,m=Y.toString,q=j.hasOwnProperty,K=m.call(Object);function V(e){if(!B(e)||F(e)!=z)return!1;var t=w(e);if(t===null)return!0;var r=q.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&m.call(r)==K}function $(e,t,r){var o=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(n);++o<n;)i[o]=e[o+t];return i}function U(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function J(e,t){return t.length<2?e:H(e,$(t,0,-1))}function Q(e,t){return t=c(t,e),e=J(e,t),e==null||delete e[A(U(t))]}function W(e){return V(e)?void 0:e}var X=1,Z=2,ee=4,te=N(function(e,t){var r={};if(e==null)return r;var o=!1;t=O(t,function(i){return i=c(i,e),o||(o=i.length>1),i}),G(e,I(e),r),o&&(r=k(r,X|Z|ee,W));for(var n=t.length;n--;)Q(r,t[n]);return r});const re=te;function oe(e){const t=d({});function r(a){const g=e.value.formConfig.items.find(p=>p.field===a.field);_(g,a.key,a.value)}function o(){e.value.loading=!0}function n(){e.value.loading=!1}async function i(a){try{o(),await(a==null?void 0:a()),await t.value.commitProxy("query")}finally{n()}}return{gridRef:t,updateFormItem:r,showLoading:o,hideLoading:n,refresh:i}}const ne={getList(e){return T.get("/demo/list",{params:e})}};function ie(e){const t=d(0),r=R(()=>t.value+"px"),o=v();function n(){const i=document.querySelector("#page");t.value=i.scrollHeight-(o.fixedHeader?20:110)-((e==null?void 0:e.extraHeight)||0)}return b(()=>{n()}),{pageHeight:t,pageHeightPx:r}}function ae(){const e=y({gridConfig:{id:x(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"admin",value:"admin"},{label:"normal",value:"normal"}]}},{title:"状态",field:"status",itemRender:{name:l.Select,props:{placeholder:"请选择"},options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"时间",field:"date",itemRender:{name:f.FormItemDate,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"}}},{itemRender:{name:f.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:u.Input}},{title:"角色",field:"role"},{title:"状态",field:"status",editRender:{name:u.Select,options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"备注",field:"remark",editRender:{name:u.Input}},{title:"创建时间",field:"createTs",formatter:D.Date}],pagerConfig:{pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:r,form:o})=>(o.date&&(o.start=o.date[0],o.end=o.date[1],o=re(o,["date"])),await ne.getList({pageSize:r.pageSize,current:r.currentPage,...o}))}}}}),t=oe(C(e,"gridConfig"));return{...E(e),proGridHook:t}}function le({proGridHook:e}){function t(){e.refresh()}return{handleCustomRefresh:t}}const Se=P({name:"DemoTable",setup(){const{proGridHook:e,...t}=ae(),r=le({proGridHook:e}),{pageHeightPx:o}=ie();return{...t,...r,gridRef:e.gridRef,pageHeightPx:o}},render(){return s("div",{style:{height:this.pageHeightPx}},[s(h,S({ref:"gridRef"},this.gridConfig),{toolbar_buttons:()=>s(M,{type:"primary",link:!0,onClick:this.handleCustomRefresh},{default:()=>[L("自定义刷新")]})})])}});export{Se as default};
