import{d as h,f as u,W as e,Y as ne,aW as ae,aX as le,aU as _,aV as A,F as oe,ai as se,$ as C,I as K,e as W,E as T,U as b,w as N,aY as ie,a5 as ue,n as re,o as ce,Q as F,X as L}from"./vue-DQAeMwFg.js";import{i as U,j as de,u as M,k as x,h as he,g as Q,l as I}from"./index-BtO3GZow.js";import{I as c}from"./iconify-D2I_WxkC.js";import{Q as pe,R as me,M as fe,S as be,T as X,U as g,V as q,W as P,X as ge,z as ye,a as ve,b as Se,Y as _e,Z as Ce,_ as O,$ as k,a0 as Te}from"./element-CQCkr2zs.js";import"./wangeditor-BgtuP8hy.js";import"./vxe-table-BTLbE0TE.js";const Me=h({name:"Content",setup(){const t=U();return{cachedTabs:u(()=>t.cachedTabs)}},render(){return e(le,null,{default:({Component:t,route:n})=>e(ne,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(ae,{max:20,include:this.cachedTabs},[e(t,{key:n.fullPath},null)])]})})}}),we="logo__guxAe",Oe="logoIcon__RpGcC",V={logo:we,logoIcon:Oe},ke=h({name:"Logo",render(){return e("div",{class:V.logo},[e(c,{class:V.logoIcon,icon:"@local:custom:logo"},null)])}}),$=h({name:"MainMenu",props:{item:{type:Object,required:!0}},setup(t){const n=_(),o=A(),l=u(()=>t.item.meta?!t.item.meta.hidden:!1);function r(){n.path!==t.item.path&&o.push(t.item.path).catch(s=>{console.error(s)})}return{show:l,handleJump:r}},render(){return this.show?e(pe,{index:this.item.path,onClick:this.handleJump},{default:()=>this.item.meta.icon?e(c,{icon:this.item.meta.icon},null):null,title:()=>e("span",null,[this.item.meta.title])}):null}}),Ee="menu__7wVZi",De={menu:Ee},Re="popper__6mcFT",xe={popper:Re},B=h({name:"SubMenu",props:{item:{type:Object,required:!0}},setup(t){return{onlyOneChild:u(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e($,{item:this.item.children[0]},null):e(me,{index:this.item.path,popperClass:xe.popper},{title:()=>e(oe,null,[this.item.meta.icon?e(c,{icon:this.item.meta.icon},null):null,e("span",null,[this.item.meta.title])]),default:()=>this.item.children.map(t=>t.children?e(se("sub-menu"),{item:t,key:t.path},null):e($,{item:t,key:t.path},null))})}});function $e(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!T(t)}const Ae=h({name:"Menu",components:{SubMenu:B},setup(){const t=C({list:[]}),n=_(),o=de(),l=M(),r=u(()=>fe(o.routes)),s=u(()=>l.$state),a=u(()=>n.path);function v(m,S=""){for(const d of m)if(d.path=S+(d.path.startsWith("/")?d.path:"/".concat(d.path)),delete d.component,delete d.redirect,d.children){if(d.children.length===0)continue;v(d.children,d.path)}return m}function w(){const m=v(r.value);t.list=m}return K(()=>{w()}),{...W(t),CSS_VARS:x,activeMenu:a,setting:s}},render(){let t;return e(be,{mode:"vertical",class:De.menu,defaultActive:this.activeMenu,backgroundColor:this.CSS_VARS.menuBg,textColor:this.CSS_VARS.menuText,activeTextColor:this.CSS_VARS.menuActiveText,collapse:!this.setting.sideOpened,collapseTransition:!1,uniqueOpened:!0},$e(t=this.list.map(n=>n.children?e(B,{item:n,key:n.path},null):e($,{item:n,key:n.path},null)))?t:{default:()=>[t]})}}),We="avatarWrapper__fSpCT",je="avatar__thdiM",Fe="avatarDropdownMenu__QS9oQ",E={avatarWrapper:We,avatar:je,avatarDropdownMenu:Fe},Le=h({name:"Avatar",setup(){const t=C({commandMap:{logout:()=>r()}}),n=A(),o=he(),{$msgbox:l}=Q();function r(){l.confirm("确认退出登录？","提示",{type:"warning"}).then(async()=>{await o.logout(),n.replace({path:"/login"})}).catch(()=>{})}function s(a){t.commandMap[a]()}return{handleCommand:s}},render(){return e(q,{onCommand:this.handleCommand},{default:()=>e("div",{class:E.avatarWrapper},[e(c,{class:E.avatar,icon:"@local:custom:avatar",inline:!0},null)]),dropdown:()=>e(X,{class:E.avatarDropdownMenu},{default:()=>[e(g,{command:"logout"},{default:()=>[e(c,{icon:"@local:icon-park-outline:logout",inline:!0},null),e("span",null,[b("退出登录")])]})]})})}}),Ie="breadcrumb__X6SBW",Pe={breadcrumb:Ie};function Ve(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!T(t)}const Be=h({name:"Breadcrumb",setup(){const t=C({breadcrumbs:[]}),n=_();function o(){var s;const l=n.matched,r=[];for(const a of l)a.path!=="/"&&r.push({path:a.path.startsWith("/")?a.path:"/".concat(a.path),title:((s=a.meta)==null?void 0:s.title)||"-"});t.breadcrumbs=r}return N(()=>n.path,l=>{l.startsWith("/redirect/")||o()}),K(()=>{o()}),{...W(t)}},render(){let t;return e(ge,{class:Pe.breadcrumb},Ve(t=this.breadcrumbs.map((n,o)=>o===this.breadcrumbs.length-1?e(P,null,{default:()=>[n.title]}):e(P,{to:{path:n.path}},{default:()=>[n.title]})))?t:{default:()=>[t]})}}),He="navbar__oMEpT",Ke="left__32oF1",Ne="right__HxIwx",D={navbar:He,left:Ke,right:Ne},Ue=h({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:n,toggle:o}=ie(),{$message:l}=Q(),r=u(()=>t.value?"@local:icon-park-outline:off-screen":"@local:icon-park-outline:full-screen");function s(){n?o():l.warning("浏览器不支持全屏")}return{icon:r,handleClick:s}},render(){return e("div",{title:"全屏",onClick:this.handleClick},[e(c,{icon:this.icon,inline:!0},null)])}}),Qe="trigger__MwLP9",Xe={trigger:Qe},qe=h({name:"Trigger",setup(){const t=M(),n=u(()=>!t.sideOpened),o=u(()=>n.value?"@local:icon-park-outline:menu-unfold":"@local:icon-park-outline:menu-fold");function l(){t.change({key:"sideOpened",value:n.value})}return{collapsed:n,icon:o,handleClick:l}},render(){return e(c,{class:Xe.trigger,icon:this.icon,onClick:ue(this.handleClick,["native"])},null)}}),Ge=h({name:"Navbar",render(){return e("div",{class:D.navbar},[e("div",{class:D.left},[e(qe,null,null),e(Be,null,null)]),e("div",{class:D.right},[e(ye,{size:15},{default:()=>[e(Ue,null,null),e(Le,null,null)]})])])}}),Je="tabbar__vE4we",Ye="tabsMenu__REfEi",ze="tabsDropdownMenu__j4BGb",R={tabbar:Je,tabsMenu:Ye,tabsDropdownMenu:ze};function Ze(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!T(t)}const H=h({name:"Tabbar",setup(){const t=C({activeKey:"",commandMap:{refresh:()=>d(),closeLeft:()=>J(),closeRight:()=>Y(),closeOther:()=>z(),closeAll:()=>Z()}}),n=_(),o=A(),l=U(),r=M(),s=u(()=>l.visitedTabs),a=u(()=>s.value.findIndex(i=>i.fullPath===t.activeKey)===0),v=u(()=>s.value.findIndex(i=>i.fullPath===t.activeKey)===s.value.length-1),w=u(()=>s.value.length<=1);function m(i){return t.activeKey===i.fullPath}function S(){const{name:i,path:p,fullPath:y}=n;return i&&[I.LOGIN,I.ERROR].indexOf(p)===-1&&(l.addTab(n),t.activeKey=y),!1}function d(){l.delCachedTab(n).then(()=>{const{fullPath:i}=n;re(()=>{o.replace({path:"/redirect"+i})})})}function G(i){const p=s.value.find(y=>y.fullPath===i);l.delTab(p).then(({visitedTabs:y})=>{m(p)&&j(y)})}function J(){l.delLeftTabs(n)}function Y(){l.delRightTabs(n)}function z(){l.delOthersTabs(n)}function Z(){l.delAllTabs().then(({visitedTabs:i})=>{j(i)})}function ee(i){o.push(i)}function j(i){const p=i.slice(-1)[0];p?o.push(p.fullPath):n.name===r.homeRoute.name?o.replace({path:"/redirect"+n.fullPath}):o.replace("/")}function te(i){t.commandMap[i]()}return N(()=>n.path,()=>{S()}),ce(()=>{S()}),{...W(t),visitedTabs:s,closeLeftDisabled:a,closeRightDisabled:v,closeOtherDisabled:w,handleCloseTab:G,handleSelectTab:ee,handleCommand:te}},render(){let t;return e("div",{class:R.tabbar},[e(ve,{modelValue:this.activeKey,"onUpdate:modelValue":n=>this.activeKey=n,onTabChange:this.handleSelectTab,onTabRemove:this.handleCloseTab},Ze(t=this.visitedTabs.map(n=>e(Se,{key:n.fullPath,name:n.fullPath,label:n.meta.title,closable:!0},null)))?t:{default:()=>[t]}),e(q,null,{default:()=>e("div",{class:R.tabsMenu},[e(c,{icon:"@local:icon-park-outline:down",inline:!0},null)]),dropdown:()=>e(X,{class:R.tabsDropdownMenu},{default:()=>[e(g,{command:"refresh"},{default:()=>[e(c,{icon:"@local:icon-park-outline:redo",inline:!0},null),e("span",null,[b("刷新页面")])]}),e(g,{command:"closeLeft",disabled:this.closeLeftDisabled,divided:!0},{default:()=>[e(c,{icon:"@local:icon-park-outline:to-left",inline:!0},null),e("span",null,[b("关闭左侧")])]}),e(g,{command:"closeRight",disabled:this.closeRightDisabled},{default:()=>[e(c,{icon:"@local:icon-park-outline:to-right",inline:!0},null),e("span",null,[b("关闭右侧")])]}),e(g,{command:"closeOther",disabled:this.closeOtherDisabled,divided:!0},{default:()=>[e(c,{icon:"@local:icon-park-outline:close",inline:!0},null),e("span",null,[b("关闭其它")])]}),e(g,{command:"closeAll"},{default:()=>[e(c,{icon:"@local:icon-park-outline:close-one",inline:!0},null),e("span",null,[b("关闭所有")])]})]})})])}}),et="layout__ka9hA",tt="layoutSide__Jaj8o",nt="layoutMain__7naRu",at="layoutHeader__5DDHg",lt="layoutContent__3Boka",f={layout:et,layoutSide:tt,layoutMain:nt,layoutHeader:at,layoutContent:lt};function ot(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!T(t)}const ht=h({name:"DefaultLayout",setup(){const t=M(),n=u(()=>t.$state),o=u(()=>n.value.sideOpened?n.value.sideOpenedWidth:n.value.sideClosedWidth),l=u(()=>{const a={};return n.value.sideOpened?(a.marginLeft=n.value.sideOpenedWidth,a.width="calc(100vw - ".concat(n.value.sideOpenedWidth,")")):(a.marginLeft=n.value.sideClosedWidth,a.width="calc(100vw - ".concat(n.value.sideClosedWidth,")")),a}),r=u(()=>{const a={height:x.headerHeight};return n.value.fixedHeader&&(a.position="sticky",a.top="0px"),a}),s=u(()=>{const a={};return n.value.fixedHeader&&(a.position="sticky",a.top=x.headerHeight),a});return{setting:n,asideWidth:o,mainStyle:l,headerStyle:r,tabbarStyle:s}},render(){const t=()=>e(Te,{class:f.layoutHeader,style:this.headerStyle},{default:()=>[e(Ge,null,null)]}),n=e(_e,{class:f.layoutContent},{default:()=>[e(Me,null,null)]});return e(k,{class:f.layout},{default:()=>[e(Ce,{class:f.layoutSide,width:this.asideWidth},{default:()=>[e(ke,null,null),e(O,null,{default:()=>[e(Ae,null,null)]})]}),this.setting.fixedHeader?e(k,{class:f.layoutMain,style:this.mainStyle,direction:"vertical"},{default:()=>[e(t,null,null),F(e(H,{style:this.tabbarStyle},null),[[L,this.setting.tabbar]]),e(O,{wrapClass:"page",wrapStyle:"flex: 1",viewStyle:"display: flex; min-height: 100%;"},ot(n)?n:{default:()=>[n]})]}):e(k,{class:f.layoutMain,style:this.mainStyle,direction:"vertical"},{default:()=>[e(O,{wrapClass:"page",wrapStyle:"flex: 1",viewStyle:"display: flex; flex-direction: column; min-height: 100%;"},{default:()=>[e(t,null,null),F(e(H,{style:this.tabbarStyle},null),[[L,this.setting.tabbar]]),n]})]})]})}});export{ht as default};
