import{b as E,u as v,o as C,T as d,c as b,d as D,e as g,f as P,_ as k}from"./index-BtO3GZow.js";import{r as y,f as H,o as S,$ as T,Z as w,e as B,d as I,ai as L,a as N,c as A,W as p,P as h,U as z,L as F,a1 as O}from"./vue-DQAeMwFg.js";import"./vxe-table-BTLbE0TE.js";import{g as M}from"./util-2gofr4al.js";import{L as j,M as $,N as R,l as q}from"./element-CQCkr2zs.js";import"./iconify-D2I_WxkC.js";import"./wangeditor-BgtuP8hy.js";const J={getList(e){return E.get("/demo/list",{params:e})}};function Y(e){const t=y(0),a=H(()=>t.value+"px"),l=v();function r(){const i=document.querySelector(".el-scrollbar__wrap.page");t.value=i.scrollHeight-(l.fixedHeader?24:114)-((e==null?void 0:e.extraHeight)||0)}return S(()=>{r()}),{pageHeight:t,pageHeightPx:a}}function V(e){const t=y();function a(n){var f,o;const u=(o=(f=e.value.formConfig)==null?void 0:f.items)==null?void 0:o.find(s=>s.field===n.field);j(u,n.key,n.value)}function l(){e.value.loading=!0}function r(){e.value.loading=!1}async function i(n){var u;try{l(),await(n==null?void 0:n()),await((u=t.value)==null?void 0:u.commitProxy("query"))}finally{r()}}function c(n,u){const f=Object.keys(u);let o=$(n);for(const s of f){const m=u[s];o[s]?(o[m[0]]=o[s][0],o[m[1]]=o[s][1],o=R(o,[s])):o=R(o,m.concat(s))}return o}return{gridRef:t,updateFormItem:a,showLoading:l,hideLoading:r,refresh:i,processFormDateRanges:c}}const x=[{label:"管理员",value:"admin"},{label:"普通用户",value:"normal"}],_=[{label:"禁用",value:"0"},{label:"启用",value:"1"}],G=C(x);function K(){const e=T({gridConfig:{id:M(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",resizeConfig:{refreshDelay:10},toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:d.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:d.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:d.Select,options:x,props:{placeholder:"请选择"}}},{title:"状态",field:"status",itemRender:{name:d.Select,options:_,props:{placeholder:"请选择"}}},{title:"时间",field:"date",itemRender:{name:d.DatePicker,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"},defaultValue:[b(6),new Date]}},{itemRender:{name:D.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:g.Input}},{title:"角色",field:"role",formatter({cellValue:r}){return G[r]}},{title:"状态",field:"status",editRender:{name:g.Select,options:_}},{title:"备注",field:"remark",editRender:{name:g.Input}},{title:"创建时间",field:"createTs",formatter:P.Date}],pagerConfig:{background:!0,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:r,form:i})=>(i=a(i),await J.getList({pageSize:r.pageSize,current:r.currentPage,...i}))}}}}),t=V(w(e,"gridConfig"));function a(r){return t.processFormDateRanges(r,{date:["start","end"]})}function l(){t.refresh()}return{...B(e),gridExtHook:t,handleCustomRefresh:l}}const U=I({setup(){const{gridExtHook:e,...t}=K(),{pageHeightPx:a}=Y();return{...t,gridRef:e.gridRef,pageHeightPx:a}}});function W(e,t,a,l,r,i){const c=q,n=L("vxe-grid");return N(),A("div",{style:O({height:e.pageHeightPx})},[p(n,F({ref:"gridRef"},e.gridConfig),{toolbar_buttons:h(()=>[p(c,{type:"primary",link:"",onClick:e.handleCustomRefresh},{default:h(()=>[z(" 自定义刷新 ")]),_:1},8,["onClick"])]),_:1},16)],4)}const ne=k(U,[["render",W]]);export{ne as default};
