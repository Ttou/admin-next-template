System.register(["./chunk-libs-legacy-Dvva_1A1.js","./index-legacy-CMKulYw4.js"],(function(e,t){"use strict";var o,r,i,n,a,l,s,u,c,d,f,g,m,p,h,b,y,v,x,R,k,C,P,H,S,w,D,z,I;return{setters:[e=>{o=e.N,r=e.f,i=e.h,n=e.b1,a=e.b2,l=e.b3,s=e.r,u=e.t,c=e.v,d=e.d,f=e.av,g=e.az,m=e.j,p=e.ax,h=e.aE,b=e.p,y=e.b4,v=e.V,x=e.aj},e=>{R=e.b,k=e.u,C=e.o,P=e.d,H=e.T,S=e.e,w=e.f,D=e.h,z=e.i,I=e._}],execute:function(){const t={getList:e=>R.get("/demo/list",{params:e})};function _(e){const t=o(0),n=r((()=>t.value+"px")),a=k();return i((()=>{!function(){const o=document.querySelector(".el-scrollbar__wrap.page");t.value=o.scrollHeight-(a.fixedHeader?24:114)-(e?.extraHeight||0)}()})),{pageHeight:t,pageHeightPx:n}}const j=[{label:"管理员",value:"admin"},{label:"普通用户",value:"normal"}],F=[{label:"禁用",value:"0"},{label:"启用",value:"1"}],q=C(j);function J(){const e=s({gridConfig:{id:P(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",resizeConfig:{refreshDelay:10},toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:H.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:H.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:H.Select,options:j,props:{placeholder:"请选择"}}},{title:"状态",field:"status",itemRender:{name:H.Select,options:F,props:{placeholder:"请选择"}}},{title:"时间",field:"date",itemRender:{name:H.DatePicker,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"},defaultValue:[S(6),new Date]}},{itemRender:{name:w.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:D.Input}},{title:"角色",field:"role",formatter:({cellValue:e})=>q[e]},{title:"状态",field:"status",editRender:{name:D.Select,options:F}},{title:"备注",field:"remark",editRender:{name:D.Input}},{title:"创建时间",field:"createTs",formatter:z.Date}],pagerConfig:{background:!0,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:e,form:o})=>(o=function(e){return r.processFormDateRanges(e,{date:["start","end"]})}(o),await t.getList({pageSize:e.pageSize,current:e.currentPage,...o}))}}}}),r=function(e){const t=o();function r(){e.value.loading=!0}function i(){e.value.loading=!1}return{gridRef:t,updateFormItem:function(t){const o=e.value.formConfig?.items?.find((e=>e.field===t.field));n(o,t.key,t.value)},showLoading:r,hideLoading:i,refresh:async function(e){try{r(),await(e?.()),await(t.value?.commitProxy("query"))}finally{i()}},processFormDateRanges:function(e,t){const o=Object.keys(t);let r=a(e);for(const i of o){const e=t[i];r[i]?(r[e[0]]=r[i][0],r[e[1]]=r[i][1],r=l(r,[i])):r=l(r,e.concat(i))}return r}}}(u(e,"gridConfig"));return{...c(e),gridExtHook:r,handleCustomRefresh:function(){r.refresh()}}}const L=d({setup(){const{gridExtHook:e,...t}=J(),{pageHeightPx:o}=_();return{...t,gridRef:e.gridRef,pageHeightPx:o}}});e("default",I(L,[["render",function(e,t,o,r,i,n){const a=v,l=x;return f(),g("div",{style:y({height:e.pageHeightPx})},[m(l,b({ref:"gridRef"},e.gridConfig),{toolbar_buttons:p((()=>[m(a,{type:"primary",link:"",onClick:e.handleCustomRefresh},{default:p((()=>[h(" 自定义刷新 ")])),_:1},8,["onClick"])])),_:1},16)],4)}]]))}}}));
