import{N as x,f as b,h as E,b1 as v,b2 as C,b3 as p,r as D,t as k,v as P,d as H,av as S,az as T,j as h,ax as R,aE as w,p as B,b4 as I,V as N,aj as z}from"./chunk-libs-CwqTQsJI.js";import{b as A,u as L,o as j,d as F,T as d,e as O,f as M,h as g,i as V,_ as q}from"./index-C5qALKjg.js";const J={getList(e){return A.get("/demo/list",{params:e})}};function Y(e){const t=x(0),n=b(()=>t.value+"px"),l=L();function r(){const i=document.querySelector(".el-scrollbar__wrap.page");t.value=i.scrollHeight-(l.fixedHeader?24:114)-((e==null?void 0:e.extraHeight)||0)}return E(()=>{r()}),{pageHeight:t,pageHeightPx:n}}function $(e){const t=x();function n(a){var f,o;const u=(o=(f=e.value.formConfig)==null?void 0:f.items)==null?void 0:o.find(s=>s.field===a.field);v(u,a.key,a.value)}function l(){e.value.loading=!0}function r(){e.value.loading=!1}async function i(a){var u;try{l(),await(a==null?void 0:a()),await((u=t.value)==null?void 0:u.commitProxy("query"))}finally{r()}}function c(a,u){const f=Object.keys(u);let o=C(a);for(const s of f){const m=u[s];o[s]?(o[m[0]]=o[s][0],o[m[1]]=o[s][1],o=p(o,[s])):o=p(o,m.concat(s))}return o}return{gridRef:t,updateFormItem:n,showLoading:l,hideLoading:r,refresh:i,processFormDateRanges:c}}const y=[{label:"管理员",value:"admin"},{label:"普通用户",value:"normal"}],_=[{label:"禁用",value:"0"},{label:"启用",value:"1"}],G=j(y);function K(){const e=D({gridConfig:{id:F(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",resizeConfig:{refreshDelay:10},toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:d.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:d.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:d.Select,options:y,props:{placeholder:"请选择"}}},{title:"状态",field:"status",itemRender:{name:d.Select,options:_,props:{placeholder:"请选择"}}},{title:"时间",field:"date",itemRender:{name:d.DatePicker,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"},defaultValue:[O(6),new Date]}},{itemRender:{name:M.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:g.Input}},{title:"角色",field:"role",formatter({cellValue:r}){return G[r]}},{title:"状态",field:"status",editRender:{name:g.Select,options:_}},{title:"备注",field:"remark",editRender:{name:g.Input}},{title:"创建时间",field:"createTs",formatter:V.Date}],pagerConfig:{background:!0,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:r,form:i})=>(i=n(i),await J.getList({pageSize:r.pageSize,current:r.currentPage,...i}))}}}}),t=$(k(e,"gridConfig"));function n(r){return t.processFormDateRanges(r,{date:["start","end"]})}function l(){t.refresh()}return{...P(e),gridExtHook:t,handleCustomRefresh:l}}const Q=H({setup(){const{gridExtHook:e,...t}=K(),{pageHeightPx:n}=Y();return{...t,gridRef:e.gridRef,pageHeightPx:n}}});function U(e,t,n,l,r,i){const c=N,a=z;return S(),T("div",{style:I({height:e.pageHeightPx})},[h(a,B({ref:"gridRef"},e.gridConfig),{toolbar_buttons:R(()=>[h(c,{type:"primary",link:"",onClick:e.handleCustomRefresh},{default:R(()=>[w(" 自定义刷新 ")]),_:1},8,["onClick"])]),_:1},16)],4)}const Z=q(Q,[["render",U]]);export{Z as default};
