import{F as x,f as b,h as v,b3 as E,b4 as C,b5 as p,r as D,t as k,v as P,d as S,aw as H,ax as w,aB as T,j as h,az as R,aG as B,p as I,b6 as z,S as A}from"./chunk-libs-C9BIETP2.js";import{b as F,u as L,o as N,T as d,c as O,d as j,e as g,f as M,_ as q}from"./index-C2Oyyxrl.js";import{g as J}from"./util-Ba0bljAt.js";const Y={getList(e){return F.get("/demo/list",{params:e})}};function $(e){const t=x(0),a=b(()=>t.value+"px"),l=L();function r(){const i=document.querySelector(".el-scrollbar__wrap.page");t.value=i.scrollHeight-(l.fixedHeader?24:114)-((e==null?void 0:e.extraHeight)||0)}return v(()=>{r()}),{pageHeight:t,pageHeightPx:a}}function G(e){const t=x();function a(n){var f,o;const u=(o=(f=e.value.formConfig)==null?void 0:f.items)==null?void 0:o.find(s=>s.field===n.field);E(u,n.key,n.value)}function l(){e.value.loading=!0}function r(){e.value.loading=!1}async function i(n){var u;try{l(),await(n==null?void 0:n()),await((u=t.value)==null?void 0:u.commitProxy("query"))}finally{r()}}function c(n,u){const f=Object.keys(u);let o=C(n);for(const s of f){const m=u[s];o[s]?(o[m[0]]=o[s][0],o[m[1]]=o[s][1],o=p(o,[s])):o=p(o,m.concat(s))}return o}return{gridRef:t,updateFormItem:a,showLoading:l,hideLoading:r,refresh:i,processFormDateRanges:c}}const y=[{label:"管理员",value:"admin"},{label:"普通用户",value:"normal"}],_=[{label:"禁用",value:"0"},{label:"启用",value:"1"}],V=N(y);function K(){const e=D({gridConfig:{id:J(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",resizeConfig:{refreshDelay:10},toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:d.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:d.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:d.Select,options:y,props:{placeholder:"请选择"}}},{title:"状态",field:"status",itemRender:{name:d.Select,options:_,props:{placeholder:"请选择"}}},{title:"时间",field:"date",itemRender:{name:d.DatePicker,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"},defaultValue:[O(6),new Date]}},{itemRender:{name:j.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:g.Input}},{title:"角色",field:"role",formatter({cellValue:r}){return V[r]}},{title:"状态",field:"status",editRender:{name:g.Select,options:_}},{title:"备注",field:"remark",editRender:{name:g.Input}},{title:"创建时间",field:"createTs",formatter:M.Date}],pagerConfig:{background:!0,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:r,form:i})=>(i=a(i),await Y.getList({pageSize:r.pageSize,current:r.currentPage,...i}))}}}}),t=G(k(e,"gridConfig"));function a(r){return t.processFormDateRanges(r,{date:["start","end"]})}function l(){t.refresh()}return{...P(e),gridExtHook:t,handleCustomRefresh:l}}const Q=S({setup(){const{gridExtHook:e,...t}=K(),{pageHeightPx:a}=$();return{...t,gridRef:e.gridRef,pageHeightPx:a}}});function U(e,t,a,l,r,i){const c=A,n=H("vxe-grid");return w(),T("div",{style:z({height:e.pageHeightPx})},[h(n,I({ref:"gridRef"},e.gridConfig),{toolbar_buttons:R(()=>[h(c,{type:"primary",link:"",onClick:e.handleCustomRefresh},{default:R(()=>[B(" 自定义刷新 ")]),_:1},8,["onClick"])]),_:1},16)],4)}const ee=q(Q,[["render",U]]);export{ee as default};
