import{ad as b,ae as x,af as P,ag as D,ah as O,ai as R,aj as S,ak as L,al as k,am as T,an as w,ao as H,ap as A,r as _,L as F,aq as B,o as I,ar as N,as as j,at as z,s as G,au as M,av as c,aw as q,ax as Y,ay as m,az as J,t as $,v as K,d as V,x as U,y as Q,a as W,c as X,j as p,z as h,D as Z,m as ee,a7 as te,T as ne}from"./index-VnQc-Xww.js";var re="[object Object]",oe=Function.prototype,ae=Object.prototype,C=oe.toString,se=ae.hasOwnProperty,ie=C.call(Object);function le(e){if(!b(e)||x(e)!=re)return!1;var t=P(e);if(t===null)return!0;var n=se.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&C.call(n)==ie}function ue(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function ce(e,t){return t.length<2?e:D(e,O(t,0,-1))}function fe(e,t){return t=R(t,e),e=ce(e,t),e==null||delete e[S(ue(t))]}function de(e){return le(e)?void 0:e}var ge=1,me=2,pe=4,y=L(function(e,t){var n={};if(e==null)return n;var s=!1;t=k(t,function(o){return o=R(o,e),s||(s=o.length>1),o}),T(e,w(e),n),s&&(n=H(n,ge|me|pe,de));for(var r=t.length;r--;)fe(n,t[r]);return n});const he={getList(e){return A.get("/demo/list",{params:e})}};function ye(e){const t=_(0),n=F(()=>t.value+"px"),s=B();function r(){const o=document.querySelector(".el-scrollbar__wrap.page");t.value=o.scrollHeight-(s.fixedHeader?24:114)-((e==null?void 0:e.extraHeight)||0)}return I(()=>{r()}),{pageHeight:t,pageHeightPx:n}}function ve(e){const t=_();function n(i){var d,a;const u=(a=(d=e.value.formConfig)==null?void 0:d.items)==null?void 0:a.find(l=>l.field===i.field);N(u,i.key,i.value)}function s(){e.value.loading=!0}function r(){e.value.loading=!1}async function o(i){var u;try{s(),await(i==null?void 0:i()),await((u=t.value)==null?void 0:u.commitProxy("query"))}finally{r()}}function f(i,u){const d=Object.keys(u);let a=j(i);for(const l of d){const g=u[l];a[l]?(a[g[0]]=a[l][0],a[g[1]]=a[l][1],a=y(a,[l])):a=y(a,g.concat(l))}return a}return{gridRef:t,updateFormItem:n,showLoading:s,hideLoading:r,refresh:o,processFormDateRanges:f}}const E=[{label:"管理员",value:"admin"},{label:"普通用户",value:"normal"}],v=[{label:"禁用",value:"0"},{label:"启用",value:"1"}],Re=z(E);function _e(){const e=G({gridConfig:{id:M(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",resizeConfig:{refreshDelay:10},toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:c.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:c.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:c.Select,options:E,props:{placeholder:"请选择"}}},{title:"状态",field:"status",itemRender:{name:c.Select,options:v,props:{placeholder:"请选择"}}},{title:"时间",field:"date",itemRender:{name:c.DatePicker,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"},defaultValue:[q(6),new Date]}},{itemRender:{name:Y.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:m.Input}},{title:"角色",field:"role",formatter({cellValue:r}){return Re[r]}},{title:"状态",field:"status",editRender:{name:m.Select,options:v}},{title:"备注",field:"remark",editRender:{name:m.Input}},{title:"创建时间",field:"createTs",formatter:J.Date}],pagerConfig:{background:!0,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:r,form:o})=>(o=n(o),await he.getList({pageSize:r.pageSize,current:r.currentPage,...o}))}}}}),t=ve($(e,"gridConfig"));function n(r){return t.processFormDateRanges(r,{date:["start","end"]})}function s(){t.refresh()}return{...K(e),gridExtHook:t,handleCustomRefresh:s}}const Ce=V({setup(){const{gridExtHook:e,...t}=_e(),{pageHeightPx:n}=ye();return{...t,gridRef:e.gridRef,pageHeightPx:n}}});function Ee(e,t,n,s,r,o){const f=ne,i=Q("vxe-grid");return W(),X("div",{style:te({height:e.pageHeightPx})},[p(i,ee({ref:"gridRef"},e.gridConfig),{toolbar_buttons:h(()=>[p(f,{type:"primary",link:"",onClick:e.handleCustomRefresh},{default:h(()=>[Z(" 自定义刷新 ")]),_:1},8,["onClick"])]),_:1},16)],4)}const xe=U(Ce,[["render",Ee]]);export{xe as default};
