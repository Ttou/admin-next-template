import{J as m,f as h,h as R,aR as _,r as v,aS as x,t as E,E as y,d as C,n as P,p as S,q as b,B as f,an as g,ar as H,z as k,aT as T,R as B}from"./chunk-libs-5cJmPbi5.js";import{d as D,u as w,T as l,e as I,f as u,h as z,_ as A}from"./index-lo58D2SJ.js";import{g as L}from"./util-EQBvJQnI.js";const N={getList(e){return D.get("/demo/list",{params:e})}};function q(e){const a=m(0),r=h(()=>a.value+"px"),n=w();function t(){const s=document.querySelector(".el-scrollbar__wrap.page");a.value=s.scrollHeight-(n.fixedHeader?24:114)-((e==null?void 0:e.extraHeight)||0)}return R(()=>{t()}),{pageHeight:a,pageHeightPx:r}}function J(e){const a=m();function r(o){var d,c;const i=(c=(d=e.value.formConfig)==null?void 0:d.items)==null?void 0:c.find(p=>p.field===o.field);_(i,o.key,o.value)}function n(){e.value.loading=!0}function t(){e.value.loading=!1}async function s(o){var i;try{n(),await(o==null?void 0:o()),await((i=a.value)==null?void 0:i.commitProxy("query"))}finally{t()}}return{gridRef:a,updateFormItem:r,showLoading:n,hideLoading:t,refresh:s}}function M(){const e=v({gridConfig:{id:L(),showOverflow:!0,border:!0,loading:!1,keepSource:!0,height:"auto",resizeConfig:{refreshDelay:10},toolbarConfig:{perfect:!0,custom:!0,refresh:!0,zoom:!0,slots:{buttons:"toolbar_buttons"}},editConfig:{trigger:"click",showStatus:!0},customConfig:{storage:!0},formConfig:{items:[{title:"账号",field:"account",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"昵称",field:"nickname",itemRender:{name:l.Input,props:{placeholder:"请输入"}}},{title:"角色",field:"role",itemRender:{name:l.Select,options:[{label:"admin",value:"admin"},{label:"normal",value:"normal"}],props:{placeholder:"请选择"}}},{title:"状态",field:"status",itemRender:{name:l.Select,options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}],props:{placeholder:"请选择"}}},{title:"时间",field:"date",itemRender:{name:l.DatePicker,props:{type:"datetimerange",startPlaceholder:"开始时间",endPlaceholder:"结束时间",format:"YYYY-MM-DD HH:mm:ss"}}},{itemRender:{name:I.FormItemBtns}}]},columns:[{type:"checkbox",width:50},{title:"ID",field:"id"},{title:"账号",field:"account"},{title:"邮箱",field:"email"},{title:"昵称",field:"nickname",editRender:{name:u.Input}},{title:"角色",field:"role"},{title:"状态",field:"status",editRender:{name:u.Select,options:[{label:"禁用",value:"0"},{label:"启用",value:"1"}]}},{title:"备注",field:"remark",editRender:{name:u.Input}},{title:"创建时间",field:"createTs",formatter:z.Date}],pagerConfig:{background:!0,layouts:["PrevJump","PrevPage","JumpNumber","NextPage","NextJump","Sizes","FullJump","Total"],pageSize:15},proxyConfig:{seq:!0,form:!0,props:{result:"content",total:"total"},ajax:{query:async({page:n,form:t})=>(t.date&&(t.start=t.date[0],t.end=t.date[1],t=x(t,["date"])),await N.getList({pageSize:n.pageSize,current:n.currentPage,...t}))}}}}),a=J(E(e,"gridConfig"));function r(){a.refresh()}return{...y(e),gridExtHook:a,handleCustomRefresh:r}}const F=C({setup(){const{gridExtHook:e,...a}=M(),{pageHeightPx:r}=q();return{...a,gridRef:e.gridRef,pageHeightPx:r}}});function Y(e,a,r,n,t,s){const o=B,i=P("vxe-grid");return S(),b("div",{style:T({height:e.pageHeightPx})},[f(i,k({ref:"gridRef"},e.gridConfig),{toolbar_buttons:g(()=>[f(o,{type:"primary",link:"",onClick:e.handleCustomRefresh},{default:g(()=>[H(" 自定义刷新 ")]),_:1},8,["onClick"])]),_:1},16)],4)}const O=A(F,[["render",Y]]);export{O as default};
