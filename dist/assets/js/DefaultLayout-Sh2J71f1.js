import{d as h,f as u,j as e,b1 as ne,b2 as ae,b3 as le,I as c,aY as _,aZ as $,b4 as oe,ar as se,al as ie,b5 as ue,r as C,b6 as re,aj as K,v as L,b7 as ce,A as T,b8 as N,b9 as f,au as m,ba as U,g as q,bb as B,bc as de,bd as he,be as pe,ag as fe,B as me,h as be,x as ge,y as ye,bf as ve,bg as Se,bh as k,bi as E,bj as F,bk as P,bl as _e}from"./chunk-libs-PA-eaLXr.js";import{j as G,k as Ce,u as M,l as x,i as Te,g as J,m as A}from"./index-gKMhesCn.js";const Me=h({name:"Content",setup(){const t=G();return{cachedTabs:u(()=>t.cachedTabs)}},render(){return e(le,null,{default:({Component:t,route:n})=>e(ne,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(ae,{max:20,include:this.cachedTabs},[e(t,{key:n.fullPath},null)])]})})}}),we="logo__guxAe",ke="logoIcon__RpGcC",I={logo:we,logoIcon:ke},Ee=h({name:"Logo",render(){return e("div",{class:I.logo},[e(c,{class:I.logoIcon,icon:"@local:custom:logo"},null)])}}),j=h({name:"MainMenu",props:{item:{type:Object,required:!0}},setup(t){const n=_(),o=$(),l=u(()=>t.item.meta?!t.item.meta.hidden:!1);function r(){n.path!==t.item.path&&o.push(t.item.path).catch(s=>{console.error(s)})}return{show:l,handleJump:r}},render(){return this.show?e(oe,{index:this.item.path,onClick:this.handleJump},{default:()=>this.item.meta.icon?e(c,{icon:this.item.meta.icon},null):null,title:()=>e("span",null,[this.item.meta.title])}):null}}),Oe="menu__7wVZi",De={menu:Oe},H=h({name:"SubMenu",props:{item:{type:Object,required:!0}},setup(t){return{onlyOneChild:u(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e(j,{item:this.item.children[0]},null):e(ue,{index:this.item.path},{title:()=>e(se,null,[this.item.meta.icon?e(c,{icon:this.item.meta.icon},null):null,e("span",null,[this.item.meta.title])]),default:()=>this.item.children.map(t=>t.children?e(ie("sub-menu"),{item:t,key:t.path},null):e(j,{item:t,key:t.path},null))})}});function Re(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!T(t)}const xe=h({name:"Menu",components:{SubMenu:H},setup(){const t=C({list:[]}),n=_(),o=Ce(),l=M(),r=u(()=>re(o.routes)),s=u(()=>l.$state),a=u(()=>n.path);function b(g,S=""){for(const d of g)if(d.path=S+(d.path.startsWith("/")?d.path:"/".concat(d.path)),delete d.component,delete d.redirect,d.children){if(d.children.length===0)continue;b(d.children,d.path)}return g}function w(){const g=b(r.value);t.list=g}return K(()=>{w()}),{...L(t),CSS_VARS:x,activeMenu:a,setting:s}},render(){let t;return e(ce,{mode:"vertical",class:De.menu,defaultActive:this.activeMenu,backgroundColor:this.CSS_VARS.menuBg,textColor:this.CSS_VARS.menuText,activeTextColor:this.CSS_VARS.menuActiveText,collapse:!this.setting.sideOpened,collapseTransition:!1,uniqueOpened:!0},Re(t=this.list.map(n=>n.children?e(H,{item:n,key:n.path},null):e(j,{item:n,key:n.path},null)))?t:{default:()=>[t]})}}),Ae="avatarWrapper__fSpCT",je="avatar__thdiM",$e="avatarDropdownMenu__QS9oQ",O={avatarWrapper:Ae,avatar:je,avatarDropdownMenu:$e},Le=h({name:"Avatar",setup(){const t=C({commandMap:{profile:()=>r(),logout:()=>s()}}),n=$(),o=Te(),{$msgbox:l}=J();function r(){n.push({path:A.USER_CENTER})}function s(){l.confirm("确认退出登录？","提示",{type:"warning"}).then(async()=>{await o.logout(),n.replace({path:"/login"})}).catch(()=>{})}function a(b){t.commandMap[b]()}return{handleCommand:a}},render(){return e(U,{onCommand:this.handleCommand},{default:()=>e("div",{class:O.avatarWrapper},[e(c,{class:O.avatar,icon:"@local:custom:avatar",inline:!0},null)]),dropdown:()=>e(N,{class:O.avatarDropdownMenu},{default:()=>[e(f,{command:"profile"},{default:()=>[e(c,{icon:"@local:icon-park-outline:user",inline:!0},null),e("span",null,[m("个人中心")])]}),e(f,{command:"logout"},{default:()=>[e(c,{icon:"@local:icon-park-outline:logout",inline:!0},null),e("span",null,[m("退出登录")])]})]})})}}),We="breadcrumb__X6SBW",Be={breadcrumb:We};function Fe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!T(t)}const Pe=h({name:"Breadcrumb",setup(){const t=C({breadcrumbs:[]}),n=_();function o(){var s;const l=n.matched,r=[];for(const a of l)a.path!=="/"&&r.push({path:a.path.startsWith("/")?a.path:"/".concat(a.path),title:((s=a.meta)==null?void 0:s.title)||"-"});t.breadcrumbs=r}return q(()=>n.path,l=>{l.startsWith("/redirect/")||o()}),K(()=>{o()}),{...L(t)}},render(){let t;return e(de,{class:Be.breadcrumb},Fe(t=this.breadcrumbs.map((n,o)=>o===this.breadcrumbs.length-1?e(B,null,{default:()=>[n.title]}):e(B,{to:{path:n.path}},{default:()=>[n.title]})))?t:{default:()=>[t]})}}),Ie="navbar__oMEpT",He="left__32oF1",Ve="right__HxIwx",D={navbar:Ie,left:He,right:Ve},Ke=h({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:n,toggle:o}=he(),{$message:l}=J(),r=u(()=>t.value?"@local:icon-park-outline:off-screen":"@local:icon-park-outline:full-screen");function s(){n?o():l.warning("浏览器不支持全屏")}return{icon:r,handleClick:s}},render(){return e("div",{title:"全屏",onClick:this.handleClick},[e(c,{icon:this.icon,inline:!0},null)])}}),Ne="trigger__MwLP9",Ue={trigger:Ne},qe=h({name:"Trigger",setup(){const t=M(),n=u(()=>!t.sideOpened),o=u(()=>n.value?"@local:icon-park-outline:menu-unfold":"@local:icon-park-outline:menu-fold");function l(){t.change({key:"sideOpened",value:n.value})}return{collapsed:n,icon:o,handleClick:l}},render(){return e(c,{class:Ue.trigger,icon:this.icon,onClick:pe(this.handleClick,["native"])},null)}}),Ge=h({name:"Navbar",render(){return e("div",{class:D.navbar},[e("div",{class:D.left},[e(qe,null,null),e(Pe,null,null)]),e("div",{class:D.right},[e(fe,{size:15},{default:()=>[e(Ke,null,null),e(Le,null,null)]})])])}}),Je="tabbar__vE4we",Qe="tabsMenu__REfEi",Ze="tabsDropdownMenu__j4BGb",R={tabbar:Je,tabsMenu:Qe,tabsDropdownMenu:Ze};function ze(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!T(t)}const V=h({name:"Tabbar",setup(){const t=C({activeKey:"",commandMap:{refresh:()=>d(),closeLeft:()=>Z(),closeRight:()=>z(),closeOther:()=>X(),closeAll:()=>Y()}}),n=_(),o=$(),l=G(),r=M(),s=u(()=>l.visitedTabs),a=u(()=>s.value.findIndex(i=>i.fullPath===t.activeKey)===0),b=u(()=>s.value.findIndex(i=>i.fullPath===t.activeKey)===s.value.length-1),w=u(()=>s.value.length<=1);function g(i){return t.activeKey===i.fullPath}function S(){const{name:i,path:p,fullPath:v}=n;return i&&[A.LOGIN,A.ERROR].indexOf(p)===-1&&(l.addTab(n),t.activeKey=v),!1}function d(){l.delCachedTab(n).then(()=>{const{fullPath:i}=n;me(()=>{o.replace({path:"/redirect"+i})})})}function Q(i){const p=s.value.find(v=>v.fullPath===i);l.delTab(p).then(({visitedTabs:v})=>{g(p)&&W(v)})}function Z(){l.delLeftTabs(n)}function z(){l.delRightTabs(n)}function X(){l.delOthersTabs(n)}function Y(){l.delAllTabs().then(({visitedTabs:i})=>{W(i)})}function ee(i){o.push(i)}function W(i){const p=i.slice(-1)[0];p?o.push(p.fullPath):n.name===r.homeRoute.name?o.replace({path:"/redirect"+n.fullPath}):o.replace("/")}function te(i){t.commandMap[i]()}return q(()=>n.path,()=>{S()}),be(()=>{S()}),{...L(t),visitedTabs:s,closeLeftDisabled:a,closeRightDisabled:b,closeOtherDisabled:w,handleCloseTab:Q,handleSelectTab:ee,handleCommand:te}},render(){let t;return e("div",{class:R.tabbar},[e(ge,{modelValue:this.activeKey,"onUpdate:modelValue":n=>this.activeKey=n,onTabChange:this.handleSelectTab,onTabRemove:this.handleCloseTab},ze(t=this.visitedTabs.map(n=>e(ye,{key:n.fullPath,name:n.fullPath,label:n.meta.title,closable:!0},null)))?t:{default:()=>[t]}),e(U,null,{default:()=>e("div",{class:R.tabsMenu},[e(c,{icon:"@local:icon-park-outline:down",inline:!0},null)]),dropdown:()=>e(N,{class:R.tabsDropdownMenu},{default:()=>[e(f,{command:"refresh"},{default:()=>[e(c,{icon:"@local:icon-park-outline:redo",inline:!0},null),e("span",null,[m("刷新页面")])]}),e(f,{command:"closeLeft",disabled:this.closeLeftDisabled,divided:!0},{default:()=>[e(c,{icon:"@local:icon-park-outline:to-left",inline:!0},null),e("span",null,[m("关闭左侧")])]}),e(f,{command:"closeRight",disabled:this.closeRightDisabled},{default:()=>[e(c,{icon:"@local:icon-park-outline:to-right",inline:!0},null),e("span",null,[m("关闭右侧")])]}),e(f,{command:"closeOther",disabled:this.closeOtherDisabled,divided:!0},{default:()=>[e(c,{icon:"@local:icon-park-outline:close",inline:!0},null),e("span",null,[m("关闭其它")])]}),e(f,{command:"closeAll"},{default:()=>[e(c,{icon:"@local:icon-park-outline:close-one",inline:!0},null),e("span",null,[m("关闭所有")])]})]})})])}}),Xe="layout__ka9hA",Ye="layoutSide__Jaj8o",et="layoutMain__7naRu",tt="layoutHeader__5DDHg",nt="layoutContent__3Boka",y={layout:Xe,layoutSide:Ye,layoutMain:et,layoutHeader:tt,layoutContent:nt};function at(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!T(t)}const st=h({name:"DefaultLayout",setup(){const t=M(),n=u(()=>t.$state),o=u(()=>n.value.sideOpened?n.value.sideOpenedWidth:n.value.sideClosedWidth),l=u(()=>{const a={};return n.value.sideOpened?(a.marginLeft=n.value.sideOpenedWidth,a.width="calc(100vw - ".concat(n.value.sideOpenedWidth,")")):(a.marginLeft=n.value.sideClosedWidth,a.width="calc(100vw - ".concat(n.value.sideClosedWidth,")")),a}),r=u(()=>{const a={height:x.headerHeight};return n.value.fixedHeader&&(a.position="sticky",a.top="0px"),a}),s=u(()=>{const a={};return n.value.fixedHeader&&(a.position="sticky",a.top=x.headerHeight),a});return{setting:n,asideWidth:o,mainStyle:l,headerStyle:r,tabbarStyle:s}},render(){const t=()=>e(_e,{class:y.layoutHeader,style:this.headerStyle},{default:()=>[e(Ge,null,null)]}),n=e(ve,{class:y.layoutContent},{default:()=>[e(Me,null,null)]});return e(E,{class:y.layout},{default:()=>[e(Se,{class:y.layoutSide,width:this.asideWidth},{default:()=>[e(Ee,null,null),e(k,null,{default:()=>[e(xe,null,null)]})]}),this.setting.fixedHeader?e(E,{class:y.layoutMain,style:this.mainStyle,direction:"vertical"},{default:()=>[e(t,null,null),F(e(V,{style:this.tabbarStyle},null),[[P,this.setting.tabbar]]),e(k,{wrapClass:"page",wrapStyle:"flex: 1",viewStyle:"display: flex; min-height: 100%;"},at(n)?n:{default:()=>[n]})]}):e(E,{class:y.layoutMain,style:this.mainStyle,direction:"vertical"},{default:()=>[e(k,{wrapClass:"page",wrapStyle:"flex: 1",viewStyle:"display: flex; flex-direction: column; min-height: 100%;"},{default:()=>[e(t,null,null),F(e(V,{style:this.tabbarStyle},null),[[P,this.setting.tabbar]]),n]})]})]})}});export{st as default};
