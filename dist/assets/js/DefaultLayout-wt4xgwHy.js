import{d as v,f as h,n as m,p as l,am as _,an as s,B as o,b0 as se,b1 as le,b2 as ce,I as D,q as g,A as f,aX as B,aY as G,s as w,aq as H,b3 as j,b4 as re,v as W,F as S,b5 as ue,r as P,b6 as ie,ak as Y,E as J,b7 as de,b8 as Z,b9 as X,ba as x,g as ee,bb as me,ar as k,bc as pe,bd as _e,ah as fe,G as be,h as he,aP as $e,aO as ye,be as ne,aT as E,bf as z,bg as U,bh as ge,bi as ve,bj as Ce,bk as Me,bl as Se}from"./chunk-libs-7Cltkq2N.js";import{j as te,_ as C,k as Te,u as V,C as q,i as ke,g as oe,l as Q}from"./index--Ub32lV_.js";const we=v({name:"Content",setup(){const e=te();return{cachedTabs:h(()=>e.cachedTabs)}}});function De(e,n,c,a,d,r){const t=m("router-view");return l(),_(t,null,{default:s(({Component:p,route:u})=>[o(ce,{name:"fade-slide",mode:"out-in",appear:""},{default:s(()=>[(l(),_(se,{max:20,include:e.cachedTabs},[(l(),_(le(p),{key:u.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}const Ie=C(we,[["render",De]]),Oe=v({name:"Logo",components:{Icon:D}}),Re="logo__zQIJV",Ae="logoIcon__79ZJG",Ee={logo:Re,logoIcon:Ae};function Fe(e,n,c,a,d,r){const t=m("Icon");return l(),g("div",{class:f(e.$style.logo)},[o(t,{class:f(e.$style.logoIcon),icon:"@local:custom:logo"},null,8,["class"])],2)}const Le={$style:Ee},He=C(Oe,[["render",Fe],["__cssModules",Le]]),Be=v({name:"MainMenu",components:{Icon:D},props:{item:{type:Object,required:!0}},setup(e){const n=B(),c=G(),a=h(()=>e.item.meta?!e.item.meta.hidden:!1);function d(){n.path!==e.item.path&&c.push(e.item.path).catch(r=>{console.error(r)})}return{show:a,handleJump:d}}});function We(e,n,c,a,d,r){const t=m("Icon"),p=re;return e.show?(l(),_(p,{key:0,index:e.item.path,onClick:e.handleJump},{title:s(()=>[w("span",null,H(e.item.meta.title),1)]),default:s(()=>[e.item.meta.icon?(l(),_(t,{key:0,icon:e.item.meta.icon},null,8,["icon"])):j("",!0)]),_:1},8,["index","onClick"])):j("",!0)}const ae=C(Be,[["render",We]]),Pe=v({name:"SubMenu",components:{Icon:D,MainMenu:ae},props:{item:{type:Object,required:!0}},setup(e){return{onlyOneChild:h(()=>e.item.children.length===1?e.item.meta?!e.item.meta.alwaysShow:!0:!1)}}});function Ve(e,n,c,a,d,r){const t=m("MainMenu"),p=m("Icon"),u=m("sub-menu",!0),i=ue;return e.onlyOneChild?(l(),_(t,{key:0,item:e.item.children[0]},null,8,["item"])):(l(),_(i,{key:1,index:e.item.path},{title:s(()=>[e.item.meta.icon?(l(),_(p,{key:0,icon:e.item.meta.icon},null,8,["icon"])):j("",!0),w("span",null,H(e.item.meta.title),1)]),default:s(()=>[(l(!0),g(S,null,W(e.item.children,y=>(l(),g(S,{key:y.path},[y.children?(l(),_(u,{key:0,item:y},null,8,["item"])):(l(),_(t,{key:1,item:y},null,8,["item"]))],64))),128))]),_:1},8,["index"]))}const Ne=C(Pe,[["render",Ve]]),Ke=v({name:"Menu",components:{MainMenu:ae,SubMenu:Ne},setup(){const e=P({list:[]}),n=B(),c=Te(),a=V(),d=h(()=>ie(c.routes)),r=h(()=>a.$state),t=h(()=>n.path);function p(i,y=""){for(const $ of i)if($.path=y+($.path.startsWith("/")?$.path:"/".concat($.path)),delete $.component,delete $.redirect,$.children){if($.children.length===0)continue;p($.children,$.path)}return i}function u(){const i=p(d.value);e.list=i}return Y(()=>{u()}),{...J(e),CSS_VARS:q,activeMenu:t,setting:r}}}),je="menu__-A-2y",qe={menu:je};function Ge(e,n,c,a,d,r){const t=m("SubMenu"),p=m("MainMenu"),u=de;return l(),_(u,{mode:"vertical",class:f(e.$style.menu),defaultActive:e.activeMenu,backgroundColor:e.CSS_VARS.menuBg,textColor:e.CSS_VARS.menuText,activeTextColor:e.CSS_VARS.menuActiveText,collapse:!e.setting.sideOpened,collapseTransition:!1,uniqueOpened:""},{default:s(()=>[(l(!0),g(S,null,W(e.list,i=>(l(),g(S,{key:i.path},[i.children?(l(),_(t,{key:0,item:i},null,8,["item"])):(l(),_(p,{key:1,item:i},null,8,["item"]))],64))),128))]),_:1},8,["class","defaultActive","backgroundColor","textColor","activeTextColor","collapse"])}const Je={$style:qe},ze=C(Ke,[["render",Ge],["__cssModules",Je]]),Ue=v({name:"Avatar",components:{Icon:D},setup(){const e=P({commandMap:{logout:()=>d()}}),n=G(),c=ke(),{$msgbox:a}=oe();function d(){a.confirm("确认退出登录？","提示",{type:"warning"}).then(async()=>{await c.logout(),n.replace({path:"/login"})}).catch(()=>{})}function r(t){e.commandMap[t]()}return{handleCommand:r}}}),Qe="avatarWrapper__JOIUc",Ye="avatar__dQh1A",Ze="avatarDropdownMenu__rO4q8",Xe={avatarWrapper:Qe,avatar:Ye,avatarDropdownMenu:Ze},xe=w("span",null,"退出登录",-1);function en(e,n,c,a,d,r){const t=m("Icon"),p=Z,u=X,i=x;return l(),_(i,{onCommand:e.handleCommand},{default:s(()=>[w("div",{class:f(e.$style.avatarWrapper)},[o(t,{class:f(e.$style.avatar),icon:"@local:custom:avatar",inline:!0},null,8,["class"])],2)]),dropdown:s(()=>[o(u,{class:f(e.$style.avatarDropdownMenu)},{default:s(()=>[o(p,{command:"logout"},{default:s(()=>[o(t,{icon:"@local:icon-park-outline:logout",inline:!0}),xe]),_:1})]),_:1},8,["class"])]),_:1},8,["onCommand"])}const nn={$style:Xe},tn=C(Ue,[["render",en],["__cssModules",nn]]),on=v({name:"Breadcrumb",setup(){const e=P({breadcrumbs:[]}),n=B();function c(){var r;const a=n.matched,d=[];for(const t of a)t.path!=="/"&&d.push({path:t.path.startsWith("/")?t.path:"/".concat(t.path),title:((r=t.meta)==null?void 0:r.title)||"-"});e.breadcrumbs=d}return ee(()=>n.path,a=>{a.startsWith("/redirect/")||c()}),Y(()=>{c()}),{...J(e)}}}),an="breadcrumb__hfMdT",sn={breadcrumb:an};function ln(e,n,c,a,d,r){const t=pe,p=me;return l(),_(p,{class:f(e.$style.breadcrumb)},{default:s(()=>[(l(!0),g(S,null,W(e.breadcrumbs,(u,i)=>(l(),g(S,{key:u.path},[i===e.breadcrumbs.length-1?(l(),_(t,{key:0},{default:s(()=>[k(H(u.title),1)]),_:2},1024)):(l(),_(t,{key:1,to:{path:u.path}},{default:s(()=>[k(H(u.title),1)]),_:2},1032,["to"]))],64))),128))]),_:1},8,["class"])}const cn={$style:sn},rn=C(on,[["render",ln],["__cssModules",cn]]),un=v({name:"ScreenFull",components:{Icon:D},setup(){const{isFullscreen:e,isSupported:n,toggle:c}=_e(),{$message:a}=oe(),d=h(()=>e.value?"@local:icon-park-outline:off-screen":"@local:icon-park-outline:full-screen");function r(){n?c():a.warning("浏览器不支持全屏")}return{icon:d,handleClick:r}}});function dn(e,n,c,a,d,r){const t=m("Icon");return l(),g("div",{title:"全屏",onClick:n[0]||(n[0]=(...p)=>e.handleClick&&e.handleClick(...p))},[o(t,{icon:e.icon,inline:!0},null,8,["icon"])])}const mn=C(un,[["render",dn]]),pn=v({name:"Trigger",components:{Icon:D},setup(){const e=V(),n=h(()=>!e.sideOpened),c=h(()=>n.value?"@local:icon-park-outline:menu-unfold":"@local:icon-park-outline:menu-fold");function a(){e.change({key:"sideOpened",value:n.value})}return{collapsed:n,icon:c,handleClick:a}}}),_n="trigger__j-CRM",fn={trigger:_n};function bn(e,n,c,a,d,r){const t=m("Icon");return l(),_(t,{class:f(e.$style.trigger),icon:e.icon,onClick:e.handleClick},null,8,["class","icon","onClick"])}const hn={$style:fn},$n=C(pn,[["render",bn],["__cssModules",hn]]),yn=v({name:"Navbar",components:{Avatar:tn,Breadcrumb:rn,ScreenFull:mn,Trigger:$n}}),gn="navbar__aHvZM",vn="left__Y6QG9",Cn="right__HOaOp",Mn={navbar:gn,left:vn,right:Cn};function Sn(e,n,c,a,d,r){const t=m("Trigger"),p=m("Breadcrumb"),u=m("ScreenFull"),i=m("Avatar"),y=fe;return l(),g("div",{class:f(e.$style.navbar)},[w("div",{class:f(e.$style.left)},[o(t),o(p)],2),w("div",{class:f(e.$style.right)},[o(y,{size:15},{default:s(()=>[o(u),o(i)]),_:1})],2)],2)}const Tn={$style:Mn},kn=C(yn,[["render",Sn],["__cssModules",Tn]]),wn=v({name:"Tabbar",components:{Icon:D},setup(){const e=P({activeKey:"",commandMap:{refresh:()=>$(),closeLeft:()=>N(),closeRight:()=>I(),closeOther:()=>K(),closeAll:()=>F()}}),n=B(),c=G(),a=te(),d=V(),r=h(()=>a.visitedTabs),t=h(()=>r.value.findIndex(b=>b.fullPath===e.activeKey)===0),p=h(()=>r.value.findIndex(b=>b.fullPath===e.activeKey)===r.value.length-1),u=h(()=>r.value.length<=1);function i(b){return e.activeKey===b.fullPath}function y(){const{name:b,path:T,fullPath:A}=n;return b&&[Q.LOGIN,Q.ERROR].indexOf(T)===-1&&(a.addTab(n),e.activeKey=A),!1}function $(){a.delCachedTab(n).then(()=>{const{fullPath:b}=n;be(()=>{c.replace({path:"/redirect"+b})})})}function M(b){const T=r.value.find(A=>A.fullPath===b);a.delTab(T).then(({visitedTabs:A})=>{i(T)&&O(A)})}function N(){a.delLeftTabs(n)}function I(){a.delRightTabs(n)}function K(){a.delOthersTabs(n)}function F(){a.delAllTabs().then(({visitedTabs:b})=>{O(b)})}function L(b){c.push(b)}function O(b){const T=b.slice(-1)[0];T?c.push(T.fullPath):n.name===d.homeRoute.name?c.replace({path:"/redirect"+n.fullPath}):c.replace("/")}function R(b){e.commandMap[b]()}return ee(()=>n.path,()=>{y()}),he(()=>{y()}),{...J(e),visitedTabs:r,closeLeftDisabled:t,closeRightDisabled:p,closeOtherDisabled:u,handleCloseTab:M,handleSelectTab:L,handleCommand:R}}}),Dn="tabbar__r3F2G",In="tabsMenu__tTAkh",On="tabsDropdownMenu__iMqwj",Rn={tabbar:Dn,tabsMenu:In,tabsDropdownMenu:On};function An(e,n,c,a,d,r){const t=ye,p=$e,u=m("Icon"),i=Z,y=X,$=x;return l(),g("div",{class:f(e.$style.tabbar)},[o(p,{modelValue:e.activeKey,"onUpdate:modelValue":n[0]||(n[0]=M=>e.activeKey=M),onTabChange:e.handleSelectTab,onTabRemove:e.handleCloseTab},{default:s(()=>[(l(!0),g(S,null,W(e.visitedTabs,M=>(l(),_(t,{key:M.fullPath,name:M.fullPath,label:M.meta.title,closable:""},null,8,["name","label"]))),128))]),_:1},8,["modelValue","onTabChange","onTabRemove"]),o($,{placement:"bottom-end",onCommand:e.handleCommand},{default:s(()=>[w("div",{class:f(e.$style.tabsMenu)},[o(u,{icon:"@local:icon-park-outline:down",inline:!0})],2)]),dropdown:s(()=>[o(y,{class:f(e.$style.tabsDropdownMenu)},{default:s(()=>[o(i,{command:"refresh"},{default:s(()=>[o(u,{icon:"@local:icon-park-outline:redo",inline:!0}),k(" 刷新页面 ")]),_:1}),o(i,{command:"closeLeft",disabled:e.closeLeftDisabled,divided:""},{default:s(()=>[o(u,{icon:"@local:icon-park-outline:to-left",inline:!0}),k(" 关闭左侧 ")]),_:1},8,["disabled"]),o(i,{command:"closeRight",disabled:e.closeRightDisabled},{default:s(()=>[o(u,{icon:"@local:icon-park-outline:to-right",inline:!0}),k(" 关闭右侧 ")]),_:1},8,["disabled"]),o(i,{command:"closeOther",disabled:e.closeOtherDisabled,divided:""},{default:s(()=>[o(u,{icon:"@local:icon-park-outline:close",inline:!0}),k(" 关闭其它 ")]),_:1},8,["disabled"]),o(i,{command:"closeAll"},{default:s(()=>[o(u,{icon:"@local:icon-park-outline:close-one",inline:!0}),k(" 关闭所有 ")]),_:1})]),_:1},8,["class"])]),_:1},8,["onCommand"])],2)}const En={$style:Rn},Fn=C(wn,[["render",An],["__cssModules",En]]),[Ln,Hn]=ne(),[Bn,Wn]=ne(),Pn=v({name:"DefaultLayout",components:{Content:Ie,Logo:He,Menu:ze,Navbar:kn,Tabbar:Fn,DefineHeader:Ln,ReuseHeader:Hn,DefineContent:Bn,ReuseContent:Wn},setup(){const e=V(),n=h(()=>e.$state),c=h(()=>n.value.sideOpened?n.value.sideOpenedWidth:n.value.sideClosedWidth),a=h(()=>{const t={};return n.value.sideOpened?(t.marginLeft=n.value.sideOpenedWidth,t.width="calc(100vw - ".concat(n.value.sideOpenedWidth,")")):(t.marginLeft=n.value.sideClosedWidth,t.width="calc(100vw - ".concat(n.value.sideClosedWidth,")")),t}),d=h(()=>{const t={height:q.headerHeight};return n.value.fixedHeader&&(t.position="sticky",t.top="0px"),t}),r=h(()=>{const t={};return n.value.fixedHeader&&(t.position="sticky",t.top=q.headerHeight),t});return{setting:n,asideWidth:c,mainStyle:a,headerStyle:d,tabbarStyle:r}}}),Vn="layout__LtIF8",Nn="layoutSide__0jGs6",Kn="layoutMain__gTJn4",jn="layoutHeader__zFA2K",qn="layoutContent__d0CjI",Gn={layout:Vn,layoutSide:Nn,layoutMain:Kn,layoutHeader:jn,layoutContent:qn};function Jn(e,n,c,a,d,r){const t=m("Navbar"),p=ge,u=m("DefineHeader"),i=m("Content"),y=ve,$=m("DefineContent"),M=m("Logo"),N=m("Menu"),I=Ce,K=Me,F=m("ReuseHeader"),L=m("Tabbar"),O=m("ReuseContent"),R=Se;return l(),g(S,null,[o(u,null,{default:s(()=>[o(p,{class:f(e.$style.layoutHeader),style:E(e.headerStyle)},{default:s(()=>[o(t)]),_:1},8,["class","style"])]),_:1}),o($,null,{default:s(()=>[o(y,{class:f(e.$style.layoutContent)},{default:s(()=>[o(i)]),_:1},8,["class"])]),_:1}),o(R,{class:f(e.$style.layout)},{default:s(()=>[o(K,{class:f(e.$style.layoutSide),width:e.asideWidth},{default:s(()=>[o(M),o(I,null,{default:s(()=>[o(N)]),_:1})]),_:1},8,["class","width"]),e.setting.fixedHeader?(l(),_(R,{key:0,class:f(e.$style.layoutMain),style:E(e.mainStyle),direction:"vertical"},{default:s(()=>[o(F),z(o(L,{style:E(e.tabbarStyle)},null,8,["style"]),[[U,e.setting.tabbar]]),o(I,{wrapClass:"page"},{default:s(()=>[o(O)]),_:1})]),_:1},8,["class","style"])):(l(),_(R,{key:1,class:f(e.$style.layoutMain),style:E(e.mainStyle),direction:"vertical"},{default:s(()=>[o(I,{wrapClass:"page"},{default:s(()=>[o(F),z(o(L,{style:E(e.tabbarStyle)},null,8,["style"]),[[U,e.setting.tabbar]]),o(O)]),_:1})]),_:1},8,["class","style"]))]),_:1},8,["class"])],64)}const zn={$style:Gn},Yn=C(Pn,[["render",Jn],["__cssModules",zn]]);export{Yn as default};
