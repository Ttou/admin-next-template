import{d as h,f as u,j as e,b0 as ne,b1 as ae,b2 as le,I as c,aX as C,aY as $,b3 as oe,an as se,ah as ie,b4 as ue,r as _,b5 as re,af as K,v as j,b6 as ce,A as L,b7 as N,b8 as p,aq as f,b9 as q,g as U,ba as B,bb as de,bc as he,bd as me,ac as pe,B as fe,h as be,x as ge,y as ye,be as ve,bf as w,bg as E,bh as F,bi as P,bj as Se,bk as Ce}from"./chunk-libs-Om8XkbsW.js";import{f as G,h as _e,u as T,i as R,e as Te,g as J,j as A}from"./index-bz1QvFfI.js";const Me=h({name:"Content",setup(){const t=G();return{cachedTabs:u(()=>t.cachedTabs)}},render(){return e(le,null,{default:({Component:t,route:n})=>e(ne,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(ae,{max:20,include:this.cachedTabs},[e(t,{key:n.fullPath},null)])]})})}}),we="logo__guxAe",Ee="logoIcon__RpGcC",I={logo:we,logoIcon:Ee},ke=h({name:"Logo",render(){return e("div",{class:I.logo},[e(c,{class:I.logoIcon,icon:"@local:custom:logo"},null)])}}),x=h({name:"MainMenu",props:{item:{type:Object,required:!0}},setup(t){const n=C(),o=$(),l=u(()=>t.item.meta?!t.item.meta.hidden:!1);function r(){n.path!==t.item.path&&o.push(t.item.path).catch(s=>{console.error(s)})}return{show:l,handleJump:r}},render(){return this.show?e(oe,{index:this.item.path,onClick:this.handleJump},{default:()=>this.item.meta.icon?e(c,{icon:this.item.meta.icon},null):null,title:()=>e("span",null,[this.item.meta.title])}):null}}),Oe="menu__7wVZi",De={menu:Oe},H=h({name:"SubMenu",props:{item:{type:Object,required:!0}},setup(t){return{onlyOneChild:u(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e(x,{item:this.item.children[0]},null):e(ue,{index:this.item.path},{title:()=>e(se,null,[this.item.meta.icon?e(c,{icon:this.item.meta.icon},null):null,e("span",null,[this.item.meta.title])]),default:()=>this.item.children.map(t=>t.children?e(ie("sub-menu"),{item:t,key:t.path},null):e(x,{item:t,key:t.path},null))})}});function Re(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!L(t)}const Ae=h({name:"Menu",components:{SubMenu:H},setup(){const t=_({list:[]}),n=C(),o=_e(),l=T(),r=u(()=>re(o.routes)),s=u(()=>l.$state),a=u(()=>n.path);function b(g,S=""){for(const d of g)if(d.path=S+(d.path.startsWith("/")?d.path:"/".concat(d.path)),delete d.component,delete d.redirect,d.children){if(d.children.length===0)continue;b(d.children,d.path)}return g}function M(){const g=b(r.value);t.list=g}return K(()=>{M()}),{...j(t),CSS_VARS:R,activeMenu:a,setting:s}},render(){let t;return e(ce,{mode:"vertical",class:De.menu,defaultActive:this.activeMenu,backgroundColor:this.CSS_VARS.menuBg,textColor:this.CSS_VARS.menuText,activeTextColor:this.CSS_VARS.menuActiveText,collapse:!this.setting.sideOpened,collapseTransition:!1,uniqueOpened:!0},Re(t=this.list.map(n=>n.children?e(H,{item:n,key:n.path},null):e(x,{item:n,key:n.path},null)))?t:{default:()=>[t]})}}),xe="avatarWrapper__fSpCT",$e="avatar__thdiM",je="avatarDropdownMenu__QS9oQ",k={avatarWrapper:xe,avatar:$e,avatarDropdownMenu:je},Le=h({name:"Avatar",setup(){const t=_({commandMap:{profile:()=>r(),logout:()=>s()}}),n=$(),o=Te(),{$msgbox:l}=J();function r(){n.push({path:A.USER_CENTER})}function s(){l.confirm("确认退出登录？","提示",{type:"warning"}).then(async()=>{await o.logout(),n.replace({path:"/login"})}).catch(()=>{})}function a(b){t.commandMap[b]()}return{handleCommand:a}},render(){return e(q,{onCommand:this.handleCommand},{default:()=>e("div",{class:k.avatarWrapper},[e(c,{class:k.avatar,icon:"@local:custom:avatar",inline:!0},null)]),dropdown:()=>e(N,{class:k.avatarDropdownMenu},{default:()=>[e(p,{command:"profile"},{default:()=>[e(c,{icon:"@local:icon-park-outline:user",inline:!0},null),e("span",null,[f("个人中心")])]}),e(p,{command:"logout"},{default:()=>[e(c,{icon:"@local:icon-park-outline:logout",inline:!0},null),e("span",null,[f("退出登录")])]})]})})}}),We="breadcrumb__X6SBW",Be={breadcrumb:We};function Fe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!L(t)}const Pe=h({name:"Breadcrumb",setup(){const t=_({breadcrumbs:[]}),n=C();function o(){var s;const l=n.matched,r=[];for(const a of l)a.path!=="/"&&r.push({path:a.path.startsWith("/")?a.path:"/".concat(a.path),title:((s=a.meta)==null?void 0:s.title)||"-"});t.breadcrumbs=r}return U(()=>n.path,l=>{l.startsWith("/redirect/")||o()}),K(()=>{o()}),{...j(t)}},render(){let t;return e(de,{class:Be.breadcrumb},Fe(t=this.breadcrumbs.map((n,o)=>o===this.breadcrumbs.length-1?e(B,null,{default:()=>[n.title]}):e(B,{to:{path:n.path}},{default:()=>[n.title]})))?t:{default:()=>[t]})}}),Ie="navbar__oMEpT",He="left__32oF1",Ve="right__HxIwx",O={navbar:Ie,left:He,right:Ve},Ke=h({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:n,toggle:o}=he(),{$message:l}=J(),r=u(()=>t.value?"@local:icon-park-outline:off-screen":"@local:icon-park-outline:full-screen");function s(){n?o():l.warning("浏览器不支持全屏")}return{icon:r,handleClick:s}},render(){return e("div",{title:"全屏",onClick:this.handleClick},[e(c,{icon:this.icon,inline:!0},null)])}}),Ne="trigger__MwLP9",qe={trigger:Ne},Ue=h({name:"Trigger",setup(){const t=T(),n=u(()=>!t.sideOpened),o=u(()=>n.value?"@local:icon-park-outline:menu-unfold":"@local:icon-park-outline:menu-fold");function l(){t.change({key:"sideOpened",value:n.value})}return{collapsed:n,icon:o,handleClick:l}},render(){return e(c,{class:qe.trigger,icon:this.icon,onClick:me(this.handleClick,["native"])},null)}}),Ge=h({name:"Navbar",render(){return e("div",{class:O.navbar},[e("div",{class:O.left},[e(Ue,null,null),e(Pe,null,null)]),e("div",{class:O.right},[e(pe,{size:15},{default:()=>[e(Ke,null,null),e(Le,null,null)]})])])}}),Je="tabbar__vE4we",Qe="tabsMenu__REfEi",Xe="tabsDropdownMenu__j4BGb",D={tabbar:Je,tabsMenu:Qe,tabsDropdownMenu:Xe};function ze(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!L(t)}const V=h({name:"Tabbar",setup(){const t=_({activeKey:"",commandMap:{refresh:()=>d(),closeLeft:()=>X(),closeRight:()=>z(),closeOther:()=>Y(),closeAll:()=>Z()}}),n=C(),o=$(),l=G(),r=T(),s=u(()=>l.visitedTabs),a=u(()=>s.value.findIndex(i=>i.fullPath===t.activeKey)===0),b=u(()=>s.value.findIndex(i=>i.fullPath===t.activeKey)===s.value.length-1),M=u(()=>s.value.length<=1);function g(i){return t.activeKey===i.fullPath}function S(){const{name:i,path:m,fullPath:v}=n;return i&&[A.LOGIN,A.ERROR].indexOf(m)===-1&&(l.addTab(n),t.activeKey=v),!1}function d(){l.delCachedTab(n).then(()=>{const{fullPath:i}=n;fe(()=>{o.replace({path:"/redirect"+i})})})}function Q(i){const m=s.value.find(v=>v.fullPath===i);l.delTab(m).then(({visitedTabs:v})=>{g(m)&&W(v)})}function X(){l.delLeftTabs(n)}function z(){l.delRightTabs(n)}function Y(){l.delOthersTabs(n)}function Z(){l.delAllTabs().then(({visitedTabs:i})=>{W(i)})}function ee(i){o.push(i)}function W(i){const m=i.slice(-1)[0];m?o.push(m.fullPath):n.name===r.homeRoute.name?o.replace({path:"/redirect"+n.fullPath}):o.replace("/")}function te(i){t.commandMap[i]()}return U(()=>n.path,()=>{S()}),be(()=>{S()}),{...j(t),visitedTabs:s,closeLeftDisabled:a,closeRightDisabled:b,closeOtherDisabled:M,handleCloseTab:Q,handleSelectTab:ee,handleCommand:te}},render(){let t;return e("div",{class:D.tabbar},[e(ge,{modelValue:this.activeKey,"onUpdate:modelValue":n=>this.activeKey=n,onTabChange:this.handleSelectTab,onTabRemove:this.handleCloseTab},ze(t=this.visitedTabs.map(n=>e(ye,{key:n.fullPath,name:n.fullPath,label:n.meta.title,closable:!0},null)))?t:{default:()=>[t]}),e(q,null,{default:()=>e("div",{class:D.tabsMenu},[e(c,{icon:"@local:icon-park-outline:down",inline:!0},null)]),dropdown:()=>e(N,{class:D.tabsDropdownMenu},{default:()=>[e(p,{command:"refresh"},{default:()=>[e(c,{icon:"@local:icon-park-outline:redo",inline:!0},null),e("span",null,[f("刷新页面")])]}),e(p,{command:"closeLeft",disabled:this.closeLeftDisabled,divided:!0},{default:()=>[e(c,{icon:"@local:icon-park-outline:to-left",inline:!0},null),e("span",null,[f("关闭左侧")])]}),e(p,{command:"closeRight",disabled:this.closeRightDisabled},{default:()=>[e(c,{icon:"@local:icon-park-outline:to-right",inline:!0},null),e("span",null,[f("关闭右侧")])]}),e(p,{command:"closeOther",disabled:this.closeOtherDisabled,divided:!0},{default:()=>[e(c,{icon:"@local:icon-park-outline:close",inline:!0},null),e("span",null,[f("关闭其它")])]}),e(p,{command:"closeAll"},{default:()=>[e(c,{icon:"@local:icon-park-outline:close-one",inline:!0},null),e("span",null,[f("关闭所有")])]})]})})])}}),Ye="layout__ka9hA",Ze="layoutSide__Jaj8o",et="layoutMain__7naRu",tt="layoutHeader__5DDHg",nt="layoutContent__3Boka",y={layout:Ye,layoutSide:Ze,layoutMain:et,layoutHeader:tt,layoutContent:nt},ot=h({name:"DefaultLayout",setup(){const t=T(),n=u(()=>t.$state),o=u(()=>n.value.sideOpened?n.value.sideOpenedWidth:n.value.sideClosedWidth),l=u(()=>{const a={};return n.value.sideOpened?(a.marginLeft=n.value.sideOpenedWidth,a.width="calc(100vw - ".concat(n.value.sideOpenedWidth,")")):(a.marginLeft=n.value.sideClosedWidth,a.width="calc(100vw - ".concat(n.value.sideClosedWidth,")")),a}),r=u(()=>{const a={height:R.headerHeight};return n.value.fixedHeader&&(a.position="sticky",a.top="0px"),a}),s=u(()=>{const a={};return n.value.fixedHeader&&(a.position="sticky",a.top=R.headerHeight),a});return{setting:n,asideWidth:o,mainStyle:l,headerStyle:r,tabbarStyle:s}},render(){const t=()=>e(Se,{class:y.layoutHeader,style:this.headerStyle},{default:()=>[e(Ge,null,null)]}),n=()=>e(Ce,{class:y.layoutContent},{default:()=>[e(Me,null,null)]});return e(E,{class:y.layout},{default:()=>[e(ve,{class:y.layoutSide,width:this.asideWidth},{default:()=>[e(ke,null,null),e(w,null,{default:()=>[e(Ae,null,null)]})]}),this.setting.fixedHeader?e(E,{class:y.layoutMain,style:this.mainStyle,direction:"vertical"},{default:()=>[e(t,null,null),F(e(V,{style:this.tabbarStyle},null),[[P,this.setting.tabbar]]),e(w,{wrapClass:"page"},{default:()=>[e(n,null,null)]})]}):e(E,{class:y.layoutMain,style:this.mainStyle,direction:"vertical"},{default:()=>[e(w,{wrapClass:"page"},{default:()=>[e(t,null,null),F(e(V,{style:this.tabbarStyle},null),[[P,this.setting.tabbar]]),e(n,null,null)]})]})]})}});export{ot as default};
