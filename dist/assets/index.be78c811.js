import{u as w,a as S,S as R,b as z,c as W,R as L}from"./index.a8b29e23.js";import{d as c,g as r,c as e,A as B,_ as U,$ as V,r as y,w as O,M as h,a0 as M,a1 as P,a2 as D,i as K,a3 as q,a4 as $,s as F,a5 as G,l as T,a6 as J,a7 as Q,a8 as X,a9 as Y,aa as Z,ab as ee,ac as te,ad as ae,ae as le,af as ne,ag as se,ah as ie,k as re,o as ue,ai as N,aj as j,ak as oe,n as de,q as ce,al as he,am as me,an as pe,ao as fe,ap as k}from"./vendor.da8fec13.js";var ve=c({name:"Content",setup(){const t=w();return{cachedTabs:r(()=>t.cachedTabs)}},render(){return e(B,null,{default:({Component:t,route:a})=>e(U,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(V,{max:20,include:this.cachedTabs},[e(t,{key:a.fullPath},null)])]})})}});var be="xo7tdh0",ge="xo7tdh1",ye=c({name:"Logo",setup(){const t=y({}),a=S(),l=r(()=>a.$state);return O(l,s=>{t.value.height=s.siderLogoHeight,t.value.borderRight=s.siderTheme==="light"?"1px solid #f0f0f0":"unset"},{deep:!0,immediate:!0}),{style:t}},render(){return e("div",{class:be,style:this.style},[e(R,{class:ge,name:"ant-design"},null)])}}),x=c({name:"MainMenu",props:{item:{type:Object,required:!0}},setup(t){return{show:r(()=>t.item.meta?!t.item.meta.hidden:!1)}},render(){return this.show?e(h.Item,{icon:this.item.meta.icon,key:this.item.path},{default:()=>[e(M,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),I=c({name:"SubMenu",props:{item:{type:Object,required:!0}},setup(t){return{onlyOneChild:r(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e(x,{item:this.item.children[0]},null):e(h.SubMenu,{key:this.item.path,icon:this.item.meta.icon,title:this.item.meta.title},{default:()=>{var t;return[(t=this.item.children)==null?void 0:t.map(a=>a.children?e(P("sub-menu"),{item:a},null):e(x,{item:a},null))]}})}});function Te(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}var Ce=c({name:"Menu",components:{SubMenu:I},setup(){const t=y([]),a=y([]),l=y([]),s=D(),u=z(),n=S(),v=r(()=>q(u.routes)),d=r(()=>n.$state),b=r(()=>{const m={};return m.minHeight=`calc(100vh - ${d.value.siderLogoHeight})`,m});function p(m,C=""){for(const o of m)if(o.name!=="Dashboard"?o.path=C+(o.path.startsWith("/")?o.path:`/${o.path}`):o.path=`/${o.path}`,delete o.component,delete o.redirect,o.children){if(o.children.length===0)continue;p(o.children,o.path)}return m}function g(){const m=p(v.value);t.value=m}return O(()=>s.path,m=>{g(),a.value=[...s.matched.map(C=>C.path)],l.value=[m]},{immediate:!0}),{list:t,openKeys:a,selectedKeys:l,setting:d,style:b}},render(){let t;const a=l=>l.children?e(I,{item:l},null):e(x,{item:l},null);return e(h,{mode:"inline",theme:this.setting.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":l=>this.openKeys=l,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":l=>this.selectedKeys=l,style:this.style},Te(t=this.list.map(a))?t:{default:()=>[t]})}}),Se=c({name:"Avatar",setup(){const t=$(),a=W();function l(){J.confirm({title:"\u63D0\u793A",icon:e(Q,null,null),content:"\u786E\u8BA4\u9000\u51FA\u767B\u5F55\uFF1F",async onOk(){await a.logout(),t.replace({path:"/login"})}})}return{handleLogout:l}},render(){return e(F,null,{default:()=>e("div",{class:"avatar-wrapper"},[e(R,{name:"avatar",class:"avatar"},null)]),overlay:()=>e(h,null,{default:()=>[e(h.Item,{onClick:this.handleLogout},{default:()=>[e(G,null,null),e("span",null,[T("\u9000\u51FA\u767B\u5F55")])]})]})})}}),ke=c({name:"Breadcrumb",setup(){const t=y([]),a=$();function l(u){var n;return((n=u.meta)==null?void 0:n.title)||"undefined"}function s(u){var v;const n=[];for(const d of u){if(d.path==="/")continue;const b={path:d.path.startsWith("/")?d.path:`/${d.path}`,breadcrumbName:((v=d.meta)==null?void 0:v.title)||"undefined",children:[]};d.children&&(b.children=d.children.map(p=>{var g;return{path:d.path+`/${p.path}`,breadcrumbName:((g=p.meta)==null?void 0:g.title)||"undefined"}})),n.push(b)}return n}return X(()=>{const u=a.currentRoute.value;t.value=s(u.matched)}),{routes:t,getBreadcrumbName:l}},render(){return e(Y,{class:"breadcrumb",routes:this.routes,itemRender:({route:t,routes:a})=>a.indexOf(t)===a.length-1?e("span",null,[t.breadcrumbName]):e(M,{to:t.path},{default:()=>[t.breadcrumbName]})},null)}});var Oe="pkjctc1",$e="pkjctc0",xe="pkjctc2",_e=c({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:a,toggle:l}=Z();function s(){a?l():ae.warn("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5168\u5C4F")}return{isFullscreen:t,handleClick:s}},render(){return e("div",{title:"\u5168\u5C4F",style:{cursor:"pointer"},onClick:this.handleClick},[this.isFullscreen?e(ee,null,null):e(te,null,null)])}}),we=c({name:"SiderTheme",setup(){const t=S(),a=r(()=>t.siderTheme);function l(){t.change({key:"siderTheme",value:a.value==="dark"?"light":"dark"})}return{siderTheme:a,handleClick:l}},render(){return e("div",{title:"\u4E3B\u9898",style:{cursor:"pointer"},onClick:this.handleClick},[this.siderTheme==="dark"?e(le,null,null):e(ne,null,null)])}}),Re=c({name:"Trigger",setup(){const t=S(),a=r(()=>!t.siderOpened);function l(){t.change({key:"siderOpened",value:a.value})}return{collapsed:a,handleClick:l}},render(){return this.collapsed?e(se,{class:"trigger",onClick:this.handleClick},null):e(ie,{class:"trigger",onClick:this.handleClick},null)}}),Le=c({name:"Header",render(){return e("div",{class:$e},[e("div",{class:Oe},[e(Re,null,null),e(ke,null,null)]),e("div",{class:xe},[e(re,null,{default:()=>[e(_e,null,null),e(we,null,null),e(Se,null,null)]})])])}});var Me="zwrgka1",De="zwrgka0",Ke="zwrgka2";function Fe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!K(t)}var Ne=c({name:"Tabs",setup(){const t=y(""),a=D(),l=$(),s=w(),u=r(()=>s.visitedTabs),n=r(()=>u.value.findIndex(i=>i.path===t.value)===0),v=r(()=>u.value.findIndex(i=>i.path===t.value)===u.value.length-1),d=r(()=>u.value.length<=1);function b(i){return t.value===i.path}function p(){const{name:i,path:f}=a;return i&&[L.LOGIN,L.ERROR].indexOf(f)===-1&&(s.addTab(a),t.value=f),!1}function g(){s.delCachedTab(a).then(()=>{const{fullPath:i}=a;fe(()=>{l.replace({path:"/redirect"+i})})})}function m(i){s.delTab(i).then(({visitedTabs:f})=>{b(i)&&_(f)})}function C(){s.delLeftTabs(a)}function o(){s.delRightTabs(a)}function A(){s.delOthersTabs(a)}function E(){s.delAllTabs().then(({visitedTabs:i})=>{_(i)})}function H(i){l.push(i)}function _(i){const f=i.slice(-1)[0];f?l.push(f.fullPath):a.name==="Dashboard"?l.replace({path:"/redirect"+a.fullPath}):l.push("/")}return O(()=>a.path,()=>{p()}),ue(()=>{p()}),{activeKey:t,visitedTabs:u,closeLeftDisabled:n,closeRightDisabled:v,closeOtherDisabled:d,handleCloseTab:m,handleCloseLeftTabs:C,handleCloseRightTabs:o,handleCloseOtherTabs:A,handleCloseAllTabs:E,handleSelectTab:H,handleRefreshTab:g}},render(){let t;return e("div",{class:De},[e(N,{activeKey:this.activeKey,"onUpdate:activeKey":a=>this.activeKey=a,onChange:this.handleSelectTab},Fe(t=this.visitedTabs.map(a=>e(N.TabPane,{tab:()=>e("div",{class:Me},[e("span",null,[a.meta.title]),e(j,{onClick:oe(()=>this.handleCloseTab(a),["stop"])},null)]),key:a.path},null)))?t:{default:()=>[t]}),e(F,{overlayStyle:{zIndex:100002}},{default:()=>e("div",{class:Ke},[e(de,null,null)]),overlay:()=>e(h,null,{default:()=>[e(h.Item,{onClick:this.handleRefreshTab},{default:()=>[e(ce,null,null),T("\u5237\u65B0\u9875\u9762")]}),e(h.Divider,null,null),e(h.Item,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[e(he,null,null),T("\u5173\u95ED\u5DE6\u4FA7")]}),e(h.Item,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[e(me,null,null),T("\u5173\u95ED\u53F3\u4FA7")]}),e(h.Divider,null,null),e(h.Item,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[e(j,null,null),T("\u5173\u95ED\u5176\u5B83")]}),e(h.Item,{onClick:this.handleCloseAllTabs},{default:()=>[e(pe,null,null),T("\u5173\u95ED\u6240\u6709")]})]})})])}});var je="_63mzhe0",Ie="_63mzhe4",Ae="_63mzhe3",Ee="_63mzhe2",He="_63mzhe1",Be=c({name:"Layout",setup(){const t=S(),a=r(()=>t.$state),l=r(()=>{const n={};return a.value.siderOpened?(n.marginLeft=a.value.siderOpenedWidth,n.width=`calc(100vw - ${a.value.siderOpenedWidth})`):(n.marginLeft=a.value.siderClosedWidth,n.width=`calc(100vw - ${a.value.siderClosedWidth})`),n}),s=r(()=>{const n={height:a.value.headerHeight};return a.value.fixedHeader&&(n.position="sticky",n.top="0px"),n}),u=r(()=>{const n={};return a.value.fixedHeader&&(n.position="sticky",n.top=a.value.headerHeight),n});return{settings:a,mainStyle:l,headerStyle:s,tabbarStyle:u}},render(){return e(k,{class:je},{default:()=>[e(k.Sider,{class:He,collapsed:!this.settings.siderOpened,trigger:null,theme:this.settings.siderTheme,width:this.settings.siderOpenedWidth,collapsedWidth:this.settings.siderClosedWidth,collapsible:!0},{default:()=>[e(ye,null,null),e(Ce,null,null)]}),e(k,{class:Ee,style:this.mainStyle},{default:()=>[e(k.Header,{class:Ae,style:this.headerStyle},{default:()=>[e(Le,null,null)]}),e(Ne,{style:this.tabbarStyle},null),e(k.Content,{class:Ie},{default:()=>[e(ve,null,null)]})]})]})}});export{Be as default};
