import{u as $,S as i,a as z,b as U,R as H,c as w}from"./index.dc0dcdf6.js";import{u as O}from"./useSettingStore.1a5d6131.js";import{d as h,c as o,b as e,U as Z,$ as q,a0 as Q,r as C,a as I,a1 as m,a2 as K,a3 as X,a4 as F,j as R,a5 as G,a6 as D,a7 as W,A as T,a8 as J,w as Y,a9 as ee,aa as te,ab as ae,H as ne,o as le,ac as A,ad as se,n as re,ae as S}from"./vendor.8caec6d0.js";var ie=h({name:"Content",setup(){const t=$();return{cachedTabs:o(()=>t.cachedTabs)}},render(){return e(Z,null,{default:({Component:t,route:a})=>e(q,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(Q,{max:20,include:this.cachedTabs},[e(t,{key:a.fullPath},null)])]})})}});const oe="index-module__logo___1slq7",ue="index-module__logoIcon___3zi2F";var N={logo:oe,logoIcon:ue},de=h({name:"Logo",setup(){const t=C({}),a=O(),n=o(()=>a.$state);return I(n,l=>{t.value.height=l.siderLogoHeight,t.value.borderRight=l.siderTheme==="light"?"1px solid #f0f0f0":"unset"},{deep:!0,immediate:!0}),{style:t}},render(){return e("div",{class:N.logo,style:this.style},[e(i,{class:N.logoIcon,name:"logo"},null)])}}),L=h({name:"MainMenu",props:{item:{type:Object,required:!0}},setup(t){return{show:o(()=>t.item.meta?!t.item.meta.hidden:!1)}},render(){return this.show?e(m.Item,{icon:this.item.meta.icon?e(i,{name:this.item.meta.icon},null):null,key:this.item.path},{default:()=>[e(K,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),E=h({name:"SubMenu",props:{item:{type:Object,required:!0}},setup(t){return{onlyOneChild:o(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e(L,{item:this.item.children[0]},null):e(m.SubMenu,{key:this.item.path,icon:this.item.meta.icon?e(i,{name:this.item.meta.icon},null):null,title:this.item.meta.title},{default:()=>{var t;return[(t=this.item.children)==null?void 0:t.map(a=>a.children?e(X("sub-menu"),{item:a},null):e(L,{item:a},null))]}})}});function ce(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!R(t)}var he=h({name:"Menu",components:{SubMenu:E},setup(){const t=C([]),a=C([]),n=C([]),l=F(),u=z(),s=O(),v=o(()=>G(u.routes)),c=o(()=>s.$state),g=o(()=>{const b={};return b.minHeight=`calc(100vh - ${c.value.siderLogoHeight})`,b});function f(b,k=""){for(const d of b)if(d.name!=="Dashboard"?d.path=k+(d.path.startsWith("/")?d.path:`/${d.path}`):d.path=`/${d.path}`,delete d.component,delete d.redirect,d.children){if(d.children.length===0)continue;f(d.children,d.path)}return b}function y(){const b=f(v.value);t.value=b}return I(()=>l.path,b=>{y(),a.value=[...l.matched.map(k=>k.path)],n.value=[b]},{immediate:!0}),{list:t,openKeys:a,selectedKeys:n,setting:c,style:g}},render(){let t;const a=n=>n.children?e(E,{item:n},null):e(L,{item:n},null);return e(m,{mode:"inline",theme:this.setting.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":n=>this.openKeys=n,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":n=>this.selectedKeys=n,style:this.style},ce(t=this.list.map(a))?t:{default:()=>[t]})}});const me="index-module__navbar___2tJtB",be="index-module__left___1lzk_",fe="index-module__trigger___2kX0y",pe="index-module__breadcrumb___z1ZAM",_e="index-module__right___s5uL9",ve="index-module__avatarWrapper___3YP6S",ge="index-module__avatar___1WZ8Z";var _={navbar:me,left:be,trigger:fe,breadcrumb:pe,right:_e,avatarWrapper:ve,avatar:ge},ye=h({name:"Avatar",setup(){const t=D(),a=U();function n(){J.confirm({title:"\u63D0\u793A",icon:e(i,{class:"anticon",name:"navbar-exclamation"},null),content:"\u786E\u8BA4\u9000\u51FA\u767B\u5F55\uFF1F",async onOk(){await a.logout(),t.replace({path:"/login"})}})}return{handleLogout:n}},render(){return e(W,null,{default:()=>e("div",{class:_.avatarWrapper},[e(i,{class:_.avatar,name:"avatar"},null)]),overlay:()=>e(m,null,{default:()=>[e(m.Item,{onClick:this.handleLogout},{default:()=>[e(i,{name:"navbar-logout",style:{marginRight:"5px"}},null),e("span",null,[T("\u9000\u51FA\u767B\u5F55")])]})]})})}}),Ce=h({name:"Breadcrumb",setup(){const t=C([]),a=D();function n(u){var s;return((s=u.meta)==null?void 0:s.title)||"undefined"}function l(u){var v;const s=[];for(const c of u){if(c.path==="/")continue;const g={path:c.path.startsWith("/")?c.path:`/${c.path}`,breadcrumbName:((v=c.meta)==null?void 0:v.title)||"undefined",children:[]};c.children&&(g.children=c.children.map(f=>{var y;return{path:c.path+`/${f.path}`,breadcrumbName:((y=f.meta)==null?void 0:y.title)||"undefined"}})),s.push(g)}return s}return Y(()=>{const u=a.currentRoute.value;t.value=l(u.matched)}),{routes:t,getBreadcrumbName:n}},render(){return e(ee,{class:_.breadcrumb,routes:this.routes,itemRender:({route:t,routes:a})=>a.indexOf(t)===a.length-1?e("span",null,[t.breadcrumbName]):e(K,{to:t.path},{default:()=>[t.breadcrumbName]})},null)}}),Te=h({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:a,toggle:n}=te();function l(){a?n():ae.warn("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5168\u5C4F")}return{isFullscreen:t,handleClick:l}},render(){return e("div",{title:"\u5168\u5C4F",style:{cursor:"pointer"},onClick:this.handleClick},[this.isFullscreen?e(i,{name:"navbar-fullscreen-exit"},null):e(i,{name:"navbar-fullscreen"},null)])}}),Se=h({name:"SiderTheme",setup(){const t=O(),a=o(()=>t.siderTheme);function n(){t.change({key:"siderTheme",value:a.value==="dark"?"light":"dark"})}return{siderTheme:a,handleClick:n}},render(){return e("div",{title:"\u4E3B\u9898",style:{cursor:"pointer"},onClick:this.handleClick},[this.siderTheme==="dark"?e(i,{name:"navbar-theme-dark"},null):e(i,{name:"navbar-theme-light"},null)])}}),xe=h({name:"Trigger",setup(){const t=O(),a=o(()=>!t.siderOpened);function n(){t.change({key:"siderOpened",value:a.value})}return{collapsed:a,handleClick:n}},render(){return e(i,{class:_.trigger,name:this.collapsed?"navbar-menu-unfold":"navbar-menu-fold",onClick:this.handleClick},null)}}),ke=h({name:"Header",render(){return e("div",{class:_.navbar},[e("div",{class:_.left},[e(xe,null,null),e(Ce,null,null)]),e("div",{class:_.right},[e(ne,null,{default:()=>[e(Te,null,null),e(Se,null,null),e(ye,null,null)]})])])}});const Oe="index-module__tabbar___mjQd6",Me="index-module__tabContent___2IlFX",we="index-module__tabCloseIcon___zQVEA",Ie="index-module__tabsMenu___3TFrf",Re="index-module__tabsDropdownMenu___u77_F";var M={tabbar:Oe,tabContent:Me,tabCloseIcon:we,tabsMenu:Ie,tabsDropdownMenu:Re};function De(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!R(t)}var Le=h({name:"Tabs",setup(){const t=C(""),a=F(),n=D(),l=$(),u=o(()=>l.visitedTabs),s=o(()=>u.value.findIndex(r=>r.path===t.value)===0),v=o(()=>u.value.findIndex(r=>r.path===t.value)===u.value.length-1),c=o(()=>u.value.length<=1);function g(r){return t.value===r.path}function f(){const{name:r,path:p}=a;return r&&[H.LOGIN,H.ERROR].indexOf(p)===-1&&(l.addTab(a),t.value=p),!1}function y(){l.delCachedTab(a).then(()=>{const{fullPath:r}=a;re(()=>{n.replace({path:"/redirect"+r})})})}function b(r){l.delTab(r).then(({visitedTabs:p})=>{g(r)&&j(p)})}function k(){l.delLeftTabs(a)}function d(){l.delRightTabs(a)}function B(){l.delOthersTabs(a)}function P(){l.delAllTabs().then(({visitedTabs:r})=>{j(r)})}function V(r){n.push(r)}function j(r){const p=r.slice(-1)[0];p?n.push(p.fullPath):a.name==="Analysis"?n.replace({path:"/redirect"+a.fullPath}):n.replace("/")}return I(()=>a.path,()=>{f()}),le(()=>{f()}),{activeKey:t,visitedTabs:u,closeLeftDisabled:s,closeRightDisabled:v,closeOtherDisabled:c,handleCloseTab:b,handleCloseLeftTabs:k,handleCloseRightTabs:d,handleCloseOtherTabs:B,handleCloseAllTabs:P,handleSelectTab:V,handleRefreshTab:y}},render(){let t;return e("div",{class:M.tabbar},[e(A,{activeKey:this.activeKey,"onUpdate:activeKey":a=>this.activeKey=a,onChange:this.handleSelectTab},De(t=this.visitedTabs.map(a=>e(A.TabPane,{tab:()=>e("div",{class:M.tabContent},[e("span",null,[a.meta.title]),e(i,{name:"tabbar-close",class:M.tabCloseIcon,onClick:se(()=>this.handleCloseTab(a),["stop"])},null)]),key:a.path},null)))?t:{default:()=>[t]}),e(W,{overlayStyle:{zIndex:100002}},{default:()=>e("div",{class:M.tabsMenu},[e(i,{name:"tabbar-down"},null)]),overlay:()=>e(m,{class:M.tabsDropdownMenu},{default:()=>[e(m.Item,{onClick:this.handleRefreshTab},{default:()=>[e(i,{name:"tabbar-refresh"},null),T("\u5237\u65B0\u9875\u9762")]}),e(m.Divider,null,null),e(m.Item,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[e(i,{name:"tabbar-close-left"},null),T("\u5173\u95ED\u5DE6\u4FA7")]}),e(m.Item,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[e(i,{name:"tabbar-close-right"},null),T("\u5173\u95ED\u53F3\u4FA7")]}),e(m.Divider,null,null),e(m.Item,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[e(i,{name:"tabbar-close"},null),T("\u5173\u95ED\u5176\u5B83")]}),e(m.Item,{onClick:this.handleCloseAllTabs},{default:()=>[e(i,{name:"tabbar-close-all"},null),T("\u5173\u95ED\u6240\u6709")]})]})})])}});const je="index-module__layout___NHE5Z",$e="index-module__layoutSider___3_P83",He="index-module__layoutMain___3jFjl",Ke="index-module__layoutHeader___2VbKL",Fe="index-module__layoutContent___1uzW5";var x={layout:je,layoutSider:$e,layoutMain:He,layoutHeader:Ke,layoutContent:Fe};function We(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!R(t)}var Be=h({name:"DefaultLayout",setup(){const t=O(),a=o(()=>t.$state),n=o(()=>{const s={};return a.value.siderOpened?(s.marginLeft=a.value.siderOpenedWidth,s.width=`calc(100vw - ${a.value.siderOpenedWidth})`):(s.marginLeft=a.value.siderClosedWidth,s.width=`calc(100vw - ${a.value.siderClosedWidth})`),s}),l=o(()=>{const s={height:a.value.headerHeight};return a.value.fixedHeader&&(s.position="sticky",s.top="0px"),s}),u=o(()=>{const s={};return a.value.fixedHeader&&(s.position="sticky",s.top=a.value.headerHeight),s});return{setting:a,mainStyle:n,headerStyle:l,tabbarStyle:u}},render(){let t;const a=()=>e(S.Header,{class:x.layoutHeader,style:this.headerStyle},{default:()=>[e(ke,null,null)]}),n=()=>e(Le,{style:this.tabbarStyle},null),l=()=>e(S.Content,{class:x.layoutContent},{default:()=>[e(ie,null,null)]});return e(S,{class:x.layout},{default:()=>[e(S.Sider,{class:x.layoutSider,collapsed:!this.setting.siderOpened,trigger:null,theme:this.setting.siderTheme,width:this.setting.siderOpenedWidth,collapsedWidth:this.setting.siderClosedWidth,collapsible:!0},{default:()=>[e(de,null,null),e(w,null,{default:()=>[e(he,null,null)]})]}),this.setting.fixedHeader?e(S,{class:x.layoutMain,style:this.mainStyle},{default:()=>[a(),n(),e(w,null,We(t=l())?t:{default:()=>[t]})]}):e(w,null,{default:()=>[e(S,{class:x.layoutMain,style:this.mainStyle},{default:()=>[a(),n(),l()]})]})]})}});export{Be as default};
