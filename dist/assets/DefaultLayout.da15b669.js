import{a4 as z,g as e,I as o,f as c,a5 as A,p as r,a6 as X,a7 as Y,a8 as G,r as _,m as M,a9 as L,aa as g,ab as j,ac as Q,O as Z,u as F,ad as ee,ae as te,af as K,i as $,ag as ne,l as x,n as ae,k as S,ah as B,ai as le,aj as se,ak as ie,y as oe,A as re,o as ue,al as ce,am as de,an as he,ao as I,ap as N,aq as fe,ar as D,as as be,at as w,au as pe,av as me}from"./index.9ce27765.js";function ge(){function t(n){z.confirm({title:"\u63D0\u793A",icon:e(o,{icon:"ant-design:exclamation-circle-outlined",class:"anticon"}),...n})}return{showConfirm:t}}const ye=c({name:"Content",setup(){const t=A();return{cachedTabs:r(()=>t.cachedTabs)}},render(){return e(G,null,{default:({Component:t,route:n})=>e(X,{name:"fade-slide",mode:"out-in",appear:!0},{default:()=>[e(Y,{max:20,include:this.cachedTabs},[e(t,{key:n.fullPath},null)])]})})}}),ve="logo__b4V60",Ce="logoIcon__1fNeN",P={logo:ve,logoIcon:Ce},Te=c({name:"Logo",setup(){const t=_({}),n=M(),a=r(()=>n.$state);return L(a,s=>{t.value.height=s.siderLogoHeight,t.value.borderRight=s.siderTheme==="light"?"1px solid #f0f0f0":"unset"},{deep:!0,immediate:!0}),{style:t}},render(){return e("div",{class:P.logo,style:this.style},[e(o,{class:P.logoIcon,icon:"logos:ant-design"},null)])}}),R=c({name:"MainMenu",props:{item:{type:Object,required:!0}},setup(t){return{show:r(()=>t.item.meta?!t.item.meta.hidden:!1)}},render(){return this.show?e(g,{icon:this.item.meta.icon?e(o,{icon:this.item.meta.icon},null):null,key:this.item.path},{default:()=>[e(j,{to:this.item.path},{default:()=>[this.item.meta.title]})]}):null}}),W=c({name:"SubMenu",props:{item:{type:Object,required:!0}},setup(t){return{onlyOneChild:r(()=>t.item.children.length===1?t.item.meta?!t.item.meta.alwaysShow:!0:!1)}},render(){return this.onlyOneChild?e(R,{item:this.item.children[0]},null):e(Q,{key:this.item.path,icon:this.item.meta.icon?e(o,{icon:this.item.meta.icon},null):null,title:this.item.meta.title},{default:()=>{var t;return[(t=this.item.children)==null?void 0:t.map(n=>n.children?e(Z("sub-menu"),{item:n},null):e(R,{item:n},null))]}})}});function Se(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$(t)}const _e=c({name:"Menu",components:{SubMenu:W},setup(){const t=_([]),n=_([]),a=_([]),s=F(),d=ee(),l=M(),y=r(()=>ne(d.routes)),u=r(()=>l.$state),v=r(()=>{const f={};return f.minHeight=`calc(100vh - ${u.value.siderLogoHeight})`,f});function p(f,O=""){for(const h of f)if(h.path=O+(h.path.startsWith("/")?h.path:`/${h.path}`),delete h.component,delete h.redirect,h.children){if(h.children.length===0)continue;p(h.children,h.path)}return f}function m(){const f=p(y.value);t.value=f}return L(()=>s.path,f=>{n.value=[...d.matched],a.value=[f]},{immediate:!0}),te(()=>{m()}),{list:t,openKeys:n,selectedKeys:a,setting:u,style:v}},render(){let t;const n=a=>a.children?e(W,{item:a},null):e(R,{item:a},null);return e(K,{mode:"inline",theme:this.setting.siderTheme,openKeys:this.openKeys,"onUpdate:openKeys":a=>this.openKeys=a,selectedKeys:this.selectedKeys,"onUpdate:selectedKeys":a=>this.selectedKeys=a,style:this.style},Se(t=this.list.map(n))?t:{default:()=>[t]})}}),Me="navbar__hJHzc",ke="left__jNRv4",Oe="trigger__-bzRa",De="breadcrumb__fDC6f",we="right__POa-W",Re="avatarWrapper__oh6CA",Le="avatar__t145K",Ke="avatarDropdownMenu__9JSAd",b={navbar:Me,left:ke,trigger:Oe,breadcrumb:De,right:we,avatarWrapper:Re,avatar:Le,avatarDropdownMenu:Ke},$e=c({name:"Avatar",setup(){const t=x(),n=ae(),{showConfirm:a}=ge();function s(){a({content:"\u786E\u8BA4\u9000\u51FA\u767B\u5F55\uFF1F",async onOk(){await n.logout(),t.replace({path:"/login"})}})}return{handleLogout:s}},render(){return e(B,{placement:"bottom"},{default:()=>e("div",{class:b.avatarWrapper},[e(o,{class:b.avatar,icon:"custom:avatar",inline:!0},null)]),overlay:()=>e(K,null,{default:()=>[e(g,{class:b.avatarDropdownMenu,onClick:this.handleLogout},{default:()=>[e(o,{icon:"ant-design:logout-outlined",inline:!0},null),e("span",null,[S("\u9000\u51FA\u767B\u5F55")])]})]})})}}),xe=c({name:"Breadcrumb",setup(){const t=_([]),n=x();function a(d){var l;return((l=d.meta)==null?void 0:l.title)||"undefined"}function s(d){var y;const l=[];for(const u of d){if(u.path==="/")continue;const v={path:u.path.startsWith("/")?u.path:`/${u.path}`,breadcrumbName:((y=u.meta)==null?void 0:y.title)||"undefined",children:[]};u.children&&(v.children=u.children.map(p=>{var m;return{path:u.path+`/${p.path}`,breadcrumbName:((m=p.meta)==null?void 0:m.title)||"undefined"}})),l.push(v)}return l}return le(()=>{const d=n.currentRoute.value;t.value=s(d.matched)}),{routes:t,getBreadcrumbName:a}},render(){return e(se,{class:b.breadcrumb,routes:this.routes,itemRender:({route:t,routes:n})=>n.indexOf(t)===n.length-1?e("span",null,[t.breadcrumbName]):e(j,{to:t.path},{default:()=>[t.breadcrumbName]})},null)}}),He=c({name:"ScreenFull",setup(){const{isFullscreen:t,isSupported:n,toggle:a}=ie();function s(){n?a():oe.warn("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u5168\u5C4F")}return{isFullscreen:t,handleClick:s}},render(){return e("div",{title:"\u5168\u5C4F",onClick:this.handleClick},[this.isFullscreen?e(o,{icon:"ant-design:fullscreen-exit-outlined",inline:!0},null):e(o,{icon:"ant-design:fullscreen-outlined",inline:!0},null)])}}),Ie=c({name:"SiderTheme",setup(){const t=M(),n=r(()=>t.siderTheme);function a(){t.change({key:"siderTheme",value:n.value==="dark"?"light":"dark"})}return{siderTheme:n,handleClick:a}},render(){return e("div",{title:"\u4E3B\u9898",onClick:this.handleClick},[this.siderTheme==="dark"?e(o,{icon:"ant-design:appstore-outlined",inline:!0},null):e(o,{icon:"ant-design:appstore-filled",inline:!0},null)])}}),Ne=c({name:"Trigger",setup(){const t=M(),n=r(()=>!t.siderOpened);function a(){t.change({key:"siderOpened",value:n.value})}return{collapsed:n,handleClick:a}},render(){return e(o,{class:b.trigger,icon:this.collapsed?"ant-design:menu-unfold-outlined":"ant-design:menu-fold-outlined",onClick:this.handleClick},null)}}),Pe=c({name:"Navbar",render(){return e("div",{class:b.navbar},[e("div",{class:b.left},[e(Ne,null,null),e(xe,null,null)]),e("div",{class:b.right},[e(re,null,{default:()=>[e(He,null,null),e(Ie,null,null),e($e,null,null)]})])])}}),We="tabbar__3urcJ",Ae="tabContent__-d8Yv",je="tabCloseIcon__9H4YP",Fe="tabsMenu__4WXXF",Be="tabsDropdownMenu__aNrgf",k={tabbar:We,tabContent:Ae,tabCloseIcon:je,tabsMenu:Fe,tabsDropdownMenu:Be};function Ee(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$(t)}const Ue=c({name:"Tabbar",setup(){const t=_(""),n=F(),a=x(),s=A(),d=M(),l=r(()=>s.visitedTabs),y=r(()=>l.value.findIndex(i=>i.fullPath===t.value)===0),u=r(()=>l.value.findIndex(i=>i.fullPath===t.value)===l.value.length-1),v=r(()=>l.value.length<=1);function p(i){return t.value===i.fullPath}function m(){const{name:i,path:C,fullPath:q}=n;return i&&[N.LOGIN,N.ERROR].indexOf(C)===-1&&(s.addTab(n),t.value=q),!1}function f(){s.delCachedTab(n).then(()=>{const{fullPath:i}=n;fe(()=>{a.replace({path:"/redirect"+i})})})}function O(i){s.delTab(i).then(({visitedTabs:C})=>{p(i)&&H(C)})}function h(){s.delLeftTabs(n)}function E(){s.delRightTabs(n)}function U(){s.delOthersTabs(n)}function V(){s.delAllTabs().then(({visitedTabs:i})=>{H(i)})}function J(i){a.push(i)}function H(i){const C=i.slice(-1)[0];C?a.push(C.fullPath):n.name===d.homeRoute.name?a.replace({path:"/redirect"+n.fullPath}):a.replace("/")}return L(()=>n.path,()=>{m()}),ue(()=>{m()}),{activeKey:t,visitedTabs:l,closeLeftDisabled:y,closeRightDisabled:u,closeOtherDisabled:v,handleCloseTab:O,handleCloseLeftTabs:h,handleCloseRightTabs:E,handleCloseOtherTabs:U,handleCloseAllTabs:V,handleSelectTab:J,handleRefreshTab:f}},render(){let t;return e("div",{class:k.tabbar},[e(ce,{activeKey:this.activeKey,"onUpdate:activeKey":n=>this.activeKey=n,onChange:this.handleSelectTab},Ee(t=this.visitedTabs.map(n=>e(de,{tab:()=>e("div",{class:k.tabContent},[e("input",{"data-key":n.fullPath,hidden:!0},null),e("span",null,[n.meta.title]),e(o,{icon:"ant-design:close-outlined",class:k.tabCloseIcon,inline:!0,onClick:he(()=>this.handleCloseTab(n),["stop"])},null)]),key:n.fullPath},null)))?t:{default:()=>[t]}),e(B,{placement:"bottomRight",overlayStyle:{zIndex:100002}},{default:()=>e("div",{class:k.tabsMenu},[e(o,{icon:"ant-design:down-outlined",inline:!0},null)]),overlay:()=>e(K,{class:k.tabsDropdownMenu},{default:()=>[e(g,{onClick:this.handleRefreshTab},{default:()=>[e(o,{icon:"ant-design:reload-outlined",inline:!0},null),S("\u5237\u65B0\u9875\u9762")]}),e(I,null,null),e(g,{onClick:this.handleCloseLeftTabs,disabled:this.closeLeftDisabled},{default:()=>[e(o,{icon:"ant-design:vertical-right-outlined",inline:!0},null),S("\u5173\u95ED\u5DE6\u4FA7")]}),e(g,{onClick:this.handleCloseRightTabs,disabled:this.closeRightDisabled},{default:()=>[e(o,{icon:"ant-design:vertical-left-outlined",inline:!0},null),S("\u5173\u95ED\u53F3\u4FA7")]}),e(I,null,null),e(g,{onClick:this.handleCloseOtherTabs,disabled:this.closeOtherDisabled},{default:()=>[e(o,{icon:"ant-design:close-outlined",inline:!0},null),S("\u5173\u95ED\u5176\u5B83")]}),e(g,{onClick:this.handleCloseAllTabs},{default:()=>[e(o,{icon:"ant-design:close-circle-outlined",inline:!0},null),S("\u5173\u95ED\u6240\u6709")]})]})})])}}),Ve="layout__USsbD",Je="layoutSider__M0-OJ",qe="layoutMain__lOiPe",ze="layoutHeader__9--p7",Xe="layoutContent__19vnr",T={layout:Ve,layoutSider:Je,layoutMain:qe,layoutHeader:ze,layoutContent:Xe};function Ye(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!$(t)}const Qe=c({name:"DefaultLayout",setup(){const t=M(),n=r(()=>t.$state),a=r(()=>{const l={};return n.value.siderOpened?(l.marginLeft=n.value.siderOpenedWidth,l.width=`calc(100vw - ${n.value.siderOpenedWidth})`):(l.marginLeft=n.value.siderClosedWidth,l.width=`calc(100vw - ${n.value.siderClosedWidth})`),l}),s=r(()=>{const l={height:n.value.headerHeight};return n.value.fixedHeader&&(l.position="sticky",l.top="0px"),l}),d=r(()=>{const l={};return n.value.fixedHeader&&(l.position="sticky",l.top=n.value.headerHeight),l});return{setting:n,mainStyle:a,headerStyle:s,tabbarStyle:d}},render(){let t;const n=()=>e(pe,{class:T.layoutHeader,style:this.headerStyle},{default:()=>[e(Pe,null,null)]}),a=()=>e(Ue,{style:this.tabbarStyle},null),s=()=>e(me,{class:T.layoutContent},{default:()=>[e(ye,null,null)]});return e(D,{class:T.layout},{default:()=>[e(be,{class:T.layoutSider,collapsed:!this.setting.siderOpened,trigger:null,theme:this.setting.siderTheme,width:this.setting.siderOpenedWidth,collapsedWidth:this.setting.siderClosedWidth,collapsible:!0},{default:()=>[e(Te,null,null),e(w,null,{default:()=>[e(_e,null,null)]})]}),this.setting.fixedHeader?e(D,{class:T.layoutMain,style:this.mainStyle},{default:()=>[n(),a(),e(w,null,Ye(t=s())?t:{default:()=>[t]})]}):e(w,null,{default:()=>[e(D,{class:T.layoutMain,style:this.mainStyle},{default:()=>[n(),a(),s()]})]})]})}});export{Qe as default};
